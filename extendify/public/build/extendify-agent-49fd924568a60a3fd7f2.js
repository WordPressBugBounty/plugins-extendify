(globalThis.webpackChunkextendify=globalThis.webpackChunkextendify||[]).push([[671],{205:(e,t,n)=>{var o={"./block-selector/tools/generate-block-image.js":1598,"./block-selector/tools/get-block-content.js":2853,"./block-selector/tools/update-block-content.js":1256,"./block-selector/tools/update-block-image.js":2628,"./content/tools/generate-page.js":8942,"./content/tools/get-post-status.js":3571,"./content/tools/get-post-strings-editor.js":5261,"./content/tools/get-post-strings.js":1557,"./content/tools/update-post-status.js":9982,"./content/tools/update-post-strings-editor.js":5092,"./content/tools/update-post-strings.js":6636,"./content/tools/view-created-page.js":9133,"./extermal/tools/search-wp-docs.js":3364,"./plugins/tools/install-plugin.js":4679,"./settings/tools/get-wp-setting.js":3508,"./settings/tools/update-wp-setting.js":8795,"./theme/tools/get-menu-items.js":3712,"./theme/tools/get-site-vibes.js":9665,"./theme/tools/get-theme-fonts-variations.js":2341,"./theme/tools/update-menu-items.js":443,"./theme/tools/update-site-vibes.js":8922,"./theme/tools/update-theme-fonts-variation.js":1299,"./theme/tools/update-theme-variation.js":4664};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=s,e.exports=r,r.id=205},286:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var o=n(4997);const r=(e,t)=>{const n=(0,o.rawHandler)({HTML:e.previousContent}),r=new DOMParser,s=n=>n.map((n=>{if(["core/image","core/cover"].includes(n.name)){const o={...n.attributes},s=e.url.includes("unsplash.com")?e.url.split("?")[0]:e.url,i=o.id===e.imageId,a=o.url.startsWith(s);if(!i&&!a)return{...n,attributes:o};o.url=t.source_url||t.url,o.id=t.id,o.className&&(o.className=o.className.split(" ").filter((e=>"extendify-image-import"!==e)).join(" "));const l=r.parseFromString(o.originalContent||n.originalContent||"","text/html"),c=l.querySelector("img");if(!c)return{...n,attributes:o};c.setAttribute("src",t.source_url||t.url);const d=c.className.split(" ").filter((t=>t!==`wp-image-${e.imageId}`));return d.push(`wp-image-${t.id}`),c.className=d.join(" "),o.originalContent=l.body.innerHTML,{...n,attributes:o}}return n.innerBlocks&&n.innerBlocks.length>0?{...n,innerBlocks:s(n.innerBlocks)}:n})),i=s(n);return(0,o.serialize)(i)}},439:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var o=n(6087),r=n(7723),s=n(790);const{homeUrl:i}=window.extSharedData||{},{context:a,abilities:l}=window.extAgentData,c={available:()=>!["page","post"].includes(a?.adminPage)&&a.isBlockTheme&&l.canEditPosts,id:"create-page",whenFinished:{component:({inputs:e,onConfirm:t})=>{const n=(0,o.useCallback)((()=>{e.postId&&window.open(`${i}/?page_id=${e.postId}`,"_self"),t()}),[e.postId,t]);return(0,s.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,s.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,s.jsx)("div",{className:"p-3",children:(0,s.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,r.__)("The agent has finished creating your page. Press take me there to visit your new page or dismiss to remove this notice.","extendify-local")})})}),(0,s.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,s.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:t,children:(0,r.__)("Dismiss","extendify-local")}),(0,s.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",onClick:n,children:(0,r.__)("Take me there","extendify-local")})]})]})}}}},443:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(1455),r=n.n(o);const s=async({id:e,replacements:t})=>await r()({path:`/wp/v2/navigation/${e}`,method:"POST",data:{content:t?.[0]?.updated}})},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},1256:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(1455),r=n.n(o);const s=async({previousContent:e,newContent:t})=>{const{postType:n,postId:o}=window.extAgentData.context,s=await r()({path:`/wp/v2/types/${encodeURIComponent(n)}`}),i=s?.rest_base||`${n}s`,a=(await r()({path:`/wp/v2/${i}/${o}?context=edit`})).content.raw.replace(e,t);await r()({path:`/wp/v2/${i}/${o}`,method:"POST",data:{content:a}})}},1299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o);const s=window.extSharedData.globalStylesPostID,i=async({variation:e})=>{const t=await r()({path:"/extendify/v1/agent/block-style-variations"}),n=Object.keys(t).reduce(((n,o)=>(n[o]={...e.styles?.blocks?.[o],variations:t[o]},n)),{});return r()({method:"POST",path:`/wp/v2/global-styles/${s}`,data:{id:s,settings:e.settings,styles:{...e.styles,blocks:{...e.styles?.blocks,...n}}}})}},1352:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(6087);const{abilities:r,context:s}=window.extAgentData,i={available:()=>r?.canEditPost&&s?.usingBlockEditor&&s?.adminPage&&s?.postId,id:"edit-post-strings-editor",whenFinished:{component:({inputs:e,onConfirm:t})=>((0,o.useEffect)((()=>{const n=requestAnimationFrame((()=>{t({data:e})}));return()=>cancelAnimationFrame(n)}),[e,t]),null)}}},1429:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var o=n(6087),r=n(7723),s=n(790);const i=e=>{const t=document.getElementById("extendify-agent-chat"),n=e=>t&&t.contains(e),o=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1);let r;for(;r=o.nextNode();)n(r.parentNode)||e?.forEach((({original:e,updated:t})=>{r.nodeValue.includes(e)&&(r.nodeValue=r.nodeValue.split(e).join(t))}));["alt","title","aria-label"].forEach((t=>{document.querySelectorAll(`[${t}]`).forEach((o=>{n(o)||e?.forEach((({original:e,updated:n})=>{const r=o.getAttribute(t);r&&r.includes(e)&&o.setAttribute(t,r.split(e).join(n))}))}))}))},{context:a,abilities:l}=window.extAgentData,c={available:()=>l?.canEditPosts&&!a?.adminPage&&a?.postId&&!a?.isBlogPage&&a.usingBlockEditor,id:"edit-post-strings",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n,onRetry:a})=>{const l=(0,o.useCallback)((()=>{const t=(e.replacements||[]).map((({original:e,updated:t})=>({original:t,updated:e})));i(t),a()}),[a,e]),c=(0,o.useCallback)((()=>{const t=(e.replacements||[]).map((({original:e,updated:t})=>({original:t,updated:e})));n(),i(t)}),[e,n]);return(0,o.useEffect)((()=>{i(e.replacements)}),[e.replacements]),(0,s.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,s.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,s.jsx)("div",{className:"p-3",children:(0,s.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,r.__)("The agent has made the changes in the browser. Please review and confirm.","extendify-local")})})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-start gap-2 p-3",children:[(0,s.jsx)("button",{type:"button",className:"flex-1 rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:c,children:(0,r.__)("Cancel","extendify-local")}),(0,s.jsx)("button",{type:"button",className:"flex-1 rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:l,children:(0,r.__)("Try Again","extendify-local")}),(0,s.jsx)("button",{type:"button",className:"flex-1 rounded border border-design-main bg-design-main p-2 text-sm text-white",onClick:()=>{t({data:e})},children:(0,r.__)("Save","extendify-local")})]})]})}}}},1455:e=>{"use strict";e.exports=window.wp.apiFetch},1528:(e,t,n)=>{var o={"./block-selector/block-general.js":6097,"./block-selector/generate-image.js":8446,"./block-selector/upload-image.js":1804,"./content/create-page.js":439,"./content/edit-post-strings-editor.js":1352,"./content/edit-post-strings.js":1429,"./content/update-post-status.js":1755,"./misc/get-list-of-tours.js":5749,"./plugins/recommend-plugin.js":7275,"./settings/edit-wp-setting.js":9586,"./theme/add-post-to-menu.js":2130,"./theme/change-site-vibes.js":5339,"./theme/change-theme-fonts-variation.js":1916,"./theme/change-theme-variation.js":9050};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=s,e.exports=r,r.id=1528},1548:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});const o=e=>{const t=new Map,n=new Set,o=e=>{if(e&&e.length)for(const r of e){if("core/image"!==r.name){o(r.innerBlocks||[]);continue}const e=r.attributes?.url||"";if(!e||!e.startsWith("data:image/svg+xml;")||n.has(r.clientId)){o(r.innerBlocks||[]);continue}const i=r.attributes?.style?.color?.duotone,a=i?.startsWith("var:preset|duotone|")?i.slice(19):null,l=s(r.clientId,e)?.filter(Boolean);a&&l.length&&!t.has(a)&&l.forEach((e=>t.set(e,a))),n.add(r.clientId),o(r.innerBlocks||[])}};return o(e),Object.fromEntries(t)},r=document.querySelector('iframe[name="editor-canvas"]')?.contentDocument||document,s=(e,t)=>{if(!r)return[];const n=r.querySelector(`[data-block="${e}"]`);if(n&&n.classList){const e=[];for(const t of n.classList)t.startsWith("wp-duotone-")&&e.push(t);if(e.length)return e}const o=r.querySelectorAll(`img[src="${t}"]`),s=[];for(const e of o){const t=e.closest("figure[data-block]");if(t&&t.classList)for(const e of t.classList)e.startsWith("wp-duotone-")&&s.push(e)}return s}},1557:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o);const s=window.wp.blockSerializationDefaultParser,i=async({postId:e,postType:t})=>{const n="page"===t?"pages":"posts",o=await r()({path:`/wp/v2/${n}/${e}?context=edit`}),i=(0,s.parse)(o.content.raw);return{post_strings:l([o.title.raw,...u(i)])}},a=e=>new Set(e.filter(Boolean)),l=e=>[...a(e)],c=e=>e.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim(),d=e=>{const t=[],n=e.match(/alt="([^"]*)"/);n&&n[1]&&t.push(n[1].trim());const o=e.match(/title="([^"]*)"/);return o&&o[1]&&t.push(o[1].trim()),t},u=e=>e&&0!==e.length?e.flatMap((e=>[...e.innerContent?e.innerContent.filter(Boolean).flatMap((e=>[c(e),...d(e)])).filter(Boolean):[],...["content","caption","alt","title","value"].map((t=>"string"==typeof e.attrs?.[t]?e.attrs[t].trim():null)).filter(Boolean),...u(e.innerBlocks||[])])):[]},1598:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(1455),r=n.n(o);const s=async({previousContent:e,newContent:t})=>{const{postType:n,postId:o}=window.extAgentData.context,s=await r()({path:`/wp/v2/types/${encodeURIComponent(n)}`}),i=s?.rest_base||`${n}s`,a=(await r()({path:`/wp/v2/${i}/${o}?context=edit`})).content.raw.replace(e,t);await r()({path:`/wp/v2/${i}/${o}`,method:"POST",data:{content:a}})}},1609:e=>{"use strict";e.exports=window.React},1755:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var o=n(6087),r=n(7723),s=n(790);const{context:i,abilities:a}=window.extAgentData,l={available:()=>a?.canEditPosts&&!i?.adminPage&&i?.postId,id:"update-post-status",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const i=(0,o.useCallback)((()=>{n()}),[n]);return(0,s.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,s.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,s.jsx)("div",{className:"p-3",children:(0,s.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,r.sprintf)(
// translators: %1$s is the post type,  %2$s the current page or post status, and %3$s is the updated page or post status.
// translators: %1$s is the post type,  %2$s the current page or post status, and %3$s is the updated page or post status.
(0,r.__)('We are going to change the status of the %1$s from "%2$s" to "%3$s". Please confirm.',"extendify-local"),e.postType,e.postStatus,e.updatedStatus)})})}),(0,s.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,s.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:i,children:(0,r.__)("Cancel","extendify-local")}),(0,s.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",onClick:()=>{window&&window.extAgentData&&window.extAgentData.context&&(window.extAgentData.context.postStatus=e.updatedStatus),t({data:e})},children:(0,r.__)("Confirm","extendify-local")})]})]})}}}},1804:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var o=n(9363),r=n(6087),s=n(7723),i=n(6480),a=n(286),l=n(790);const c=(0,s.__)("Open Media Library","extendify-local"),d=({children:e})=>(0,l.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),u=({children:e})=>(0,l.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,l.jsx)("div",{className:"p-3",children:e})}),{context:p,abilities:m}=window.extAgentData,g={available:()=>m?.canEditPosts&&m?.canUploadMedia&&!p?.adminPage&&p?.postId&&!p?.isBlogPage&&p?.isBlockTheme&&document.querySelector(".wp-site-blocks"),id:"block-upload-image",requires:["block"],whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>((0,r.useEffect)((()=>{(0,o.registerCoreBlocks)()}),[]),(0,r.useEffect)((()=>{const e=document.createElement("style");return e.textContent=".media-modal {\n\t\t\tz-index: 999999 !important;\n\t\t}",document.head.appendChild(e),()=>e.remove()}),[]),(0,l.jsxs)(d,{children:[(0,l.jsx)(u,{children:(0,l.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,s.sprintf)((0,s.__)('The agent has requested the media library. Press "%s" to upload or select an image.',"extendify-local"),c)})}),(0,l.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,l.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:n,children:(0,s.__)("Cancel","extendify-local")}),(0,l.jsx)(i.MediaUpload,{title:(0,s.__)("Select or Upload Image","extendify-local"),onSelect:async n=>{await t({data:{previousContent:e.previousContent,newContent:(0,a.L)(e,n)},shouldRefreshPage:!0})},allowedTypes:["image"],modalClass:"image__media-modal",render:({open:e})=>(0,l.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",onClick:e,children:c})})]})]}))}}},1916:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var o=n(7723),r=n(3372),s=n(6427),i=n(6087),a=n(4997),l=n(7143),c=n(1548),d=n(7584);const u="global-styles-inline-css",p=window.location.pathname,m=new URLSearchParams(window.location.search),g=p.includes("/wp-admin/post.php")&&"edit"===m.get("action");var f=n(4225),h=n(2341),x=n(8459),y=n(790);const w=e=>e?.typography?.fontFamily&&e?.elements?.heading?.typography?.fontFamily?{normal:e.typography.fontFamily,heading:e.elements.heading.typography.fontFamily||e.typography.fontFamily}:e?.typography?.fontFamily?{normal:e.typography.fontFamily,heading:e.typography.fontFamily}:void 0,{context:b,abilities:v}=window.extAgentData,k={available:()=>v?.canEditThemes&&b?.hasThemeVariations,needsRedirect:()=>!Number(b?.postId||0),redirectComponent:()=>(0,r.r)((0,o.__)("Hey there! It looks like you are trying to change your theme fonts, but you are not on a page where we can do that.","extendify-local")),id:"change-theme-fonts-variation",whenFinished:{component:({onConfirm:e,onCancel:t})=>{const[n,r]=(0,i.useState)(""),[p,m]=(0,i.useState)(null),[b,v]=(0,i.useState)(null),{undoChange:k}=(({css:e,duotoneTheme:t})=>{const n=(0,i.useRef)(null),o=(0,i.useRef)(null),[r,s]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!e||g)return;const t=document.getElementById(u);t&&(n.current||(n.current=t.innerHTML),t.innerHTML=e)}),[e]),(0,i.useEffect)((()=>{if(!e||!r||!g)return;const t=r.getElementById(u),n=document.querySelector('iframe[name="editor-canvas"]');t.innerHTML=e.replaceAll(":root",n?":root":".editor-styles-wrapper"),n||(t.innerHTML=t.innerHTML.replace("body{",".editor-styles-wrapper{").replace(/(h[1-6](?:\s*,\s*h[1-6])*)\s*\{/g,".editor-styles-wrapper $1{"))}),[e,r]),(0,i.useEffect)((()=>{if(r)return;const e=setTimeout((()=>{if(r)return;const e=document.querySelector('iframe[name="editor-canvas"]'),t=e?.contentDocument||document;if(!t||!t.body)return;const n=t.createElement("style");n.id=u,t.body.appendChild(n),s(t)}),300);return()=>clearTimeout(e)}),[r]);const p=(0,l.useSelect)((e=>{var t;let n=null!==(t=e("core/block-editor")?.getBlocks?.())&&void 0!==t?t:[];if(n.find((e=>"core/template-part"===e.name))){const{getEditedPostContent:t}=e("core/editor");n=(0,a.parse)(t(),{})}return(0,c.w)(n)}),[]);return(0,i.useEffect)((()=>{t&&(o.current&&(o.current(),o.current=null),o.current=(0,d.T)({duotoneTheme:t,dynamicDuotone:p}))}),[t,p]),{undoChange:()=>{o.current&&(o.current(),o.current=null);const e=document.getElementById(u);if(e&&n.current&&(e.innerHTML=n.current),!g)return;const t=document.querySelector('iframe[name="editor-canvas"]'),r=t?.contentDocument||document;r?.getElementById(u)?.remove()}}})({css:n,duotoneTheme:b}),{variations:j,isLoading:_}=(()=>{const{data:e,error:t,isLoading:n}=(0,f.A)({key:"theme-fonts-variations",themeSlug:window.extAgentData.context.themeSlug},h.default);return{variations:e?.variations,error:t,isLoading:n}})(),T=!j||0===j.length,L=(0,i.useMemo)((()=>j?j.sort((()=>Math.random()-.5)):[]),[j]),{addMessage:S,messages:C}=(0,x.L)();return(0,i.useEffect)((()=>{if(_||!T)return;const e=setTimeout((()=>t()),100),n=(0,o.__)("We were unable to find any variations for your theme","extendify-local"),r=C.at(-1)?.details?.content;
// translators: A chat message shown to the user
return n===r||S("message",{role:"assistant",content:n,error:!0}),()=>clearTimeout(e)}),[S,t,T,C,_]),_?(0,y.jsx)("div",{className:"min-h-24 p-2 text-center text-sm",children:(0,o.__)("Loading font variations...","extendify-local")}):T?null:(0,y.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,y.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,y.jsx)("div",{className:"grid grid-cols-2 gap-2 p-3",children:L?.slice(0,10)?.map((({title:e,css:t,styles:n,settings:o})=>(0,y.jsx)(s.Tooltip,{text:e,placement:"top",children:(0,y.jsx)("button",{"aria-label":e,type:"button",style:{fontFamily:w(n)?.normal},className:"relative flex w-full items-center justify-center overflow-hidden rounded-lg border border-gray-300 bg-none p-2 text-center text-sm "+(p===e?"ring-wp ring-design-main":""),onClick:()=>{m(e),r(t),v(o?.color?.duotone?.theme)},children:(0,y.jsxs)("div",{className:"max-w-fit content-stretch items-center justify-center rounded-lg text-2xl rtl:space-x-reverse",children:[(0,y.jsx)("span",{style:{fontFamily:w(n)?.heading},children:"A"}),(0,y.jsx)("span",{style:{fontFamily:w(n)?.normal},children:"a"})]})})},e)))})}),(0,y.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,y.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:()=>{k(),t()},children:(0,o.__)("Cancel","extendify-local")}),(0,y.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",disabled:!p,onClick:()=>{p&&e({data:{variation:j.find((e=>e.title===p))},shouldRefreshPage:!0})},children:(0,o.__)("Save","extendify-local")})]})]})}}}},2130:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var o=n(1455),r=n.n(o),s=n(6087),i=n(7723),a=n(790);const{abilities:l,context:c}=window.extAgentData,d={available:()=>l?.canEditPost&&c?.usingBlockEditor&&!c?.adminPage&&["post","page"].includes(c.postType)&&window.document.querySelectorAll("nav[data-extendify-menu-id]").length>0&&c?.postId,id:"add-post-to-menu",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const[o,l]=(0,s.useState)(""),{replacements:c,id:d}=null!=e?e:{},u=(0,s.useCallback)((()=>{n();const e=document.querySelector(`[data-extendify-menu-id="${d}"]`);e&&(e.innerHTML=o)}),[n,d,o]);return(0,s.useEffect)((()=>{const e=document.querySelector(`[data-extendify-menu-id="${d}"]`);if(!e)return;l(e.innerHTML);const t=new AbortController;return(async()=>{try{const n=await r()({method:"POST",path:"/extendify/v1/agent/render-navigation",data:{content:c?.[0]?.updated},signal:t.signal});e&&n&&(e.innerHTML=n)}catch(e){if("AbortError"===e.name)throw e;console.error("Failed to render navigation:",e)}})(),()=>t.abort()}),[c,d,l]),(0,a.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,a.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,a.jsx)("div",{className:"p-3",children:(0,a.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,i.__)("The agent has made the changes in the browser. Please review and confirm.","extendify-local")})})}),(0,a.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,a.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:u,children:(0,i.__)("Cancel","extendify-local")}),(0,a.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",onClick:()=>{t({data:e})},children:(0,i.__)("Save","extendify-local")})]})]})}}}},2279:e=>{"use strict";e.exports=window.wp.plugins},2341:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o),s=n(7723);const i=async()=>{const e=window.location.pathname,t=new URLSearchParams(window.location.search),n=e.includes("/wp-admin/post.php")&&"edit"===t.get("action"),o=await r()({method:"GET",path:"/extendify/v1/agent/theme-fonts-variations"+(n?"":"?includeLayoutStyles")});if(!o||!Array.isArray(o))throw new Error((0,s.__)("Failed to fetch theme font variations.","extendify-local"));return{variations:o.reduce(((e,t)=>(e.some((e=>e.title===t.title))||e.push(t),e)),[])}}},2619:e=>{"use strict";e.exports=window.wp.hooks},2628:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(1455),r=n.n(o);const s=async({previousContent:e,newContent:t})=>{const{postType:n,postId:o}=window.extAgentData.context,s=await r()({path:`/wp/v2/types/${encodeURIComponent(n)}`}),i=s?.rest_base||`${n}s`,a=(await r()({path:`/wp/v2/${i}/${o}?context=edit`})).content.raw.replace(e,t);await r()({path:`/wp/v2/${i}/${o}`,method:"POST",data:{content:a}})}},2853:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o),s=n(3410);const i=async()=>{var e;const{block:t}=s.Y.getState(),{postId:n}=window.extAgentData.context,o=await r()({path:`/extendify/v1/agent/get-block-code?postId=${n}&blockId=${t.id}`});return{previousContent:null!==(e=o?.block)&&void 0!==e?e:""}}},3364:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(8969);const r=async({query:e})=>{const t={documentation:"No relevant documentation found"},n=new URLSearchParams({search:e}),r=await fetch(`${o.XQ}/api/posts?${n.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"}}).catch((()=>({ok:!1})));if(!r.ok)return t;const s=await r.json();if(!s?.[0]?.slug)return t;const i=await fetch(`${o.XQ}/api/posts/${s?.[0]?.slug}`,{method:"GET",headers:{"Content-Type":"application/json"}}).catch((()=>({ok:!1})));if(!i.ok)return t;const a=await i.json();return a?.content?{documentation:a.content}:t}},3372:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var o=n(7723),r=n(790);const s=e=>(0,r.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,r.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white p-3",children:(0,r.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:e})}),(0,r.jsxs)("div",{className:"m-0 p-3 text-sm text-gray-900",children:[(0,o.__)("Suggestion:","extendify-local")," ",(0,r.jsx)("a",{href:`${window.extSharedData.homeUrl}`,children:(0,o.__)("Home page","extendify-local")})]})]})},3410:(e,t,n)=>{"use strict";n.d(t,{Y:()=>c});var o=n(1455),r=n.n(o),s=n(365),i=n(1621),a=n(7134),l=n(9333);const c=(0,i.vt)()((0,a.Zr)((0,a.lt)(((e,t)=>({workflow:null,block:null,setBlock:t=>e({block:t,blockCode:null}),blockCode:null,setBlockCode:t=>e({blockCode:t}),domToolEnabled:!1,setDomToolEnabled:n=>{t().block||e({domToolEnabled:n})},getWorkflow:()=>{const e=t().workflow,n=e?.templateId||e?.id,o=l.L.find((({id:e})=>e===n));return o?.id?{...(0,s.$N)(e,o||{}),id:e?.id}:e||null},getAvailableWorkflows:()=>{let e=l.L.filter((({available:e})=>e()));const n=e.filter((({requires:e})=>e?.includes("block")));return t().block?n:e.filter((({id:e})=>!n.some((t=>t.id===e))))},getWorkflowsByFeature:({requires:e}={})=>e?l.L.filter((({available:t,requires:n})=>t()&&(!e||n?.some((t=>e.includes(t)))))):l.L.filter((({available:e})=>e())),workflowData:null,workflowHistory:window.extAgentData?.workflowHistory||[],whenFinishedToolProps:null,getWhenFinishedToolProps:()=>{const{whenFinishedToolProps:n}=t();return n?{...n,onConfirm:(e={})=>{window.dispatchEvent(new CustomEvent("extendify-agent:workflow-confirm",{detail:{...e,whenFinishedToolProps:n}}))},onCancel:()=>{window.dispatchEvent(new CustomEvent("extendify-agent:workflow-cancel",{detail:{whenFinishedToolProps:n}}))},onRetry:()=>{e({whenFinishedToolProps:null}),window.dispatchEvent(new CustomEvent("extendify-agent:workflow-retry",{detail:{whenFinishedToolProps:n}}))}}:null},addWorkflowResult:n=>{"completed"===n.status&&e((e=>{const t=Math.max(0,e.workflowHistory.length-10);return{workflowHistory:[n,...e.workflowHistory.toSpliced(0,t)]}}));const o=t().workflow?.id;o&&r()({method:"POST",keepalive:!0,path:"/extendify/v1/agent/workflows",data:{workflowId:o,...n}})},mergeWorkflowData:t=>{e((e=>e.workflowData?{workflowData:{...e.workflowData,...t}}:{workflowData:t}))},setWorkflow:n=>e({workflow:n?{...n,startingPage:window.location.href}:null,workflowData:t().blockCode?{previousContent:t().blockCode}:null,whenFinishedToolProps:null}),setWhenFinishedToolProps:t=>e({whenFinishedToolProps:t})})),{name:"Extendify Agent Workflows"}),{name:`extendify-agent-workflows-${window.extSharedData.siteId}`,partialize:e=>{const{block:t,workflowHistory:n,...o}=e;return{...o}}}))},3508:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var o=n(1455),r=n.n(o),s=n(7723),i=n(9586);const a=async({settingName:e})=>{if(!i.allowedSettings.includes(e))throw new Error("Setting not allowed");return{oldSettingValue:(await r()({path:"/wp/v2/settings?context=edit"}))[e]||
// translators: No value found message for when a WP setting has no value.
// translators: No value found message for when a WP setting has no value.
(0,s.__)("No value found","extendify-local")}}},3571:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o);const s={page:"pages",post:"posts"},i=async({postId:e,postType:t})=>{const n=s[t]||t;return{post_status:(await r()({path:`/wp/v2/${n}/${e}?context=view`})).status}}},3656:e=>{"use strict";e.exports=window.wp.editor},3712:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o);const s={page:"pages",post:"posts"},i=async({postId:e,postType:t})=>{var n;const o=Array.from(null!==(n=window.document?.querySelectorAll("nav[data-extendify-menu-id]"))&&void 0!==n?n:[]).map((e=>e.dataset.extendifyMenuId)).filter(Boolean),i=o.length>0?await r()({method:"POST",path:"/extendify/v1/agent/site-navigation",data:{only:o.join(",")}}).catch((()=>[])):[];if(window.extAgentData?.context&&"draft"!==window.extAgentData?.context?.postStatus){let n=window.wp?.data?.select("core")?.getEntityRecord("postType",t,e)?.link;if(!n&&s[t]){const o=await r()({path:`/wp/v2/${s[t]}/${e}`}).catch(console.error);n=o?.link}n&&window.extAgentData?.context&&(window.extAgentData.context.postUrl=n)}return{navigations:i}}},3832:e=>{"use strict";e.exports=window.wp.url},4664:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o);const s=window.extSharedData.globalStylesPostID,i=async({variation:e})=>{const t=await r()({path:"/extendify/v1/agent/block-style-variations"}),n=Object.keys(t).reduce(((n,o)=>(n[o]={...e.styles?.blocks?.[o],variations:t[o]},n)),{});return r()({method:"POST",path:`/wp/v2/global-styles/${s}`,data:{id:s,settings:e.settings,styles:{...e.styles,blocks:{...e.styles?.blocks,...n}}}})}},4679:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=()=>null},4997:e=>{"use strict";e.exports=window.wp.blocks},5092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(4997),r=n(7143),s=n(5713);const i=async({replacements:e})=>{const t=(0,s.E)();"template-locked"===t&&await(0,s.u)("post-only");const n=(0,r.select)("core/editor").getEditedPostAttribute("title"),o=a(n,e);(0,r.dispatch)("core/editor").editPost({title:o}),(0,r.select)("core/block-editor").getBlocks().flatMap((t=>l(t,e))).forEach((({clientId:e,block:t})=>{(0,r.dispatch)("core/block-editor").replaceBlock(e,t)})),"template-locked"===t&&(0,s.u)("template-locked")},a=(e,t)=>t.filter((e=>""!==e.original)).reduce(((e,{original:t,updated:n})=>e.split(t).join(n)),e),l=(e,t)=>{const n=[],r={...e.attributes};let s=!1;if(["content","caption","alt","title","value","text"].forEach((e=>{const n=r[e],o=n&&"function"==typeof n.toString?n.toString():n;if("string"==typeof o){const n=a(o,t);n!==o&&(r[e]=n,s=!0)}})),s){const t=(0,o.createBlock)(e.name,r,e.innerBlocks);n.push({clientId:e.clientId,block:t})}return e.innerBlocks.forEach((e=>{n.push(...l(e,t))})),n}},5259:e=>{"use strict";e.exports=window.wp.blockDirectory},5261:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(7143),r=n(5713);const s=async()=>{const e=(0,r.E)();"template-locked"===e&&await(0,r.u)("post-only");const t=(0,o.select)("core/block-editor").getBlocks(),n=(0,o.select)("core/editor").getEditedPostAttribute("title"),s=l([n,...i(t)]);return"template-locked"===e&&(0,r.u)("template-locked"),{post_strings:s}},i=e=>e.flatMap((e=>[...["content","caption","alt","title","value"].map((t=>"string"==typeof e?.attributes?.[t]?e.attributes[t].trim():null)).map((()=>"string"==typeof e?.attributes?.text?.text?e.attributes.text.text.trim():null)).filter(Boolean),...e.originalContent?[c(e.originalContent),...d(e.originalContent)].filter(Boolean):[],...i(e.innerBlocks||[])])),a=e=>new Set(e.filter(Boolean)),l=e=>[...a(e)],c=e=>e.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim(),d=e=>{const t=[],n=e.match(/alt="([^"]*)"/);n&&n[1]&&t.push(n[1].trim());const o=e.match(/title="([^"]*)"/);return o&&o[1]&&t.push(o[1].trim()),t}},5295:(e,t,n)=>{"use strict";n.d(t,{n:()=>p});var o,r=n(1455),s=n.n(r),i=n(6528),a=n(1621),l=n(7134);const c={currentTour:null,currentStep:void 0,preparingStep:void 0,progress:[],...null!==(o=(0,i.N)(window.extAgentData.userData.tourData)?.state)&&void 0!==o?o:{}},d="/extendify/v1/help-center/tour-data",u={getItem:async()=>await s()({path:d}),setItem:async(e,t)=>await s()({path:d,method:"POST",data:{state:t}})},p=(0,a.vt)((0,l.Zr)((0,l.lt)(((e,t)=>({...c,startTour:async n=>{const{trackTourProgress:o,updateProgress:r,getStepData:s,onTourPage:i}=t();i(n?.settings?.startFrom)&&(window.dispatchEvent(new CustomEvent("extendify-agent:close")),await(n?.onStart?.(n)),n.steps=n.steps?.filter((e=>e?.showOnlyIf?.()||void 0===e?.showOnlyIf?.()))||[],await(s(0,n)?.events?.beforeAttach?.(n))),e({currentTour:n,currentStep:0,preparingStep:void 0});const a=o(n.id);r(a.id,{openedCount:Number(a.openedCount)+1,lastAction:"started"})},onTourPage:(e=null)=>{const n=window.location.href;if(e?.includes(n))return!0;const{currentTour:o}=t();return o?.settings?.startFrom?.includes(n)},completeCurrentTour:async()=>{const{currentTour:n,wasCompleted:o,findTourProgress:r,updateProgress:s}=t(),i=r(n?.id);i?.id&&(o(i.id)||s(i.id,{completedAt:(new Date).toISOString(),lastAction:"completed"}),s(i.id,{completedCount:Number(i.completedCount)+1,lastAction:"completed"}),await(n?.onDetach?.()),await(n?.onFinish?.()),e({currentTour:null,currentStep:void 0}),window.dispatchEvent(new CustomEvent("extendify-agent:open")))},closeCurrentTour:async n=>{const{currentTour:o,findTourProgress:r,updateProgress:s}=t(),i=r(o?.id);if(!i?.id)return;const a={};return["redirected"].includes(n)?s(i?.id,{lastAction:n}):["closed-by-caught-error"].includes(n)?s(i?.id,{lastAction:n,errored:!0}):("closed-manually"===n&&(a.closedManuallyCount=Number(i.closedManuallyCount)+1),await(o?.onDetach?.()),await(o?.onFinish?.()),s(i?.id,{lastAction:n,...a}),e({currentTour:null,currentStep:void 0,preparingStep:void 0}),void window.dispatchEvent(new CustomEvent("extendify-agent:open")))},findTourProgress:e=>t().progress.find((t=>t.id===e)),wasCompleted:e=>t().findTourProgress(e)?.completedAt,wasOpened:e=>{var n;return Number(null!==(n=t().findTourProgress(e)?.openedCount)&&void 0!==n?n:0)>0},isSeen:e=>t().findTourProgress(e)?.firstSeenAt,trackTourProgress:n=>{const{findTourProgress:o}=t();return o(n)||e((e=>({progress:[...e.progress,{id:n,firstSeenAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),completedAt:null,lastAction:"init",currentStep:0,openedCount:0,closedManuallyCount:0,completedCount:0,errored:!1}]}))),o(n)},updateProgress:(t,n)=>{var o;const r=null!==(o=n?.lastAction)&&void 0!==o?o:"unknown";e((e=>({progress:e.progress.map((e=>e.id===t?{...e,...n,lastAction:r,updatedAt:(new Date).toISOString()}:e))})))},getStepData:(e,n=t().currentTour)=>{var o;return null!==(o=n?.steps?.[e])&&void 0!==o?o:{}},hasNextStep:()=>!!t().currentTour&&Number(t().currentStep)<t().currentTour.steps.length-1,nextStep:async()=>{const{currentTour:e,goToStep:n,updateProgress:o,currentStep:r}=t(),s=Number(r)+1;await n(s),o(e.id,{currentStep:s,lastAction:"next"})},hasPreviousStep:()=>!!t().currentTour&&Number(t().currentStep)>0,prevStep:async()=>{const{currentTour:e,goToStep:n,updateProgress:o,currentStep:r}=t(),s=r-1;await n(s),o(e.id,{currentStep:s,lastAction:"prev"})},goToStep:async n=>{const{currentTour:o,updateProgress:r,closeCurrentTour:s,getStepData:i}=t(),a=o;if(n<0||n>a.steps.length-1)return void s("closed-by-caught-error");r(a.id,{currentStep:n,lastAction:`go-to-step-${n}`});const l=i(n)?.events;l?.beforeAttach&&(e((()=>({preparingStep:n}))),await Promise.allSettled([l.beforeAttach?.(a),new Promise((e=>setTimeout(e,300)))]),e((()=>({preparingStep:void 0})))),e((()=>({currentStep:n})))}})),{name:"Extendify Tour Progress"}),{name:"extendify-help-center-tour-progress",storage:(0,l.KU)((()=>u)),skipHydration:!0,partialize:e=>{const{currentTour:t,currentStep:n,preparingStep:o,...r}=e;return r}}))},5339:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var o=n(7723),r=n(3372),s=n(6427),i=n(6087),a=n(6748);const l="block-style-variation-styles-inline-css",c='iframe[name="editor-canvas"]',d=".editor-styles-wrapper",u=()=>{const e=document.querySelector(c);return e?.contentDocument||document};var p=n(4225),m=n(9665),g=n(8459),f=n(790);const{context:h,abilities:x}=window.extAgentData,y={available:()=>x?.canEditThemes&&h?.hasThemeVariations&&h?.isUsingVibes,needsRedirect:()=>!Number(h?.postId||0),redirectComponent:()=>(0,r.r)(
// translators: "site style" refers to the structural aesthetic style for the site.
// translators: "site style" refers to the structural aesthetic style for the site.
(0,o.__)("Hey there! It looks like you are trying to change your site style, but you are not on a page where we can do that.","extendify-local")),id:"change-site-vibes",whenFinished:{component:({onConfirm:e,onCancel:t})=>{const{data:n,isLoading:r}=(()=>{const{data:e,error:t,isLoading:n}=(0,p.A)({key:"site-vibes-variations",themeSlug:window.extAgentData.context.themeSlug},m.default);return{data:e,error:t,isLoading:n}})(),{vibes:h,currentVibe:x,css:y}=n||{},[w,b]=(0,i.useState)(null),v=w?y[w]:"",{undoChange:k}=(({css:e,slug:t})=>{const n=(0,i.useRef)(null),[o,r]=(0,i.useState)(null),s=(0,a.rQ)();return(0,i.useEffect)((()=>{if(!e||s||!t)return;const o=document.getElementById(l);o&&(n.current||(n.current=o.innerHTML),o.innerHTML=((e,t)=>e.replaceAll(t,"natural-1"))(e,t))}),[e,t,s]),(0,i.useEffect)((()=>{if(!e||!o||!s)return;const n=o.getElementById(l),r=document.querySelector(c);let i=e.replaceAll(":root",r?":root":d).replaceAll(t,"natural-1").replace(/:where\(([^)]+)\)/g,":where($1):not(.ext-vibe-container, .ext-vibe-container *)");r||(i=i.replace("body{",`${d}{`).replace(/(h[1-6](?:\s*,\s*h[1-6])*)\s*\{/g,`${d} $1{`)),n.innerHTML=i}),[e,t,o,s]),(0,i.useEffect)((()=>{if(o)return;const e=setTimeout((()=>{if(o)return;const e=u();if(!e||!e.body)return;const t=e.createElement("style");t.id=l,e.body.appendChild(t),r(e)}),300);return()=>clearTimeout(e)}),[o]),{undoChange:()=>{const e=document.getElementById(l);if(e&&n.current&&(e.innerHTML=n.current),!s)return;const t=u();t?.getElementById(l)?.remove()}}})({css:v,slug:w}),j=!h||0===h.length,_=(0,i.useMemo)((()=>h?[...h].sort((()=>Math.random()-.5)):[]),[h]),{addMessage:T,messages:L}=(0,g.L)();return(0,i.useEffect)((()=>{x&&b(x)}),[x]),(0,i.useEffect)((()=>{if(r||!j)return;const e=setTimeout((()=>t()),100),n=(0,o.__)("We were unable to find any site style for your theme.","extendify-local"),s=L.at(-1)?.details?.content;
// translators: "site style" refers to the structural aesthetic style for the site.
return n===s||T("message",{role:"assistant",content:n,error:!0}),()=>clearTimeout(e)}),[T,t,j,L,r]),r?(0,f.jsx)("div",{className:"min-h-24 p-2 text-center text-sm",children:
// translators: "site style" refers to the structural aesthetic style for the site.
// translators: "site style" refers to the structural aesthetic style for the site.
(0,o.__)("Loading site style options...","extendify-local")}):j?null:(0,f.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,f.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,f.jsx)("div",{className:"grid gap-2 p-3",style:{gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))"},children:_?.slice(0,10).map((({name:e,slug:t})=>(0,f.jsxs)(s.Tooltip,{text:e,placement:"top",children:[(0,f.jsx)("style",{children:y[t]?.replaceAll(":root",".ext-vibe-container")?.replaceAll("is-style-ext-preset--","preview-is-style-ext-preset--")}),(0,f.jsx)("button",{"aria-label":e,type:"button",className:"ext-vibe-container relative z-10 flex w-full appearance-none items-center justify-center overflow-hidden rounded-lg border border-gray-300 bg-none p-0 text-sm text-inherit shadow-vibe drop-shadow-md "+(w===t?"z-0 ring-wp ring-design-main":""),onClick:()=>b(t),children:(0,f.jsx)("div",{className:`wp-block-group preview-is-style-ext-preset--group--${t}--section has-background-background-color has-background p-3`,children:(0,f.jsxs)("div",{style:{color:"var(--wp--preset--color--foreground, inherit)"},className:`wp-block-group has-tertiary-background-color has-background max-w-fit content-stretch items-center justify-center bg-design-tertiary p-3 text-2xl rtl:space-x-reverse preview-is-style-ext-preset--group--${t}--item-card-1--align-center`,children:[(0,f.jsx)("h1",{className:"mb-1 text-base font-semibold",children:
// translators: This is a placeholder title used in a visual preview of a site structural aesthetic styles. It demonstrates how the typography looks.
// translators: This is a placeholder title used in a visual preview of a site structural aesthetic styles. It demonstrates how the typography looks.
(0,o.__)("Short title","extendify-local")}),(0,f.jsx)("p",{className:"mt-1 text-xs font-light",children:
// translators: This is a placeholder description used in a visual preview of a site structural aesthetic styles. It demonstrates how the typography looks.
// translators: This is a placeholder description used in a visual preview of a site structural aesthetic styles. It demonstrates how the typography looks.
(0,o.__)("Short description of the content.","extendify-local")})]})})})]},t)))})}),(0,f.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,f.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:()=>{k(),t()},children:(0,o.__)("Cancel","extendify-local")}),(0,f.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",disabled:!w,onClick:()=>{w&&e({data:{selectedVibe:w},shouldRefreshPage:!0})},children:(0,o.__)("Save","extendify-local")})]})]})}}}},5362:(e,t,n)=>{"use strict";var o=n(8490),r=n.n(o),s=n(7828),i=n(365),a=n(6087),l=n(7723),c=n(1455),d=n.n(c),u=n(6427),p=n(7677),m=n(4707),g=n(9179);const f=e=>{const[t,n]=(0,a.useState)(null);return(0,a.useEffect)((()=>{let t=document.getElementById(e);return t||(t=Object.assign(document.createElement("div"),{className:"extendify-agent"}),t.id=e,document.getElementById("extendify-agent-main").prepend(t)),n(t),()=>t.remove()}),[e]),t};var h=n(3410),x=n(790);const y=["[data-extendify-agent-block-id]","[data-extendify-part-block-id]",".wp-block-navigation"].join(", "),w=["wp-block-video","wp-block-spacer","wp-block-post-*"],b="data-extendify-agent-block-selected",v="extendify-agent-highlighter-mode",k=({busy:e=!1})=>{const[t,n]=(0,a.useState)(null),o=f("extendify-agent-dom-mount"),r=(0,a.useRef)(null),s=(0,a.useRef)(null),{getWorkflowsByFeature:i,block:c,setBlock:k,setBlockCode:j}=(0,h.Y)(),_=i({requires:["block"]})?.length>0,T=(0,a.useCallback)((()=>{k(null),n(null),s.current=null,document.querySelector(v)?.classList.remove(v),document.querySelector(`[${b}]`)?.removeAttribute(b)}),[k,n]);if((0,a.useEffect)((()=>{if(!c?.id)return;const e=new AbortController,t=window.extAgentData?.context?.postId;if(!t)return;const n=new URLSearchParams({postId:String(t),blockId:String(c.id)}).toString(),o={current:!0};return(async()=>{const t=await d()({path:`/extendify/v1/agent/get-block-code?${n}`,signal:e.signal}).catch((()=>({})));t.block&&o.current&&!e.signal.aborted&&j(t.block)})(),()=>{e.abort(),o.current=!1}}),[j,c]),(0,a.useEffect)((()=>{const e=()=>{n(null),s.current=null};return window.addEventListener("extendify-agent:remove-block-highlight",e),()=>window.removeEventListener("extendify-agent:remove-block-highlight",e)}),[]),(0,a.useEffect)((()=>{if(e||c)return;if(!o||!_)return n(null);const t=e=>{r.current||(r.current=requestAnimationFrame((()=>{r.current=null;const t=e.target;if(!t)return n(null);const o=t.closest(y);if(!o)return n(null);const i=w.map((e=>e.replace("*",".*"))).join("|"),a=new RegExp(`^(${i})$`);if(Array.from(o.classList).some((e=>a.test(e))))return n(null);const l=Array.from(o.querySelectorAll(y)).filter((e=>!w.some((t=>e.classList.contains(t))))).length;if(l>50)return n(null);s.current=o;const c=o.getBoundingClientRect();if(c.width<=0||c.height<=0)return n(null);const{top:d,left:u,width:p,height:m}=c;n({top:d,left:u,width:p,height:m})})))};return window.addEventListener("mousemove",t,{passive:!0}),()=>{window.removeEventListener("mousemove",t),r.current&&cancelAnimationFrame(r.current)}}),[e,o,_,c]),(0,a.useEffect)((()=>{const e=()=>{if(!s.current)return;const{top:e,left:t,width:o,height:r}=s.current.getBoundingClientRect();n({top:e,left:t,width:o,height:r})};return window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[s]),(0,a.useEffect)((()=>{if(!_||e)return;const n=n=>{if(!t||e)return;if(n.target.closest("#extendify-agent-chat"))return;const o=document.elementsFromPoint(n.clientX,n.clientY)||[];if(!o[0])return;n.preventDefault(),n.stopPropagation();const r=o[0].closest(y);if(!r&&!c)return;const s=r?.hasAttribute(b);if(c&&!s)return T();if(c&&s)return;r.setAttribute(b,!0),document.querySelector("#extendify-agent-chat-textarea")?.focus();const i=r.closest("[data-extendify-part]"),a={id:r.getAttribute("data-extendify-agent-block-id"),target:"data-extendify-agent-block-id",hasNav:Boolean(r.querySelector(".wp-block-navigation"))||r.classList.contains("wp-block-navigation"),hasSiteTitle:r.classList.contains("wp-block-site-title")||Boolean(r.querySelector(".wp-block-site-title")),hasSiteLogo:r.classList.contains("wp-block-site-logo")||Boolean(r.querySelector(".wp-block-site-logo")),hasLinks:Boolean(r.querySelector("a"))||"A"===r.tagName,hasImages:Boolean(r.querySelector(".wp-block-image"))||r.classList.contains("wp-block-image")||Boolean(r.querySelector("img")),hasText:/\S/.test((r.textContent||"").replace(/\u200B/g,""))};i&&(a.id=i.getAttribute("data-extendify-part-block-id"),a.target="data-extendify-part-block-id",a.template=i.getAttribute("data-extendify-part")),k(a)};return window.addEventListener("click",n,{capture:!0}),()=>window.removeEventListener("click",n,{capture:!0})}),[_,k,t,T,c,e]),(0,a.useEffect)((()=>{if(!_)return;const e=document.querySelector(".wp-site-blocks");return e?(e.classList.add("extendify-agent-highlighter-mode"),()=>e.classList.remove("extendify-agent-highlighter-mode")):void 0}),[_]),(0,a.useEffect)((()=>{if(!e)return;const t=document.querySelector(".wp-site-blocks");return t?(t.classList.add("extendify-agent-busy"),()=>t.classList.remove("extendify-agent-busy")):void 0}),[e]),!_||!t||!o)return null;const{top:L,left:S,width:C,height:N}=t,E={x:S,y:L,width:C,height:N,opacity:1};return(0,a.createPortal)((0,x.jsxs)(x.Fragment,{children:[c&&!e?(0,x.jsx)(u.Tooltip,{text:(0,l.__)("Remove highlight","extendify-local"),children:(0,x.jsxs)("div",{role:"button",className:"fixed z-higher h-6 w-6 -translate-y-3.5 cursor-pointer select-none items-center justify-center rounded-full text-center font-bold ring-1 ring-black",onClick:()=>k(null),style:{top:L,left:C/2+S-12,backgroundColor:"var(--wp--preset--color--primary, red)",color:"var(--wp--preset--color--background, white)"},children:[(0,x.jsx)(p.A,{className:"pointer-events-none fill-current leading-none",icon:m.A,size:18}),(0,x.jsx)("span",{className:"sr-only",children:(0,l.__)("Remove highlight","extendify-local")})]})}):null,(0,x.jsx)(g.P.div,{initial:!1,"aria-hidden":!0,animate:E,transition:{type:"spring",stiffness:700,damping:40,mass:.25},className:"pointer-events-none fixed z-high-1 mix-blend-hard-light outline-dashed outline-4",style:{top:0,left:0,willChange:"transform,width,height,opacity",outlineColor:"var(--wp--preset--color--primary, red)"}})]}),o)};var j=n(6221),_=n(6748),T=n(8443),L=n(1621),S=n(7134);const C={x:window.innerWidth-410-20,y:window.innerHeight-600,width:410,height:600},N=(0,L.vt)()((0,S.Zr)((0,S.lt)((e=>({...C,setSize:(t,n)=>e({width:t,height:n}),setPosition:(t,n)=>e({x:t,y:n}),resetPosition:()=>e({...C,y:window.innerHeight-600})})),{name:"Extendify Agent Position"}),{name:`extendify-agent-position-${window.extSharedData.siteId}`})),E=(0,L.vt)()((0,S.Zr)((0,S.lt)(((e,t)=>({retryAfter:void 0,open:!0,minimized:!1,seenToolTips:[],showSuggestions:!0,mode:"floating",queuedTour:null,scratch:{},isMobile:window.innerWidth<768,setIsMobile:n=>{t().isMobile!==n&&e({isMobile:n})},queueTourForRedirect:t=>e({queuedTour:t}),clearQueuedTour:()=>e({queuedTour:null}),setOpen:t=>{t||(N.getState().resetPosition(),window.dispatchEvent(new CustomEvent("extendify-agent:cancel-workflow"))),e({open:t})},setMinimized:n=>{t().minimized!==n&&e({minimized:n})},setShowSuggestions:t=>e({showSuggestions:t}),toggleOpen:()=>e((e=>(e.open||N.getState().resetPosition(),{open:!e.open}))),setSeenToolTip:t=>e((e=>e.seenToolTips.includes(t)?e:{seenToolTips:[...e.seenToolTips,t]})),updateRetryAfter:t=>e({retryAfter:t}),isChatAvailable:()=>{const{retryAfter:n}=t();if(!n)return!0;const o=(0,T.isInTheFuture)(new Date(Number(n)));return o||e({retryAfter:void 0}),!o},setScratch:(t,n)=>e((e=>({scratch:{...e.scratch,[t]:n}}))),getScratch:e=>t().scratch[e]||null,deleteScratch:t=>e((e=>{const{[t]:n,...o}=e.scratch;return{scratch:o}}))})),{name:"Extendify Agent Global"}),{name:`extendify-agent-global-${window.extSharedData.siteId}`,partialize:e=>{const{showSuggestions:t,isMobile:n,...o}=e;return{...o}}})),A=({children:e})=>{const[t,n]=(0,a.useState)(null),o=f("extendify-agent-mount"),{open:r,setOpen:s}=E(),i=(0,a.useCallback)((e=>requestAnimationFrame((()=>n(e)))),[]);return(({el:e,open:t,initialPosition:n,onDragEnd:o})=>{const r=(0,a.useRef)({x:0,y:0}),s=(0,a.useRef)(null),i=(0,a.useRef)({x:n.x,y:n.y});(0,a.useLayoutEffect)((()=>{if(!e)return;const t=requestAnimationFrame((()=>{e.style.setProperty("left",`${n.x}px`,"important"),e.style.setProperty("top",`${n.y}px`,"important")}));return()=>cancelAnimationFrame(t)}),[e,n]),(0,a.useLayoutEffect)((()=>{if(!e||!t)return;const n=window.innerWidth-e.offsetWidth,o=window.innerHeight-e.offsetHeight,r=parseFloat(e.style.left)||0,s=parseFloat(e.style.top)||0,i=(0,_.qE)(r,0,n),a=(0,_.qE)(s,0,o);r===i&&s===a||(e.style.setProperty("left",`${i}px`,"important"),e.style.setProperty("top",`${a}px`,"important"))}),[e,t]),(0,a.useLayoutEffect)((()=>{const a=document.getElementById("wpwrap")||document.querySelector(".wp-site-blocks");if(!e||!t||!a)return;const l=e.querySelector("[data-extendify-agent-handle]");if(!(l instanceof HTMLElement))return;e.style.setProperty("left",`${n.x}px`,"important"),e.style.setProperty("top",`${n.y}px`,"important");const c=t=>{t.preventDefault(),t.stopPropagation(),a.style.pointerEvents="none",null===s.current&&(s.current=t.pointerId,l.setPointerCapture(t.pointerId),r.current={x:t.clientX-e.offsetLeft,y:t.clientY-e.offsetTop},document.addEventListener("pointermove",d),document.addEventListener("pointerup",u))},d=t=>{const n=window.innerWidth-l.offsetWidth,o=window.innerHeight-l.offsetHeight,s=(0,_.qE)(t.clientX-r.current.x,0,n),a=(0,_.qE)(t.clientY-r.current.y,0,o);e.style.setProperty("left",`${s}px`,"important"),e.style.setProperty("top",`${a}px`,"important"),i.current={x:s,y:a}},u=e=>{a.style.pointerEvents="auto",s.current===e.pointerId&&(s.current=null,l.releasePointerCapture(e.pointerId),document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),o(i.current.x,i.current.y))},p=()=>u(new PointerEvent("pointerup")),m=e=>(e.preventDefault(),e.stopPropagation(),!1);return l.addEventListener("pointerdown",c),l.addEventListener("contextmenu",m),l.addEventListener("blur",p),()=>{l.removeEventListener("pointerdown",c),l.removeEventListener("blur",p),l.removeEventListener("contextmenu",m),document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),a.style.pointerEvents="auto",null!==s.current&&(l.releasePointerCapture(s.current),s.current=null)}}),[e,t,n.x,n.y,o])})({el:t,open:r,initialPosition:N.getState(),onDragEnd:(e,t)=>{N.getState().setPosition(e,t),window.dispatchEvent(new CustomEvent("extendify-agent:drag-end",{detail:{x:e,y:t}}))}}),(({el:e,open:t,initialSize:n,onResizeEnd:o,minWidth:r=250,minHeight:s=400,maxWidth:i=500,maxHeight:l=window.innerHeight})=>{const c=(0,a.useRef)({x:0,y:0,width:0,height:0}),d=(0,a.useRef)(null);(0,a.useLayoutEffect)((()=>{const a=document.getElementById("wpwrap")||document.querySelector(".wp-site-blocks");if(!e||!t||!a)return;e.style.width=`${n.width}px`,e.style.height=`${n.height}px`;const u=e.querySelector("[data-extendify-agent-resize]");if(!(u instanceof HTMLElement))return;const p=t=>{t.preventDefault(),t.stopPropagation(),a.style.pointerEvents="none",null===d.current&&(d.current=t.pointerId,u.setPointerCapture(t.pointerId),c.current={x:t.clientX,y:t.clientY,width:e.offsetWidth,height:e.offsetHeight},document.addEventListener("pointermove",m),document.addEventListener("pointerup",g))},m=t=>{const n=e.getBoundingClientRect(),o=Math.min(i,window.innerWidth-n.left),a=Math.min(l,window.innerHeight-n.top),d=(0,_.qE)(c.current.width+(t.clientX-c.current.x),r,o),u=(0,_.qE)(c.current.height+(t.clientY-c.current.y),s,a);e.style.width=`${d}px`,e.style.height=`${u}px`},g=t=>{if(a.style.pointerEvents="auto",d.current!==t.pointerId)return;d.current=null,u.releasePointerCapture(t.pointerId),document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g);const n=e.getBoundingClientRect(),p=Math.min(i,window.innerWidth-n.left),f=Math.min(l,window.innerHeight-n.top),h=(0,_.qE)(c.current.width+(t.clientX-c.current.x),r,p),x=(0,_.qE)(c.current.height+(t.clientY-c.current.y),s,f);o(h,x)};return u.addEventListener("pointerdown",p),()=>{u.removeEventListener("pointerdown",p),document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g),a.style.pointerEvents="auto",null!==d.current&&(u.releasePointerCapture(d.current),d.current=null)}}),[e,t,n.width,n.height,o,r,s,i,l])})({el:t,open:r,initialSize:N.getState(),onResizeEnd:(e,t)=>{N.setState({width:e,height:t}),window.dispatchEvent(new CustomEvent("extendify-agent:resize-end",{detail:{width:e,height:t}}))}}),(0,a.useEffect)((()=>{if(!t||!r)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting||s(!1)}));return e.observe(t),()=>e.disconnect()}),[t,r,s]),o&&r?(0,a.createPortal)((0,x.jsx)(j.N,{children:(0,x.jsx)(g.P.div,{id:"extendify-agent-popout-modal",initial:{opacity:0},animate:{opacity:1},exit:{y:0,opacity:0},transition:{duration:.4,delay:.1},className:"fixed bottom-0 right-0 z-higher flex max-h-full max-w-full flex-col rounded-lg border border-solid border-gray-300 bg-white shadow-2xl-flipped rtl:left-0 rtl:right-auto",ref:i,children:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"group flex shrink-0 items-center justify-between overflow-hidden rounded-t-[calc(0.5rem-1px)] bg-banner-main text-banner-text",children:[(0,x.jsxs)("div",{"data-extendify-agent-handle":!0,draggable:!0,className:"flex h-full flex-grow cursor-grab select-none items-center justify-between gap-1 p-0 py-3",children:[(0,x.jsxs)("div",{className:"flex h-5 justify-center gap-2 px-4 rtl:after:-right-0",children:[(0,x.jsx)("div",{className:"flex h-5 max-w-[9rem] overflow-hidden",children:(0,x.jsx)("img",{className:"max-h-full max-w-full object-contain",src:window.extSharedData.partnerLogo,alt:window.extSharedData.partnerName})}),(0,x.jsx)("div",{className:"flex items-center rounded-lg bg-banner-text px-2 font-sans text-xs leading-none text-banner-main",children:(0,l._x)("beta","Feature in beta status","extendify-local")})]}),(0,x.jsx)("div",{className:"opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:(0,x.jsx)(P,{})})]}),(0,x.jsx)(u.Tooltip,{text:(0,l.__)("Close window","extendify-local"),children:(0,x.jsxs)("button",{type:"button",className:"relative z-10 flex h-full items-center rounded-none border-0 bg-banner-main py-3 pe-4 ps-2 text-banner-text outline-none ring-design-main focus:shadow-none focus:outline-none focus-visible:outline-design-main",onClick:()=>{s(!1),window.dispatchEvent(new CustomEvent("extendify-agent:closed-button"))},children:[(0,x.jsx)(p.A,{className:"pointer-events-none fill-current leading-none",icon:m.A,size:18}),(0,x.jsx)("span",{className:"sr-only",children:(0,l.__)("Close window","extendify-local")})]})})]}),e,(0,x.jsx)("div",{"data-extendify-agent-resize":!0,className:"absolute -bottom-2 -right-2 z-high h-6 w-6",children:(0,x.jsx)("div",{className:"h-6 w-6 cursor-se-resize"})})]})},"agent-popout-modal")}),o):null},P=e=>(0,x.jsxs)("div",{style:{userSelect:"none"},className:"relative flex",...e,children:[(0,x.jsx)(p.A,{className:"pointer-events-none text-banner-text",icon:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",className:"pointer-events-none","aria-hidden":"true",focusable:"false",children:(0,x.jsx)("path",{fill:"currentColor",d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})}),size:24}),(0,x.jsx)("span",{className:"sr-only",children:(0,l.__)("Drag to move","extendify-local")})]});var I=n(2485);const R=({children:e})=>{const t=f("extendify-agent-mount"),{minimized:n,setMinimized:o}=E();return(0,a.useEffect)((()=>{if(t&&!n)return document.body.style.overflow="hidden",()=>document.body.style.overflow=""}),[t,n]),t?(0,a.createPortal)((0,x.jsxs)("div",{className:"fixed inset-0 z-max-1 items-center justify-center "+(n?"hidden":"flex"),"aria-hidden":n?"true":"false",children:[(0,x.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-black/70"}),(0,x.jsx)(j.N,{children:(0,x.jsxs)(g.P.div,{id:"extendify-agent-popout-modal",initial:{opacity:0},animate:{opacity:1},exit:{y:0,opacity:0},transition:{duration:.4,delay:.1},className:"fixed bottom-[2vh] z-high flex h-full max-h-[80vh] w-full max-w-[90vw] flex-col rounded-lg border border-solid border-gray-600 bg-white shadow-2xl-flipped rtl:left-0 rtl:right-auto",children:[(0,x.jsxs)("div",{className:"group flex shrink-0 items-center justify-between overflow-hidden rounded-t-[calc(0.5rem-1px)] bg-banner-main text-banner-text",children:[(0,x.jsx)("div",{className:"flex h-full flex-grow items-center justify-between gap-1 p-0 py-3",children:(0,x.jsxs)("div",{className:"flex h-5 justify-center gap-2 px-4 rtl:after:-right-0",children:[(0,x.jsx)("div",{className:"flex h-5 max-w-[9rem] overflow-hidden",children:(0,x.jsx)("img",{className:"max-h-full max-w-full object-contain",src:window.extSharedData.partnerLogo,alt:window.extSharedData.partnerName})}),(0,x.jsx)("div",{className:"flex items-center rounded-lg bg-banner-text px-2 font-sans text-xs leading-none text-banner-main",children:(0,l._x)("beta","Feature in beta status","extendify-local")})]})}),(0,x.jsx)(u.Tooltip,{text:(0,l.__)("Minimize window","extendify-local"),children:(0,x.jsxs)("button",{type:"button",className:"relative z-10 flex h-full items-center rounded-none border-0 bg-banner-main py-3 pe-4 ps-2 text-banner-text outline-none ring-design-main focus:shadow-none focus:outline-none focus-visible:outline-design-main",onClick:()=>o(!0),children:[(0,x.jsx)(p.A,{className:"pointer-events-none fill-current leading-none",icon:I.A,size:24}),(0,x.jsx)("span",{className:"sr-only",children:(0,l.__)("Minimize window","extendify-local")})]})})]}),e]},"agent-popout-modal")})]}),t):null},D=({busy:e,children:t})=>{const{setIsMobile:n,isMobile:o}=E(),{domToolEnabled:r,block:s,setBlock:i,setDomToolEnabled:l}=(0,h.Y)();return(0,a.useEffect)((()=>{o&&s&&i(null)}),[o,n,s,i]),(0,a.useEffect)((()=>{let e;const t=()=>{clearTimeout(e),e=window.setTimeout((()=>{n(window.innerWidth<783)}),10)};return window.addEventListener("resize",t),()=>{clearTimeout(e),window.removeEventListener("resize",t)}}),[n]),(0,a.useEffect)((()=>{const e=e=>{if("Escape"===e.key&&r)return s?i(null):void l(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[r,s,i,l]),o?(0,x.jsx)(R,{children:(0,x.jsx)("div",{id:"extendify-agent-chat",className:"flex min-h-0 flex-1 flex-grow flex-col font-sans",children:t})}):(0,x.jsxs)(A,{children:[(0,x.jsx)("div",{id:"extendify-agent-chat",className:"flex min-h-0 flex-1 flex-grow flex-col font-sans",children:t}),r&&(0,x.jsx)(k,{busy:e})]})};var M=n(8969),$=n(8459),B=n(9333);const q={...Object.fromEntries(Object.entries(window.extSharedData).filter((([e])=>["partnerId","devbuild","version","siteId","wpLanguage","wpVersion","siteProfile"].includes(e))))},F=()=>{const{x:e,y:t,width:n,height:o}=E.getState();return{userAgent:window?.navigator?.userAgent,vendor:window?.navigator?.vendor||"unknown",platform:window?.navigator?.userAgentData?.platform||window?.navigator?.platform||"unknown",mobile:window?.navigator?.userAgentData?.mobile,width:window.innerWidth,height:window.innerHeight,screenHeight:window.screen.height,screenWidth:window.screen.width,orientation:window.screen.orientation?.type,touchSupport:"ontouchstart"in window||navigator.maxTouchPoints>0,agentUI:{x:e,y:t,width:n,height:o}}},O=async({tool:e,inputs:t})=>{if(!B.Y[e])throw new Error(`Tool ${e} not found`);return await B.Y[e](t)},H=({error:e,sessionId:t,caller:n,additional:o={}})=>{if(!0===Boolean(q?.devbuild))return;const r={message:e.response&&e.response.statusText?e.response?.statusText||e.response.message||"Unknown error":"string"==typeof e?e:e?.message||"Unknown error",name:e?.name};return fetch(`${M.AY}/api/agent/digest`,{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify({...q,phpVersion:window.extSharedData?.phpVersion,sessionId:t,error:r,browser:{userAgent:window.navigator?.userAgent,vendor:window.navigator?.vendor,platform:window.navigator?.platform,width:window.innerWidth,height:window.innerHeight,touchSupport:"ontouchstart"in window||navigator.maxTouchPoints>0},caller:n,...o,extra:F()})}).catch((()=>{}))};var z=n(642),W=n(6942),V=n.n(W),U=n(8053);const Y=(0,x.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M17.0909 9.81818L18 7.81818L20 6.90909L18 6L17.0909 4L16.1818 6L14.1818 6.90909L16.1818 7.81818L17.0909 9.81818Z",fill:"currentColor"}),(0,x.jsx)("path",{d:"M17.0909 14.1818L16.1818 16.1818L14.1818 17.0909L16.1818 18L17.0909 20L18 18L20 17.0909L18 16.1818L17.0909 14.1818Z",fill:"currentColor"}),(0,x.jsx)("path",{d:"M11.6364 10.1818L9.81818 6.18182L8 10.1818L4 12L8 13.8182L9.81818 17.8182L11.6364 13.8182L15.6364 12L11.6364 10.1818ZM10.5382 12.72L9.81818 14.3055L9.09818 12.72L7.51273 12L9.09818 11.28L9.81818 9.69455L10.5382 11.28L12.1236 12L10.5382 12.72Z",fill:"currentColor"})]}),Z=(0,x.jsxs)(g.P.svg,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",overflow:"visible",xmlns:"http://www.w3.org/2000/svg",initial:"hidden",animate:"visible",children:[(0,x.jsx)(g.P.path,{d:"M17.0909 9.81818L18 7.81818L20 6.90909L18 6L17.0909 4L16.1818 6L14.1818 6.90909L16.1818 7.81818L17.0909 9.81818Z",fill:"currentColor",variants:{hidden:{scale:1,opacity:.8},visible:{scale:[1,1.05,1],opacity:[1,.7,1],transition:{repeat:3,duration:1.2,delay:.2}}}}),(0,x.jsx)(g.P.path,{d:"M17.0909 14.1818L16.1818 16.1818L14.1818 17.0909L16.1818 18L17.0909 20L18 18L20 17.0909L18 16.1818L17.0909 14.1818Z",fill:"currentColor",variants:{hidden:{scale:1,opacity:.8},visible:{scale:[1,1.05,1],opacity:[1,.7,1],transition:{repeat:3,duration:1.2,delay:.6}}}}),(0,x.jsx)(g.P.path,{d:"M11.6364 10.1818L9.81818 6.18182L8 10.1818L4 12L8 13.8182L9.81818 17.8182L11.6364 13.8182L15.6364 12L11.6364 10.1818ZM10.5382 12.72L9.81818 14.3055L9.09818 12.72L7.51273 12L9.09818 11.28L9.81818 9.69455L10.5382 11.28L12.1236 12L10.5382 12.72Z",fill:"currentColor",variants:{hidden:{scale:1,opacity:.9},visible:{scale:[1,1.03,1],opacity:[1,.8,1],transition:{repeat:3,duration:1.2,delay:.4}}}}),(0,x.jsx)(g.P.circle,{cx:"6",cy:"6",r:"1.7",fill:"currentColor",initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:[.5,1,.5]},transition:{repeat:2,duration:2,delay:1.7}}),(0,x.jsx)(g.P.circle,{cx:"20",cy:"4",r:"1",fill:"currentColor",initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:[.5,1,.5]},transition:{repeat:3,duration:1.4,delay:.8}}),(0,x.jsx)(g.P.circle,{cx:"4",cy:"20",r:"0.7",fill:"currentColor",initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:[.5,1,.5]},transition:{repeat:3,duration:1.2,delay:1.4}})]}),X=(0,x.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,x.jsx)("path",{d:"M14.1818 5H7.63636C7.03273 5 6.51636 5.36364 6.29818 5.88727L4.10182 11.0145C4.03636 11.1818 4 11.3564 4 11.5455V13C4 13.8 4.65455 14.4545 5.45455 14.4545H10.0436L9.35273 17.7782L9.33091 18.0109C9.33091 18.3091 9.45455 18.5855 9.65091 18.7818L10.4218 19.5455L15.2145 14.7527C15.4764 14.4909 15.6364 14.1273 15.6364 13.7273V6.45455C15.6364 5.65455 14.9818 5 14.1818 5ZM14.1818 13.7273L11.0255 16.8836L12 13H5.45455V11.5455L7.63636 6.45455H14.1818V13.7273ZM17.0909 5H20V13.7273H17.0909V5Z"})}),G=(0,x.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,x.jsx)("path",{d:"M9.81818 19.5455H16.3636C16.9673 19.5455 17.4836 19.1818 17.7018 18.6582L19.8982 13.5309C19.9636 13.3636 20 13.1891 20 13V11.5455C20 10.7455 19.3455 10.0909 18.5455 10.0909H13.9564L14.6473 6.76727L14.6691 6.53455C14.6691 6.23636 14.5455 5.96 14.3491 5.76364L13.5782 5L8.78545 9.79273C8.52364 10.0545 8.36364 10.4182 8.36364 10.8182V18.0909C8.36364 18.8909 9.01818 19.5455 9.81818 19.5455ZM9.81818 10.8182L12.9745 7.66182L12 11.5455H18.5455V13L16.3636 18.0909H9.81818V10.8182ZM4 10.8182H6.90909V19.5455H4V10.8182Z"})}),K=(0,x.jsxs)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M16.4545 10.0909L17.25 8.34091L19 7.54545L17.25 6.75L16.4545 5L15.6591 6.75L13.9091 7.54545L15.6591 8.34091L16.4545 10.0909Z"}),(0,x.jsx)("path",{d:"M16.4545 13.9091L15.6591 15.6591L13.9091 16.4545L15.6591 17.25L16.4545 19L17.25 17.25L19 16.4545L17.25 15.6591L16.4545 13.9091Z"}),(0,x.jsx)("path",{d:"M11.6818 10.4091L10.0909 6.90909L8.5 10.4091L5 12L8.5 13.5909L10.0909 17.0909L11.6818 13.5909L15.1818 12L11.6818 10.4091ZM10.7209 12.63L10.0909 14.0173L9.46091 12.63L8.07364 12L9.46091 11.37L10.0909 9.98273L10.7209 11.37L12.1082 12L10.7209 12.63Z"})]}),Q=(0,x.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M5 9V6C5 5.44772 5.44772 5 6 5H9",stroke:"currentColor",strokeWidth:"1.5"}),(0,x.jsx)("path",{d:"M17.9799 16.1255C17.9 16.1483 17.8203 16.1708 17.742 16.1958C17.3245 16.3292 16.8439 16.5227 16.4734 16.8175C16.1305 17.0903 15.8256 17.4777 15.5793 17.8342C15.5307 17.9046 15.4826 17.9763 15.4353 18.0489L14.3938 13.9163L17.9799 16.1255Z",stroke:"currentColor",strokeWidth:"2"}),(0,x.jsx)("path",{d:"M15 5L18 5C18.5523 5 19 5.44772 19 6L19 9",stroke:"currentColor",strokeWidth:"1.5"}),(0,x.jsx)("path",{d:"M9 19L6 19C5.44772 19 5 18.5523 5 18L5 15",stroke:"currentColor",strokeWidth:"1.5"})]}),J=(0,x.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,x.jsx)("path",{d:"M5 9V6C5 5.44772 5.44772 5 6 5H9",stroke:"currentColor",strokeWidth:"1.5"}),(0,x.jsx)("path",{d:"M19 15L19 18C19 18.5523 18.5523 19 18 19L15 19",stroke:"currentColor",strokeWidth:"1.5"}),(0,x.jsx)("path",{d:"M15 5L18 5C18.5523 5 19 5.44772 19 6L19 9",stroke:"currentColor",strokeWidth:"1.5"}),(0,x.jsx)("path",{d:"M9 19L6 19C5.44772 19 5 18.5523 5 18L5 15",stroke:"currentColor",strokeWidth:"1.5"}),(0,x.jsx)("path",{d:"M15 9H9V10.0588H15V9ZM9 11.4706H15V12.5294H9V11.4706ZM15 13.9412H9V15H15V13.9412Z",fill:"currentColor"})]}),ee=({disabled:e=!1})=>{const{getWorkflowsByFeature:t,domToolEnabled:n,setDomToolEnabled:o}=(0,h.Y)();return t({requires:["block"]})?.length>0?(0,x.jsx)("div",{className:"flex items-center",children:(0,x.jsx)(u.Tooltip,{text:n?(0,l.__)("Exit select mode","extendify-local"):(0,l.__)("Select Area to Edit","extendify-local"),children:(0,x.jsxs)("button",{type:"button",disabled:e,className:V()("m-0 flex items-center rounded border-0 px-1 py-0.5 leading-none disabled:opacity-50",{"bg-gray-300":n,"bg-gray-100 text-gray-900":!n,"hover:bg-gray-200":!e}),onClick:()=>{window.dispatchEvent(new CustomEvent("extendify-agent:cancel-workflow")),o(!n)},children:[(0,x.jsx)(p.A,{size:24,icon:Q}),(0,x.jsx)("span",{className:"px-1",children:(0,l.__)("Select","extendify-local")}),n&&(0,x.jsx)(p.A,{size:20,icon:U.A,className:"fill-current"})]})})}):null},te=({disabled:e,handleSubmit:t})=>{const n=(0,a.useRef)(null),[o,r]=(0,a.useState)(""),[s,i]=(0,a.useState)([]),c=(0,a.useRef)(!1),[d,u]=(0,a.useState)(null),{getWorkflowsByFeature:m,block:g}=(0,h.Y)(),{isMobile:f}=E(),y=m({requires:["block"]})?.length>0&&!f,w=(0,a.useCallback)((()=>{if(!n.current)return;n.current.style.height="auto";const e=.55*n.current.closest("#extendify-agent-chat").offsetHeight,t=Math.min(e,n.current.scrollHeight);n.current.style.height=`${g&&t<60?60:t}px`}),[g]);(0,a.useLayoutEffect)((()=>(window.addEventListener("extendify-agent:resize-end",w),w(),()=>window.removeEventListener("extendify-agent:resize-end",w))),[w]),(0,a.useEffect)((()=>{const e=({detail:e})=>{i((t=>t?.at(-1)===e.message?t:[...t,e.message])),u(null)};return window.addEventListener("extendify-agent:chat-submit",e),()=>window.removeEventListener("extendify-agent:chat-submit",e)}),[]),(0,a.useEffect)((()=>{w()}),[o,w]),(0,a.useEffect)((()=>{const e=Array.from(document.querySelectorAll('#extendify-agent-chat-scroll-area > [data-agent-message-role="user"]'))?.map((e=>e.textContent||"")),t=e.filter(((e,t,n)=>0===t||e!==n[t-1]));i(t)}),[]);const b=(0,a.useCallback)((e=>{e?.preventDefault(),o.trim()&&(t(o.trim()),i((e=>e?.at(-1)===o?e:[...e,o])),u(null),r(""),requestAnimationFrame((()=>{c.current=!1,w(),n.current?.focus()})))}),[o,t,w]),v=(0,a.useCallback)((e=>{if("Enter"===e.key&&!e.shiftKey&&!e.nativeEvent.isComposing)return e.preventDefault(),void b();if(!c.current){if("ArrowUp"===e.key){if(!s.length)return;if(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)return;return u((e=>{const t=null===e?s.length-1:Math.max(e-1,0);return r(s[t]),t})),void e.preventDefault()}if("ArrowDown"===e.key){if(null===d)return;if(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)return;return u((e=>{if(null===e)return null;const t=e+1;return t>=s.length?(r(""),null):(r(s[t]),t)})),void e.preventDefault()}c.current=!0}}),[s,d,b]);return(0,x.jsxs)("form",{onSubmit:b,onClick:()=>n.current?.focus(),className:V()("relative flex w-full flex-col rounded border border-gray-300 focus-within:outline-design-main focus:rounded focus:border-design-main focus:ring-design-main",{"bg-gray-300":e,"bg-gray-50":!e}),children:[(0,x.jsx)("textarea",{ref:n,id:"extendify-agent-chat-textarea",disabled:e,className:V()("flex max-h-[calc(75dvh)] min-h-10 w-full resize-none overflow-hidden bg-transparent px-2 pb-4 pt-2.5 text-base placeholder:text-gray-700 focus:shadow-none focus:outline-none disabled:opacity-50 md:text-sm"),placeholder:g?(0,l.__)("What do you want to change in the selected content?","extendify-local"):(0,l.__)("Ask anything","extendify-local"),rows:"1",autoFocus:!0,value:o,onChange:e=>{r(e.target.value),u(null),w()},onKeyDown:v}),(0,x.jsxs)("div",{className:"flex justify-between gap-4 px-2 pb-2",children:[y?(0,x.jsx)(ee,{disabled:e}):null,(0,x.jsx)("div",{className:"ms-auto flex items-center",children:(0,x.jsxs)("button",{type:"submit",className:"inline-flex h-fit items-center justify-center gap-2 whitespace-nowrap rounded-full border-0 bg-design-main p-0.5 text-sm font-medium text-white transition-colors focus-visible:ring-design-main disabled:opacity-20",disabled:e||0===o.trim().length,children:[(0,x.jsx)(p.A,{fill:"currentColor",icon:z.A,size:24}),(0,x.jsx)("span",{className:"sr-only",children:(0,l.__)("Send message","extendify-local")})]})})]})]})};var ne=n(7783);const oe=({canScrollDown:e,onClick:t})=>(0,x.jsx)("div",{className:"pointer-events-none sticky bottom-1 flex h-8 items-center justify-center",children:(0,x.jsx)(j.N,{children:e?(0,x.jsxs)(g.P.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,exit:{duration:0}},onClick:t,type:"button",className:"pointer-events-auto flex h-fit items-center justify-center gap-2 whitespace-nowrap rounded-full border border-gray-500 bg-white/90 p-1 text-sm font-medium text-design-main shadow-lg transition-colors hover:bg-gray-100 focus-visible:ring-design-main disabled:pointer-events-none",children:[(0,x.jsx)(p.A,{fill:"currentColor",icon:ne.A,size:20}),(0,x.jsx)("span",{className:"sr-only",children:(0,l.__)("Scroll down","extendify-local")})]},"scroll-down"):null})});var re=n(1609);const se=({children:e,...t})=>{const n=(0,re.useRef)(null),o=(0,re.useRef)(!1);return(0,re.useEffect)((()=>{if(!n.current||o.current)return;const e=n.current,t=e.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,s=t.height,i=Math.max(t.top,0),a=Math.min(t.bottom,r);Math.max(0,a-i)/s>=.5||(e.scrollIntoView({behavior:"smooth",block:"end"}),o.current=!0)}),[t]),(0,x.jsx)("div",{ref:n,...t,children:e})};var ie=n(8537),ae=n(9148),le=n(7589),ce=n(998),de=n(684),ue=n(8334);const pe=({words:e,delay:t=.4,duration:n=.25})=>{const o=e.every((e=>1===e.length));return(0,x.jsx)(j.N,{children:e.map(((e,r)=>(0,x.jsx)(g.P.span,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:n,delay:r*t},children:o?e:(0,x.jsx)(ue.oz,{children:e})},r)))})};var me=n(2619);(0,me.addFilter)("extendify.ai-agent-suggestion-tours","extendify/ai-agent-extra-tours",(e=>window.extSharedData?.showAIPageCreation?{...e,"post-new.php?post_type=page":"page-creator-tour"}:e));const ge=(0,me.applyFilters)("extendify.ai-agent-suggestion-tours",{"plugin-install.php":"plugin-install-tour","plugins.php":"plugin-management-tour","post-new.php?post_type=page":"page-editor-tour","post-new.php?post_type=post":"library-tour","users.php":"users-screen-tour","admin.php?page=extendify-assist":"site-assistant-tour"});var fe=n(9035),he=n(7806);const xe=Object.values(fe.A),ye=window.extAgentData.agentContext?.availableAdminPages||[],we=Object.fromEntries(ye.map((e=>{var t;return[e,{label:(0,l.__)("Take me there","extendify-local"),tour:null!==(t=xe.find((t=>t.id===ge[e])))&&void 0!==t?t:null}]})))||{},be={agent1:ae.A,agent2:le.A,agent3:ce.A,agent4:de.A},ve=({message:e,animate:t})=>{var n,o;const{content:r,role:s,pageSuggestion:i,agent:a,sessionId:c="not-set"}=e.details,d=/```[\s\S]*?```/.test(r)?[(0,ie.decodeEntities)(r)]:(0,ie.decodeEntities)(r).split(/\n{2,}/),m=Object.keys(we).find((e=>i?.startsWith(e))),g=we[m]||{};return(0,x.jsxs)("div",{"data-agent-message-role":s,className:"flex w-full items-start gap-2.5 p-2",children:[(0,x.jsx)("div",{className:"w-7 flex-shrink-0",children:(0,x.jsx)(u.Tooltip,{text:null!==(n=a?.name)&&void 0!==n?n:(0,l.__)("Agent","extendify-local"),placement:"top",children:a?.avatar?(0,x.jsx)("img",{className:"mt-px",src:a.avatar,alt:a.name}):(0,x.jsx)(p.A,{className:"-mt-0.5 fill-gray-900",icon:null!==(o=be[a?.id])&&void 0!==o?o:Y,size:28})})}),(0,x.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-4",children:[(0,x.jsx)("div",{className:"extendify-agent-markdown w-full",children:t?(0,x.jsx)(pe,{words:d,delay:.1,duration:.35}):(0,x.jsx)(ue.oz,{children:(0,ie.decodeEntities)(r)})}),g?.label?(0,x.jsx)("div",{children:(0,x.jsx)("a",{onClick:()=>{(({action:e,sessionId:t,value:n={}})=>{t?fetch(`${M.AY}/api/agent/activities`,{keepalive:!0,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...q,action:e,sessionId:t,value:n})}):Promise.resolve(null)})({sessionId:c,action:"take_me_there_click",value:{pageSuggestion:i}})},href:`${window.extSharedData.adminUrl}${i}`,className:"rounded border border-design-main bg-design-main p-2 text-sm text-white no-underline hover:opacity-90",children:g.label})}):null,g?.tour&&(0,x.jsx)("div",{children:(0,x.jsx)(he.L,{tour:g.tour})})]})]})},ke=({status:e,animate:t})=>{const{type:n,label:o}=e.details,[r,s]=(0,a.useState)(),[i,c]=(0,a.useState)(0),d=(0,a.useMemo)((()=>({"calling-agent":(0,l.__)("Thinking...","extendify-local"),"agent-working":[(0,l.__)("Working on it...","extendify-local"),(0,l.__)("Interpreting message...","extendify-local"),(0,l.__)("Formulating a response...","extendify-local"),(0,l.__)("Reviewing logic...","extendify-local")],"tool-started":o||(0,l.__)("Gathering data...","extendify-local"),"tool-completed":o||(0,l.__)("Analyzing...","extendify-local"),"tool-canceled":o||(0,l.__)("Canceled","extendify-local"),"workflow-canceled":o||(0,l.__)("Canceled","extendify-local"),"credits-exhausted":(0,l.__)("Usage limit reached","extendify-local"),"credits-restored":(0,l.__)("Usage limit restored","extendify-local")})),[o]),u=["calling-agent","agent-working","tool-started"].includes(n);return(0,a.useEffect)((()=>{if(!Array.isArray(d[n]))return void s(d[n]);s(d[n][i]);const e=setTimeout((()=>{s(null),c((e=>(e+1)%d[n].length))}),5e3);return()=>clearTimeout(e)}),[n,d,r,i]),"workflow-tool-completed"===n?(0,x.jsx)(je,{label:o}):r?(0,x.jsx)("div",{className:V()("p-2 text-center text-xs italic text-gray-700",{"status-animation":u}),children:t?(0,x.jsx)(pe,{words:r.split(""),delay:.02}):r}):null},je=({label:e})=>(0,x.jsxs)("div",{className:"flex w-full items-start gap-2.5 p-2",children:[(0,x.jsx)("div",{className:"w-7 flex-shrink-0"}),(0,x.jsx)("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:(0,x.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border border-wp-alert-green bg-wp-alert-green/20 p-3 text-green-900",children:[(0,x.jsx)("div",{className:"h-6 w-6 leading-none",children:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),(0,x.jsx)("div",{className:"text-sm",children:(0,ie.decodeEntities)(e)||(0,l.__)("Workflow completed successfully","extendify-local")})]})})]}),_e=({message:e})=>{const{content:t,role:n}=e.details;return(0,x.jsx)("div",{"data-agent-message-role":n,className:"flex w-full flex-col items-end p-2",children:(0,x.jsx)("div",{className:"max-w-[80%] rounded-xl bg-gray-100 p-1.5 px-2.5 text-gray-900",children:(0,ie.decodeEntities)(t)})})},Te=({children:e})=>(0,x.jsx)("div",{className:"mb-4 ml-10 mr-2 min-w-0 flex-1 flex-col gap-1 rtl:ml-2 rtl:mr-10 rtl:flex",children:(0,x.jsxs)("div",{className:"flex gap-2 rounded-lg border border-wp-alert-red bg-wp-alert-red/10 p-3 text-red-800",children:[(0,x.jsx)("div",{children:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})}),(0,x.jsx)("div",{className:"text-sm",children:e})]})}),Le=({message:e})=>{const t=B.L.find((t=>t.id===e.details.id))?.whenFinished?.component;return t?(0,x.jsx)(t,{...e.details}):(0,x.jsx)(Se,{})},Se=()=>(0,x.jsx)(Te,{children:(0,x.jsxs)("div",{className:"text-sm",children:[(0,x.jsx)("div",{className:"font-semibold",children:(0,l.__)("Component not available","extendify-local")}),(0,x.jsx)("div",{className:"",children:
// translators: This is for when a component doesn't exist
// translators: This is for when a component doesn't exist
(0,l.__)("It may have been removed or is not available for your account.","extendify-local")})]})});var Ce=n(3803),Ne=n(8176),Ee=n(2043),Ae=n(1375),Pe=n(845),Ie=n(9254),Re=n(6655),De=n(5295);const{suggestions:Me}=window.extAgentData,$e=Object.values(fe.A).filter((({settings:{startFrom:e}})=>!e||e.includes(window.location.href))),Be=$e?.length?$e[Math.floor(Math.random()*$e.length)]:void 0,qe=Be?.message&&(Me.length<3||Math.random()<.3),Fe={styles:le.A,edit:Ce.A,help:Ne.A,video:Ee.A,sparkle:K,drafts:Ae.A,published:Pe.A,typography:Ie.A},Oe=Me.filter((e=>!!e?.feature)),He=Me.filter((e=>!e?.feature)),ze=({suggestions:e=[]})=>{const{startTour:t}=(0,De.n)(),[n,o]=(0,a.useState)(He);(0,a.useEffect)((()=>{o((e=>e.toSorted((()=>Math.random()-.5))))}),[]);const r=e=>{window.dispatchEvent(new CustomEvent("extendify-agent:chat-submit",{detail:{message:e}}))};return e?.length>0?e.map((e=>(0,x.jsx)(We,{suggestion:e,handleSubmit:r},e.message))):(0,x.jsxs)(x.Fragment,{children:[qe?(0,x.jsx)(We,{suggestion:{...Be,icon:"video"},handleSubmit:()=>t(Be)},Be.message):null,[...Oe,...n].slice(0,qe?2:3).map((e=>(0,x.jsx)(We,{suggestion:e,handleSubmit:r},e.message)))]})},We=({suggestion:e,handleSubmit:t})=>{var n;const o=null!==(n=Fe[e?.icon])&&void 0!==n?n:Fe.sparkle;return(0,x.jsxs)("button",{type:"button",className:"group flex items-center justify-between rounded bg-transparent px-1 py-1 text-left text-sm text-gray-900 transition-colors duration-100 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-design-main",onClick:()=>t(e.message),children:[(0,x.jsxs)("div",{className:"flex items-center gap-1.5 leading-none",children:[(0,x.jsx)("span",{className:"h-5 w-5 flex-shrink-0 self-start fill-gray-700",children:o}),(0,x.jsx)("span",{className:"leading-5",children:e.message})]}),(0,x.jsx)("span",{className:"inline-block h-5 w-5 fill-gray-700 leading-none opacity-0 transition-opacity duration-100 group-hover:opacity-100 rtl:scale-x-[-1]",children:Re.A})]})},Ve=({answerId:e})=>{const[t,n]=(0,a.useState)(void 0);return(0,a.useEffect)((()=>{e&&void 0!==t&&(({answerId:e,rating:t})=>{fetch(`${M.AY}/api/agent/rate-workflow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answerId:e,rating:t})}).catch((n=>H({caller:"rateAnswer",error:n,extra:{answerId:e,rating:t}})))})({answerId:e,rating:t})}),[t,e]),(0,x.jsx)("div",{className:"flex items-center justify-end",children:(0,x.jsxs)("div",{className:"flex items-center gap-px rounded-xl border border-gray-400 bg-gray-50 px-2 text-right",children:[(0,x.jsx)("button",{type:"button","aria-pressed":1===t,"aria-live":"polite",onClick:()=>n((e=>1===e?0:1)),"aria-label":1===t?(0,l.__)("Remove rating","extendify-local"):(0,l.__)("Rate that this answer was helpful","extendify-local"),className:V()("m-0 h-6 border-0 bg-transparent p-0 hover:text-design-main",{"text-design-main":1===t,"text-gray-600":1!==t}),children:(0,x.jsx)(p.A,{className:"fill-current",icon:G})}),(0,x.jsx)("button",{type:"button","aria-pressed":-1===t,"aria-live":"polite",onClick:()=>n((e=>-1===e?0:-1)),"aria-label":-1===t?(0,l.__)("Remove rating","extendify-local"):(0,l.__)("Rate that this answer was not helpful","extendify-local"),className:V()("m-0 h-6 border-0 bg-transparent p-0 hover:text-design-main",{"text-design-main":-1===t,"text-gray-600":-1!==t}),children:(0,x.jsx)(p.A,{className:"fill-current",icon:X})})]})})},Ue=({message:e})=>{const{status:t,answerId:n}=e.details;return(0,x.jsxs)("div",{className:"flex flex-col gap-px p-2 text-center text-xs italic",children:[n&&(0,x.jsx)(Ve,{answerId:n}),["completed","canceled"].includes(t)?(0,x.jsxs)("div",{className:"relative mb-4 ml-9 mr-2 mt-4 flex flex-col gap-0.5 border-t border-gray-300 p-0 pt-4 text-sm text-gray-800 rtl:ml-2 rtl:mr-9",children:[(0,x.jsx)("p",{className:"m-0 mb-2 p-0 px-2 text-left text-sm not-italic text-gray-900 rtl:text-right",children:(0,l.__)("What's next? Would you like to do something else?","extendify-local")}),(0,x.jsx)(ze,{})]}):null]})},Ye=()=>{const{open:e}=E(),{messages:t}=(0,$.L)(),{getWhenFinishedToolProps:n,getWorkflow:o}=(0,h.Y)(),r=o(),s=n(),i=r?.whenFinished?.component,[l,c]=(0,a.useState)(!1),d=(0,a.useRef)(null),u=(0,a.useRef)(!0),p="user"===t.filter((({type:e})=>"status"!==e)).at(-1)?.details?.role;return(0,a.useEffect)((()=>{if(d.current&&e&&u.current)return u.current=!1,d.current.scrollTo({top:d.current.scrollHeight}),()=>{u.current=!0}}),[e]),(0,a.useEffect)((()=>{if(!d.current)return;if(!p)return;const e=d.current,t=e.querySelectorAll('[data-agent-message-role="user"]'),n=t[t.length-1];if(!n||t.length<2)return;const o=e.querySelector("#extendify-agent-chat-scroll-area"),r=n.getBoundingClientRect(),s=Array.from(o.children).reduce(((e,t)=>e+t.offsetHeight),0)+e.clientHeight-r.height;o.style.minHeight=`${s}px`,n.scrollIntoView({behavior:"smooth",block:"start"})}),[p,t]),(0,a.useEffect)((()=>{if(!d.current)return;const e=d.current,t=e.querySelector("#extendify-agent-chat-scroll-area > :last-child");if(!t)return;const n=new IntersectionObserver((([t])=>{const n=e.getBoundingClientRect(),o=t.boundingClientRect.bottom>n.bottom;c(!t.isIntersecting&&o)}),{root:e});return n.observe(t),()=>n.disconnect()}),[t]),(0,x.jsxs)("div",{ref:d,style:{overscrollBehavior:"contain"},className:"relative flex-grow overflow-y-auto overflow-x-hidden p-1 pb-0 text-sm text-gray-900 md:p-2",children:[(0,x.jsxs)("div",{id:"extendify-agent-chat-scroll-area",children:[t.map((e=>{const n=t.at(-1)?.id===e.id,o=u.current;if("user"===e.details?.role)return(0,x.jsx)(_e,{message:e},e.id);if("assistant"===e.details?.role)return(0,x.jsx)(ve,{animate:!o,message:e},e.id);if("workflow"===e.type)return(0,x.jsx)(Ue,{message:e},e.id);if("workflow-component"===e.type)return(0,x.jsx)(Le,{message:e},e.id);if("status"===e.type&&(n||["workflow-tool-completed"].includes(e.details?.type))){const t="error"===e.details?.type;return(0,x.jsx)(ke,{animate:!t,status:e},e.id)}return null})),!r?.needsRedirect?.()&&s?.id&&i?(0,x.jsx)(se,{children:(0,a.createElement)(i,s)}):null,r?.needsRedirect?.()?(0,x.jsx)(r.redirectComponent,{}):null]}),(0,x.jsx)(oe,{canScrollDown:l,onClick:()=>{if(!d.current)return;const e=d.current.querySelector("#extendify-agent-chat-scroll-area > :last-child");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}})]})},Ze=({busy:e})=>{const{setBlock:t}=(0,h.Y)();return(0,x.jsxs)("div",{className:"flex w-fit items-center justify-start gap-1 rounded border border-gray-500 bg-gray-100 p-1 text-sm text-gray-900",children:[(0,x.jsxs)("div",{className:"flex items-center gap-1",children:[(0,x.jsx)(p.A,{icon:J}),(0,x.jsx)("div",{children:(0,l.__)("Selected content","extendify-local")})]}),(0,x.jsx)(u.Tooltip,{text:(0,l.__)("Remove","extendify-local"),children:(0,x.jsxs)("button",{type:"button",disabled:e,className:"flex h-full items-center rounded-none border-0 bg-transparent outline-none ring-design-main focus:shadow-none focus:outline-none focus-visible:outline-design-main",onClick:()=>t(null),children:[(0,x.jsx)(p.A,{className:"pointer-events-none fill-current leading-none",icon:m.A,size:18}),(0,x.jsx)("span",{className:"sr-only",children:(0,l.__)("Remove","extendify-local")})]})})]})},Xe=window.extSharedData.launchCompletedAt;let Ge=!1;try{const e=new Date(Xe),t=new Date;t.setDate(t.getDate()-1),Ge=e<t}catch(et){}const{suggestions:Ke}=window.extAgentData,Qe=["change-theme-variation",Ke.some((e=>"change-site-vibes"===e.workflowId&&e?.feature))?"change-site-vibes":"edit-wp-setting","change-theme-fonts-variation"].map((e=>Ke.find((t=>t.workflowId===e&&t?.feature)))).filter(Boolean),Je=()=>(0,x.jsxs)("div",{className:"relative mx-2 px-2 text-gray-900",children:[Ge?null:(0,x.jsxs)("div",{className:"text-2xl font-semibold text-gray-700",children:[(0,l.__)("Site is live!","extendify-local")," "]}),(0,x.jsx)("div",{className:"mb-2 text-2xl font-semibold",children:(0,l.__)("Your expert AI team is here","extendify-local")}),(0,x.jsx)("div",{className:"text-md text-base text-gray-900",children:(0,l.__)("Your team of site experts  designers, developers, and marketers  ready to help from content to layouts. Tell us what you need or pick a task to start.","extendify-local")}),(0,x.jsx)("div",{className:"relative my-2 flex flex-col gap-0.5 p-2",children:(0,x.jsx)(ze,{suggestions:Qe})})]});var et=n(3889);const tt=({onReady:e})=>{const{retryAfter:t,isChatAvailable:n}=E(),[o,r]=(0,a.useState)(null);if((0,a.useEffect)((()=>{if(!t)return;const o=setInterval((()=>{n()&&e(),r((()=>(0,T.humanTimeDiff)(new Date(Number(t)+45e3),new Date)))}),1e3);return()=>clearInterval(o)}),[n,t,e]),t&&o)return(0,x.jsxs)("div",{className:"flex gap-2 rounded-lg bg-gray-100 p-3 text-sm text-gray-900",children:[(0,x.jsx)(p.A,{icon:et.A,className:"flex-none"}),(0,x.jsx)("div",{className:"grow",children:(0,x.jsx)("div",{children:(0,l.sprintf)(
// translators: %s is a human-readable time difference, e.g. "2 hours from now"
// translators: %s is a human-readable time difference, e.g. "2 hours from now"
(0,l.__)("You have reached your daily messages limit. Your limit will reset in %s.","extendify-local"),o)})})]})},nt=window.extSharedData.devbuild;let ot=new AbortController;const{postId:rt}=window?.extAgentData?.context||{},st=window.extSharedData?.wpLanguage||"en_US",it=()=>{const{hasMessages:e,addMessage:t,popMessage:n}=(0,$.L)(),{mergeWorkflowData:o,getWorkflow:r,workflowData:s,setWorkflow:i,addWorkflowResult:c,setWhenFinishedToolProps:u,whenFinishedToolProps:p,getAvailableWorkflows:m,block:g,setBlock:f}=(0,h.Y)(),y=m().map((e=>e.id)),{open:w,setOpen:b,showSuggestions:v,setShowSuggestions:k,updateRetryAfter:j,isChatAvailable:_}=E();(({postId:e,enabled:t})=>{(0,a.useEffect)((()=>{if(!e||!t)return;let n;const o=async()=>{await d()({path:"/extendify/v1/agent/lock-post",method:"POST",data:{postId:e}}).catch((()=>{})),n=setTimeout(o,84e4)};return o(),()=>clearTimeout(n)}),[e,t])})({postId:rt,enabled:!!w});const[T,L]=(0,a.useState)(!0),S=(0,a.useRef)(!1),C=(0,a.useRef)(!1),N=(0,a.useRef)(!1),[A,P]=(0,a.useState)(!1),[I,R]=(0,a.useState)(0),B=r(),z=(0,a.useMemo)((()=>_()),[_]),W=window.extAgentData?.suggestions,V=(0,a.useCallback)((()=>{L(!0),S.current=!1,P(!1),ot=new AbortController,g&&f(null),window.dispatchEvent(new Event("extendify-agent:remove-block-highlight"));const e=Array.from(document.querySelectorAll("#extendify-agent-chat-scroll-area div:last-child"))?.at(-1);e?.scrollIntoView({behavior:"smooth",block:"nearest"}),e?.scrollBy({top:-5,behavior:"smooth"})}),[f,g]),U=(0,a.useCallback)((async(e={})=>{t("status",{type:"calling-agent"});const n=await(async({workflows:e,options:t})=>{const{failedWorkflows:n,context:o}=window.extAgentData,r=null!=n?n:new Set,s=e.filter((e=>!r.has(e.id))),{workflowHistory:i,block:a}=h.Y.getState(),l=$.L.getState().getMessagesForAI(),c=await fetch(`${M.AY}/api/agent/find-agent`,{method:"POST",headers:{"Content-Type":"application/json"},signal:t?.signal,body:JSON.stringify({...q,workflows:s,previousAgentName:i.at(0)?.agentName,context:o,agentContext:window.extAgentData.agentContext,messages:l.slice(-5),hasBlock:Boolean(a),blockDetails:a,...t,extra:F()})});if(!c.ok){H({caller:"pick-workflow",error:{name:c.statusText,messages:c.statusMessage}});const e=new Error("Bad response from server");throw e.response=c,e}return await c.json()})({workflows:y,options:{signal:ot.signal,...e}}).catch((async e=>{if(nt&&console.error(e),429===e?.response?.status)return j(e?.response?.headers?.get("Retry-After")),L(!1),void t("status",{type:"credits-exhausted"});L(!0),"Workflow aborted"!==e?(await new Promise((e=>setTimeout(e,1e3))),t("message",{role:"assistant",
// translators: This message is shown when the AI agent fails to find a suitable workflow.
content:(0,l.__)("Something went wrong while trying to start this request. Please try again.","extendify-local"),error:!0})):t("status",{type:"workflow-canceled"})}));if(!n)return;const{workflow:o,reply:r}=n;o?.id&&i(o),r&&t("message",{role:"assistant",content:r,agent:o?.agent}),o?.id||L(!0)}),[t,j,i,y]),Y=(0,a.useCallback)((async e=>{k(!1),P(!1),S.current=!1,t("message",{role:"user",content:e}),L(!1);const n=B?.needsRedirect?.(),r=p?.id,a=n||r;if(a&&i(null),B&&!a){const e=s||{};return i({...B}),void o(e)}const l=W?.find((t=>t?.message===e)),c=l?.workflowId,d=m().find((e=>e.id===c));d?i({...d,language:st}):await U().catch((e=>nt&&console.error(e)))}),[t,U,o,p,i,B,s,k,m,W]);(0,a.useEffect)((()=>{const e=({detail:e})=>{e?.message&&Y(e.message)},n=()=>{B?.id&&(ot.abort("Workflow aborted"),i(null),V(),t("status",{type:"workflow-canceled"}))};return window.addEventListener("extendify-agent:cancel-workflow",n),window.addEventListener("extendify-agent:chat-submit",e),()=>{window.removeEventListener("extendify-agent:cancel-workflow",n),window.removeEventListener("extendify-agent:chat-submit",e)}}),[Y,V,i,t,B]),(0,a.useEffect)((()=>{const e=async({detail:e})=>{if(C.current)return;C.current=!0;const{data:n,whenFinishedToolProps:o,shouldRefreshPage:r}=null!=e?e:{},{summary:s,status:a,whenFinishedTool:d,answerId:u}=o.agentResponse,{id:p,labels:m}=d||{},g=await(O?.({tool:p,inputs:n}).catch((e=>{const{sessionId:t}=B||{};return H({caller:`when-finished: ${p}`,sessionId:t,error:e}),nt&&console.error(e),{error:e.message}})));if(C.current=!1,c({answerId:u,agentName:B?.agent?.name,summary:s,status:a,errorMsg:g?.error}),g?.error)return await new Promise((e=>setTimeout(e,1e3))),t("message",{role:"assistant",
// translators: This message is shown when the AI agent fails to confirm an action.
content:(0,l.__)("Sorry, something went wrong attempting to call the tool. Please try again.","extendify-local"),error:!0}),i(null),void V();t("status",{label:m?.confirm,type:"workflow-tool-completed"}),t("workflow",{status:"completed",agent:B.agent,answerId:u}),i(null),V(),r&&window.location.reload()},o=({detail:e})=>{if(C.current)return;const{summary:n,answerId:o}=e.whenFinishedToolProps.agentResponse;t("workflow",{status:"canceled",agent:B.agent,answerId:o}),c({answerId:o,summary:n,status:"canceled",agentName:B?.agent?.name}),i(null),V()},r=()=>{n(),P(!1),S.current=!1,N.current=!0,R((e=>e+1))};return window.addEventListener("extendify-agent:workflow-confirm",e),window.addEventListener("extendify-agent:workflow-cancel",o),window.addEventListener("extendify-agent:workflow-retry",r),()=>{window.removeEventListener("extendify-agent:workflow-confirm",e),window.removeEventListener("extendify-agent:workflow-cancel",o),window.removeEventListener("extendify-agent:workflow-retry",r)}}),[t,n,V,c,i,B]),(0,a.useEffect)((()=>{const e=()=>b(!1),t=()=>b(!0);return window.addEventListener("extendify-agent:close",e),window.addEventListener("extendify-agent:open",t),()=>{window.removeEventListener("extendify-agent:close",e),window.removeEventListener("extendify-agent:open",t)}}),[b]),(0,a.useEffect)((()=>{if(A||!w||!B?.id)return;const e=B?.startingPage!==window.location.href,n=!g&&B?.requires?.includes("block");if(B?.cancelOnPageChange&&e||n)return t("workflow",{status:"canceled",agent:B.agent}),i(null),void V();p?.id||(B?.needsRedirect?.()?V():(async()=>{if(S.current)return;L(!1),k(!1),S.current=!0,t("status",{type:"agent-working"});const e=await(async({workflow:e,workflowData:t,options:n})=>{const o=$.L.getState().getMessagesForAI(),r=await fetch(`${M.AY}/api/agent/handle-workflow`,{method:"POST",headers:{"Content-Type":"application/json"},signal:n?.signal,body:JSON.stringify({...q,workflow:e,workflowData:t,messages:o,context:window.extAgentData.context,agentContext:window.extAgentData.agentContext,retry:n?.retry||!1,extra:F()})});if(!r.ok)throw new Error("Bad response from server");return await r.json()})({workflow:B,workflowData:s,options:{signal:ot.signal,retry:N.current}}).catch((e=>{if("Workflow aborted"===e)return t("status",{type:"workflow-canceled"}),i(null),void V();const{sessionId:n}=B||{};return H({caller:"handle-workflow",sessionId:n,error:e}),nt&&console.error(e),{error:e.message}}));if(N.current&&(N.current=!1),!e)return;const{summary:n,status:r,answerId:a,sessionId:l}=e;if(c({answerId:a,summary:n,status:r,errorMsg:e?.error,agentName:B?.agent?.name}),w){if(e.error)throw window.extAgentData.failedWorkflows=window.extAgentData.failedWorkflows||new Set,window.extAgentData.failedWorkflows.add(B.id),new Error(`Error handling workflow: ${e.error}`);if(e.reply&&t("message",{role:"assistant",content:e.reply,followup:!!e.tool,pageSuggestion:e.pageSuggestion,agent:B.agent,sessionId:B?.sessionId}),e.whenFinishedTool?.id){u({...e.whenFinishedTool,agentResponse:e});const{id:n,inputs:o,static:r}=e.whenFinishedTool;r&&(t("workflow-component",{id:n,status:"completed",inputs:o}),i(null),t("workflow",{status:"completed",agent:B.agent,answerId:a}),V())}else{if("in-progress"!==e.status)return i(null),V(),void t("workflow",{status:"completed"===e.status?"completed":"canceled",agent:B.agent,answerId:a});if(l&&l!==B.sessionId&&i({...B,sessionId:l}),o(e.inputs),e.tool){const{id:n,inputs:r,labels:s}=e.tool;t("status",{label:s?.started,type:"tool-started"});const i=await Promise.all([O({tool:n,inputs:r}),new Promise((e=>setTimeout(e,3e3)))]).then((([e])=>e)).catch((e=>{const{sessionId:t}=B||{};throw H({caller:`in-progress: ${n}`,sessionId:t,error:e}),nt&&console.error(e),e}));return t("status",{label:s?.confirm,type:"tool-completed"}),await new Promise((e=>setTimeout(e,1e3))),o(i),P(!1),S.current=!1,void R((e=>e+1))}L(!0),P(!0)}}})().catch((async e=>{const{sessionId:n}=B||{};H({caller:"main-loop",sessionId:n,error:e}),nt&&console.error(e),i(null),V(),await new Promise((e=>setTimeout(e,1e3))),t("message",{role:"assistant",
// translators: This message is shown when the AI agent encounters a general error.
content:(0,l.__)("Sorry, something went wrong. I tried but wasn't able to do this request. Please try again.","extendify-local"),error:!0})})))}),[I,V,c,w,B,s,t,i,S,A,o,T,U,k,p,u,g]),(0,a.useEffect)((()=>{T&&document.querySelector("#extendify-agent-chat-textarea")?.focus()}),[T]);const Z=!e(),X=!B?.id&&!Z&&z&&v&&!g,G=!T||!z||B?.id;return(0,x.jsx)(D,{busy:G,children:(0,x.jsxs)("div",{className:"relative z-50 flex h-full flex-col justify-between overflow-auto border-t border-solid border-gray-300",children:[Z?(0,x.jsxs)("div",{className:"relative flex flex-grow flex-col overflow-y-auto overflow-x-hidden",style:{backgroundImage:"linear-gradient( to bottom, #f0f0f0 0%, #fff 60%,  #fff 100%)"},children:[(0,x.jsx)("div",{className:"flex-grow"}),(0,x.jsx)(Je,{})]}):(0,x.jsx)(Ye,{redirectComponent:B?.needsRedirect?.()?B.redirectComponent:null}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"relative flex flex-col px-4 pb-2 pt-2.5 shadow-lg-flipped",children:[X?(0,x.jsx)(ze,{}):null,g?(0,x.jsx)(Ze,{busy:G,blockId:g.id}):null,(0,x.jsx)(tt,{onReady:()=>{V(),k(!0),t("status",{type:"credits-restored"})}})]}),(0,x.jsx)("div",{className:"p-4 pb-2 pt-0",children:(0,x.jsx)(te,{disabled:!T||!z,handleSubmit:Y})}),(0,x.jsx)("div",{className:"text-pretty px-4 pb-2 text-center text-xss leading-none text-gray-600",children:(0,l.__)("AI Agent can make mistakes. Check changes before saving.","extendify-local")})]})]})})};var at=n(2279);const lt=()=>{const{toggleOpen:e,open:t,isMobile:n}=E(),[o,r]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),c=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{if(!c.current)return void(c.current=!0);if(t||n)return;r(!0),i(!0);const e=setTimeout((()=>{r(!1)}),1500),o=setTimeout((()=>{i(!1)}),5e3);return()=>{clearTimeout(e),clearTimeout(o)}}),[t,n]),n?null:(0,x.jsxs)("button",{type:"button",className:V()("m-1 items-center justify-center rounded-sm border-0 bg-wp-theme-main p-0.5 px-1.5 leading-extra-tight text-white ring-offset-[#1D2327] focus:outline-none focus:ring-wp focus:ring-wp-theme-main focus:ring-offset-1 md:inline-flex",{"opacity-60":t}),onClick:()=>{t&&r(!0),e()},"aria-label":(0,l.__)("Open Agent","extendify-local"),children:[(0,x.jsx)(u.Icon,{icon:s?Z:Y,width:20,height:20,className:V()("fill-design-text",{"scale-x-[-1]":(0,l.isRTL)()})}),(0,x.jsx)("span",{className:V()("px-1 leading-none",{"extendify-gradient-animation":o}),children:(0,l.__)("AI Agent","extendify-local")})]})};var ct=n(3756);const dt=()=>{const{isMobile:e,minimized:t,setMinimized:n}=E(),o=(0,a.useRef)(null);return(0,a.useEffect)((()=>{e&&!t&&document.body.style.setProperty("--extendify-agent-mobile-btn-height",`${o.current?.offsetHeight}px`)}),[e,t]),(0,a.useEffect)((()=>{if(e)return document.body.classList.add("extendify-agent-mobile-btn-open"),()=>{document.body.classList.remove("extendify-agent-mobile-btn-open")}}),[e]),e&&t?(0,x.jsxs)("button",{ref:o,type:"button",className:"m-0 flex w-full items-center justify-between gap-2 bg-gray-900 px-4 py-3 font-sans text-white shadow-[0_-1px_0_0_rgba(255,255,255,0.05)]",onClick:()=>n(!1),"aria-label":(0,l.__)("Open Agent","extendify-local"),children:[(0,x.jsxs)("div",{className:"flex gap-3",children:[(0,x.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-wp-theme-main",children:(0,x.jsx)(p.A,{icon:Y,size:24})}),(0,x.jsxs)("div",{className:"text-left text-sm rtl:text-right",children:[(0,x.jsx)("div",{className:"font-semibold",children:(0,l.__)("AI Agent","extendify-local")}),(0,x.jsx)("div",{className:"text-gray-600",children:(0,l.__)("How can we help you today?","extendify-local")})]})]}),(0,x.jsx)(p.A,{className:"fill-white",icon:ct.A,size:24})]}):null},ut=()=>{const{toggleOpen:e,open:t,isMobile:n}=E(),[o,r]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),c=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{if(!c.current)return void(c.current=!0);if(t||n)return;r(!0),i(!0);const e=setTimeout((()=>{r(!1)}),1500),o=setTimeout((()=>{i(!1)}),5e3);return()=>{clearTimeout(e),clearTimeout(o)}}),[t,n]),n?null:(0,x.jsx)(u.Button,{variant:"primary",icon:s?Z:Y,iconPosition:"left",className:"is-compact has-text relative z-10",onClick:()=>{t&&r(!0),e()},"aria-label":(0,l.__)("Open Agent","extendify-local"),children:(0,x.jsx)("span",{className:V()("px-1 leading-none",{"extendify-gradient-animation":o}),children:(0,l.__)("AI Agent","extendify-local")})})};r()((()=>{if((0,i.Zz)())return;const e="wp-admin-bar-extendify-agent-btn";if(document.getElementById(e))return;const t=Object.assign(document.createElement("li"),{className:"extendify-agent",id:e});t.style.height="1.75rem",document.querySelector("#wp-admin-bar-my-account")?.before(t),(0,s.X)((0,x.jsx)(lt,{}),t)})),r()((()=>{if((0,i.Zz)())return;const e="extendify-agent-mobile-btn";if(document.getElementById(e))return;const t=Object.assign(document.createElement("div"),{className:"extendify-agent",id:e});t.style.position="sticky",t.style.top="calc(100% - var(--extendify-agent-mobile-btn-height))",t.style.bottom="0",t.style.zIndex="9999",document.body.appendChild(t),(0,s.X)((0,x.jsx)(dt,{}),t)})),(0,at.registerPlugin)("extendify-agent-buttons",{render:()=>(0,x.jsx)(pt,{})});const pt=()=>((0,a.useEffect)((()=>{if((0,i.Zz)())return;const e="extendify-agent-editor-btn";if(document.getElementById(e))return;const t=Object.assign(document.createElement("span"),{className:"extendify-agent",id:e});requestAnimationFrame((()=>{requestAnimationFrame((()=>{document.getElementById(e)||(document.querySelector('[aria-controls="edit-post:document"]')?.after(t),document.querySelector('[aria-controls="edit-site:template"]')?.after(t),(0,s.X)((0,x.jsx)(ut,{}),t))}))}))}),[]),null);var mt=n(8971);const gt=e=>{const{top:t,right:n,bottom:o,left:r,width:s,height:i,x:a,y:l}=e.getBoundingClientRect();return{top:t,right:n,bottom:o,left:r,width:s,height:i,x:a,y:l}},ft=()=>{var e,t;const n=(0,a.useRef)(),{currentTour:o,currentStep:r,startTour:s,closeCurrentTour:i,getStepData:c,onTourPage:d}=(0,De.n)(),{settings:u}=o||{},{image:f,title:h,text:y,attachTo:w,events:b,options:v}=c(r),{queueTourForRedirect:k,queuedTour:_,clearQueuedTour:T,isMobile:L}=E(),{element:S,frame:C,offset:N,position:A,hook:P,boxPadding:I}=w||{},R=(0,a.useMemo)((()=>"function"==typeof S?S():S),[S]),D=(0,a.useMemo)((()=>"function"==typeof C?C():C),[C]),M=(0,a.useMemo)((()=>"function"==typeof N?N():N),[N]),$=(0,a.useMemo)((()=>"function"==typeof P?P():P),[P]),B=(0,a.useRef)(),q=(0,a.useRef)(!1),[F,O]=(0,a.useState)(null),[H,z]=(0,a.useState)(!1),[W,V]=(0,a.useState)(!1),[U,Y]=(0,a.useState)(null),[Z,X]=(0,a.useState)({x:void 0,y:void 0,...M}),G=(0,a.useCallback)(((e,t)=>{X(20===e?{x:e,y:t}:{x:e,y:t,...M})}),[M]),K=(0,a.useCallback)((()=>{const e=$?.split(" ")||[];return{x:e.includes("right")?n.current?.offsetWidth:0,y:e.includes("bottom")?n.current?.offsetHeight:0}}),[$]),Q=(0,a.useCallback)((()=>{var e,t,o,r;if(!F)return;const s=D&&null!==(e=document.querySelector(D)?.contentDocument)&&void 0!==e?e:document,a=gt(null!==(t=s.querySelector(R))&&void 0!==t?t:F);if(s!==document){const e=gt(s.defaultView.frameElement);a.x+=e.x,a.left+=e.x,a.right+=e.x,a.y+=e.y,a.top+=e.y,a.bottom+=e.y}if(window.innerWidth<=960)return void i("closed-resize");if(void 0===A?.x)return G(void 0,void 0),Y(null),void V(!1);const l=Math.max(20,a?.[A.x]-K().x),c=Math.max(20,a?.[A.y]-K().y),d=n.current;G(Math.min(l,window.innerWidth-(null!==(o=d?.offsetWidth)&&void 0!==o?o:0)-20),Math.min(c,window.innerHeight-(null!==(r=d?.offsetHeight)&&void 0!==r?r:0)-20)),Y(a)}),[F,A,K,G,D,R,i]);if((0,a.useLayoutEffect)((()=>{u?.startFrom&&(d()||(z(!0),k(o.id),i("redirected"),window.location.assign(u?.startFrom[0]),window.location.href.split("#")[0]===u.startFrom[0].split("#")[0]&&window.location.reload()))}),[u?.startFrom,o,k,i,d]),(0,a.useEffect)((()=>{r&&document.querySelectorAll("[inert]").forEach((e=>e?.removeAttribute("inert")))}),[r]),(0,a.useEffect)((()=>{const e=e=>{const{tourSlug:t}=e.detail;fe.A[t]&&requestAnimationFrame((()=>{s(fe.A[t])}))};return window.addEventListener("extendify-assist:start-tour",e),()=>{window.removeEventListener("extendify-assist:start-tour",e)}}),[s]),(0,a.useLayoutEffect)((()=>{if(H)return;const e=_;let t=0;if(!e||!fe.A[e])return T();const n=()=>{requestAnimationFrame((()=>{s(fe.A[e])})),T()};return addEventListener("load",n),"complete"===document.readyState&&(t=requestAnimationFrame(n)),()=>{cancelAnimationFrame(t),removeEventListener("load",n)}}),[s,_,T,H]),(0,a.useEffect)((()=>{var e,t;if(!R)return;const n=null!==(t=(D&&null!==(e=document.querySelector(D)?.contentDocument)&&void 0!==e?e:document).querySelector(R))&&void 0!==t?t:document.querySelector(R);return n?(O(n),()=>O(null)):void 0}),[D,R]),(0,a.useLayoutEffect)((()=>{if(F&&!H)return V(!0),Q(),addEventListener("resize",Q),v?.allowPointerEvents||(F.style.pointerEvents="none"),()=>{removeEventListener("resize",Q),F.style.pointerEvents="auto"}}),[H,F,Q,v]),(0,a.useEffect)((()=>{q.current||r&&(q.current=!0)}),[r]),(0,a.useEffect)((()=>{if(void 0===r||!F)return;b?.onAttach?.(F);let e=0;const t=requestAnimationFrame((()=>{F.scrollIntoView({block:"center"}),Q(),e=requestAnimationFrame(Q)}));return B?.current?.focus(),()=>{b?.onDetach?.(F),cancelAnimationFrame(t),cancelAnimationFrame(e)}}),[r,b,F,Q,B]),(0,a.useLayoutEffect)((()=>{if(u?.allowOverflow)return document.documentElement.classList.add("ext-force-overflow-auto"),()=>{document.documentElement.classList.remove("ext-force-overflow-auto")}}),[u]),!W||L)return null;const J=yt(U,I);return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(j.N,{children:Boolean(o)&&(0,x.jsxs)(mt.lG,{as:g.P.div,static:!0,initialFocus:B,className:"extendify-agent",open:Boolean(o),onClose:()=>{},children:[(0,x.jsx)("div",{className:"relative z-max",children:(0,x.jsxs)(g.P.div,{ref:n,animate:{opacity:1,...Z},initial:{opacity:0,...Z},onAnimationComplete:()=>{Q()},transition:{duration:q.current?.5:0,ease:"easeInOut"},className:"fixed left-0 top-0 z-20 flex max-w-xs flex-col bg-transparent shadow-2xl sm:overflow-hidden",style:{minWidth:null!==(e=u?.minBoxWidth)&&void 0!==e?e:"325px"},children:[(0,x.jsx)("button",{"data-test":"close-tour",className:"absolute right-0 top-0 z-20 m-2 flex h-6 w-6 items-center justify-center rounded-full border-0 bg-white p-0 leading-none outline-none ring-1 ring-gray-200 focus:shadow-none focus:ring-wp focus:ring-design-main rtl:left-0 rtl:right-auto",onClick:()=>i("closed-manually"),"aria-label":(0,l.__)("Close Modal","extendify-local"),children:(0,x.jsx)(p.A,{icon:m.A,className:"h-4 w-4 fill-current"})}),(0,x.jsx)(mt.lG.Title,{className:"sr-only",children:null!==(t=o?.title)&&void 0!==t?t:(0,l.__)("Tour","extendify-local")}),f&&(0,x.jsx)("div",{className:"w-full p-6",style:{minHeight:150,background:"linear-gradient(58.72deg, #485563 7.71%, #29323C 92.87%)"},children:(0,x.jsx)("img",{src:f,className:"block w-full",alt:h})}),(0,x.jsxs)("div",{className:"relative m-0 bg-white p-6 pt-0 text-left rtl:text-right",children:[h&&(0,x.jsx)("h2",{className:"mb-2 text-xl font-medium",children:h}),y&&(0,x.jsx)("p",{className:"mb-6",children:y}),(0,x.jsx)(xt,{initialFocus:B})]})]})}),v?.allowPointerEvents||(0,x.jsx)("div",{"aria-hidden":!0,className:"fixed inset-0 z-max-1"}),Boolean(o)&&void 0!==U?.left&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.P.div,{initial:{opacity:0,clipPath:"polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%, 0 0)"},animate:{opacity:1,clipPath:`polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%, 0 0, ${J.left}px 0, ${J.left}px ${J?.bottom}px, ${J?.right}px ${J.bottom}px, ${J.right}px ${J.top}px, ${J.left}px ${J.top}px)`},transition:{duration:q.current?.5:0,ease:"easeInOut"},className:"fixed inset-0 z-max-1 hidden bg-black/70 lg:block","aria-hidden":"true"}),(0,x.jsx)(ht,{rectWithPadding:J,finishedStepOne:q})]})]})})})},ht=({rectWithPadding:e,finishedStepOne:t})=>{const[n,o]=(0,a.useState)(!1);return(0,x.jsx)(g.P.div,{initial:{...null!=e?e:{}},animate:{...null!=e?e:{}},transition:{duration:t.current?.5:0,ease:"easeInOut"},onAnimationStart:()=>o(!1),onAnimationComplete:()=>o(!0),className:V()("fixed inset-0 z-high hidden border-2 lg:block",{"border-transparent":!n,"border-design-main":n,"inset-y-auto right-0":(0,l.isRTL)()}),"aria-hidden":"true"})},xt=({initialFocus:e})=>{const{goToStep:t,completeCurrentTour:n,currentStep:o,preparingStep:r,getStepData:s,hasNextStep:i,nextStep:a,hasPreviousStep:c,prevStep:d,currentTour:p}=(0,De.n)(),{options:m={}}=s(o),{hideBackButton:f=!1}=m,{steps:h,settings:y}=p||{};return(0,x.jsxs)("div",{id:"extendify-tour-navigation",className:"flex w-full items-center justify-between",children:[(0,x.jsx)("div",{className:"flex flex-1 justify-start rtl:flex-none",children:(0,x.jsx)(j.N,{children:c()&&!f&&(0,x.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},children:(0,x.jsxs)("button",{className:"flex h-8 items-center justify-center gap-2 rounded-sm bg-transparent p-0 text-gray-900 ring-design-main hover:bg-transparent focus:outline-none focus:ring-wp focus:ring-offset-1 focus:ring-offset-white disabled:opacity-60",onClick:d,disabled:r>-1,children:[r<o&&(0,x.jsx)(u.Spinner,{className:"m-0 h-4 text-design-main"}),(0,x.jsx)("span",{children:(0,l.__)("Back","extendify-local")})]})})})}),h?.length>2&&!y?.hideDotsNav?(0,x.jsx)("nav",{role:"navigation","aria-label":(0,l.__)("Tour Steps","extendify-local"),className:"flex flex-1 -translate-x-3 items-center justify-center gap-1",children:h.map(((e,n)=>(0,x.jsx)("div",{children:(0,x.jsx)("button",{"aria-label":(0,l.sprintf)(
// translators: %1$s is the current step, %2$s is the total number of steps
// translators: %1$s is the current step, %2$s is the total number of steps
(0,l.__)("%1$s of %2$s","extendify-local"),n+1,h.length),"aria-current":n===o,className:"m-0 block h-2.5 w-2.5 rounded-full p-0 ring-offset-1 ring-offset-white focus:outline-none focus:ring-wp focus:ring-design-main "+(n===o?"bg-design-main":"bg-gray-300"),onClick:()=>t(n),disabled:r>-1})},n)))}):null,(0,x.jsx)("div",{className:"flex flex-1 justify-end rtl:flex-none",children:i()?(0,x.jsxs)(u.Button,{ref:e,id:"agent-tour-next-button","data-test":"agent-tour-next-button",onClick:a,disabled:r>-1,className:"flex gap-2 bg-design-main text-design-text focus:text-design-text disabled:opacity-60",variant:"primary",children:[r>o&&(0,x.jsx)(u.Spinner,{className:"m-0 h-4 text-design-main"}),(0,x.jsx)("span",{children:(0,l.__)("Next","extendify-local")})]}):(0,x.jsx)(u.Button,{id:"agent-tour-next-button","data-test":"agent-tour-next-button",onClick:()=>{n()},className:"bg-design-main",variant:"primary",children:(0,l.__)("Done","extendify-local")})})]})},yt=(e,t)=>{var n,o,r,s,i,a,l,c,d,u;return{top:e.top-(null!==(n=t?.top)&&void 0!==n?n:0),left:e.left-(null!==(o=t?.left)&&void 0!==o?o:0),right:e.right+(null!==(r=t?.right)&&void 0!==r?r:0),bottom:e.bottom+(null!==(s=t?.bottom)&&void 0!==s?s:0),width:e.width+(null!==(i=t?.left)&&void 0!==i?i:0)+(null!==(a=t?.right)&&void 0!==a?a:0),height:e.height+(null!==(l=t?.top)&&void 0!==l?l:0)+(null!==(c=t?.bottom)&&void 0!==c?c:0),x:e.x-(null!==(d=t?.left)&&void 0!==d?d:0),y:e.y-(null!==(u=t?.top)&&void 0!==u?u:0)}},wt=({children:e,title:t,name:n,onClose:o,anchors:r=[]})=>{const{seenToolTips:s,setSeenToolTip:i,isMobile:c}=E(),[d,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(0),[h,y]=(0,a.useState)(0),[w,b]=(0,a.useState)(0),v=()=>{p(!1),i(n),o?.()};if((0,a.useLayoutEffect)((()=>{const e=r.map((e=>document.querySelector(e))).find(Boolean);if(!e||!d||c)return;const t=document.querySelector(".interface-interface-skeleton__secondary-sidebar, .interface-interface-skeleton__sidebar"),n=t?.style.zIndex;t&&(t.style.zIndex=20);const o=e.style.outline;e.style.outline="99999px solid rgba(0, 0, 0, 0.4)";const s=e.getBoundingClientRect(),i=s.left+s.width/2,a=s.top+s.height;return b(s.width),f(i),y(a),()=>{e.style.outline=o,t&&(t.style.zIndex=n)}}),[r,d,c]),(0,a.useEffect)((()=>{if(s.includes(n)||c)return;const e=()=>{const e=r.map((e=>document.querySelector(e))).find(Boolean);e&&e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&p(!0)};return window.addEventListener("extendify-agent:closed-button",e),()=>{window.removeEventListener("extendify-agent:closed-button",e)}}),[p,s,n,r,c]),d&&!c)return(0,x.jsx)(mt.lG,{static:!0,className:"extendify-agent",open:d,onClose:v,children:(0,x.jsxs)("div",{className:"relative z-max",children:[(0,x.jsx)("div",{onClick:v,"aria-hidden":!0,role:"presentation",className:"fixed inset-0 z-10 h-screen w-screen bg-transparent"}),(0,x.jsxs)("div",{className:"fixed z-20 flex min-w-80 max-w-xs flex-col rounded-lg bg-transparent shadow-2xl",style:{top:`${h+20}px`,left:(0,l.isRTL)()?`${g+100}px`:g-100+"px",transform:"translate(-50%, 0)"},children:[(0,x.jsx)("div",{style:{insetInlineEnd:w/2-5+"px"},className:"absolute top-[-12px] h-0 w-0 transform border-b-[12px] border-l-[10px] border-r-[10px] border-transparent border-b-wp-theme-main"}),(0,x.jsx)("button",{type:"button","data-test":"close-tooltip",className:"ring-none focus:ring-none absolute right-0 top-0 z-20 m-2 flex h-6 w-6 items-center justify-center border-0 bg-wp-theme-main p-0 leading-none text-design-text outline-none focus:shadow-none rtl:left-0 rtl:right-auto",onClick:v,"aria-label":(0,l.__)("Close ToolTip","extendify-local"),children:(0,x.jsx)(u.Icon,{icon:m.A,className:"h-4 w-4 fill-current"})}),(0,x.jsx)(mt.L3,{className:"sr-only",children:t}),(0,x.jsx)("div",{className:"text-md relative m-0 rounded-lg bg-wp-theme-main p-6 pt-8 text-left font-sans leading-7 text-design-text rtl:text-right",children:e})]})]})})},bt=()=>(0,x.jsxs)(wt,{name:"reopen",title:(0,l.__)("Tooltip pointing to the agent button","extendify-local"),anchors:["#extendify-agent-editor-btn > button","#wp-admin-bar-extendify-agent-btn"],children:[(0,x.jsx)("div",{className:"mb-1 text-base font-semibold",children:(0,l.__)("Need help again?","extendify-local")}),(0,x.jsx)("div",{className:"text-base",children:(0,l.__)("You can always access your AI Agent if you need help with anything on your site.","extendify-local")})]});r()((()=>{const e=document.getElementById("wpwrap")||document.querySelector(".wp-site-blocks");if((0,i.Zz)()||document.querySelector("body.iframe")||!e)return;const t="extendify-agent-main";if(document.getElementById(t))return;const n=Object.assign(document.createElement("div"),{className:"extendify-agent",id:t});document.body.appendChild(n),(0,s.X)((0,x.jsx)(it,{}),n);const o="extendify-agent-tour";if(document.getElementById(o))return;const r=Object.assign(document.createElement("div"),{className:"extendify-agent-tour",id:o});(0,s.X)((0,x.jsx)(ft,{}),r);const a=Object.assign(document.createElement("div"),{id:"extendify-agent-modal-tooltip"});document.body.appendChild(a),(0,s.X)((0,x.jsx)(bt,{}),a)}))},5573:e=>{"use strict";e.exports=window.wp.primitives},5713:(e,t,n)=>{"use strict";n.d(t,{E:()=>r,u:()=>s});var o=n(7143);const r=()=>{const e=(0,o.select)("core/preferences").get("core","renderingModes")||{},t=(0,o.select)("core").getCurrentTheme()?.stylesheet;return e?.[t]?.page},s=async e=>{const t=(0,o.select)("core/preferences").get("core","renderingModes")||{},n=(0,o.select)("core").getCurrentTheme()?.stylesheet;return(0,o.dispatch)("core/preferences").set("core","renderingModes",{...t,[n]:{...t[n]||{},page:e}}),await new Promise((e=>requestAnimationFrame(e)))}},5749:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o={available:()=>!0,id:"list-tours",whenFinished:{component:n(7806).e}}},5795:e=>{"use strict";e.exports=window.ReactDOM},6087:e=>{"use strict";e.exports=window.wp.element},6097:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var o=n(1455),r=n.n(o),s=n(6087),i=n(7723);const a=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=(e,t)=>{if(!e)return[];const n=new RegExp(`^(${a(t)}.*)--(\\d+)$`,"i"),o=[],r=new Set,s=[e,...e.querySelectorAll(`[class*="${t}"]`)];for(const e of s)for(const t of e.classList){const e=t.match(n);if(!e)continue;const s=e[1],i=Number(e[2]);r.has(i)||(r.add(i),o.push({prefix:s,number:i}))}return o},c=(e,t)=>{const n=document.createElement("div");return n.innerHTML=e,l(n,t)},d=(e,t,n)=>{if(!n||!n.size)return e;const o=document.createElement("div");o.innerHTML=e;const r=new RegExp(`^${a(t)}.*--(\\d+)$`,"i"),s=o.querySelectorAll(`[class*="${t}"]`);for(const e of s){const o=Array.from(e.classList);let s=!1;for(const[e,t]of o.entries()){const i=t.match(r);if(!i)continue;const a=Number(i[1]);if(!n.has(a))continue;const l=n.get(a),c=t.replace(/--(\d+)$/,`--${l}`);c!==t&&(o[e]=c,s=!0)}o.includes(t)||(o.push(t),s=!0),s&&(e.className=o.join(" "))}return o.innerHTML};var u=n(3410),p=n(790);const m=["is-style-ext-preset","is-style-outline"],g=({children:e})=>(0,p.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),f=({children:e})=>(0,p.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,p.jsx)("div",{className:"p-3",children:e})}),{context:h,abilities:x}=window.extAgentData,y={available:()=>x?.canEditPosts&&!h?.adminPage&&h?.postId&&!h?.isBlogPage&&h?.isBlockTheme&&document.querySelector(".wp-site-blocks"),id:"block-general",requires:["block"],whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n,onRetry:o})=>{const{block:a}=(0,u.Y)(),[h,x]=(0,s.useState)(!0),y=(0,s.useRef)(null),w=(0,s.useCallback)((()=>{const e=document.querySelector("[data-extendify-temp-replacement]");y.current&&(e?.parentNode?.insertBefore(y.current,e),y.current=null),e&&e.remove(),n()}),[n]),b=(0,s.useCallback)((()=>{const e=document.querySelector("[data-extendify-temp-replacement]");y.current&&(e?.parentNode?.insertBefore(y.current,e),y.current=null),e&&e.remove(),o()}),[o]);return(0,s.useEffect)((()=>{r()({path:"/extendify/v1/agent/get-block-html",method:"POST",data:{blockCode:e.newContent}}).then((({content:e})=>{window.dispatchEvent(new Event("extendify-agent:remove-block-highlight"));const t=document.querySelector(`[data-extendify-agent-block-id="${a.id}"]`);if(!t)return n();if(y.current)return;y.current=t;const o=((e,t,n)=>{let o=e;for(const e of n){const n=l(t,e),r=c(o,e);if(!n.length||!r.length)continue;const s=new Map;for(const{prefix:e,number:t}of n)s.has(e)||s.set(e,[]),s.get(e).push(t);const i=new Map;for(const{prefix:e,number:t}of r)i.has(e)||i.set(e,[]),i.get(e).push(t);const a=new Map;for(const[e,t]of i){const n=s.get(e);if(!n)continue;const o=Math.min(t.length,n.length);for(const[e,r]of t.entries()){if(e>=o)break;r!==n[e]&&a.set(r,n[e])}}a.size&&(o=d(o,e,a))}return o})(e,t.cloneNode(!0),m),r=document.createElement("template");r.innerHTML=o||'<div style="display:none"></div>';const s=r.content.firstElementChild;if(!s)return n();t.classList.forEach((e=>s.classList.add(e))),s.setAttribute("data-extendify-temp-replacement",!0),t.parentNode.insertBefore(s,t.nextSibling),t.parentNode?.removeChild(t),x(!1)}))}),[a,e,n]),h?(0,p.jsx)(g,{children:(0,p.jsx)(f,{children:(0,i.__)("Loading...","extendify-local")})}):(0,p.jsxs)(g,{children:[(0,p.jsx)(f,{children:(0,p.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,i.__)("The agent has made the changes in the browser. Please review and confirm.","extendify-local")})}),(0,p.jsxs)("div",{className:"flex flex-wrap justify-start gap-2 p-3",children:[(0,p.jsx)("button",{type:"button",className:"flex-1 rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:w,children:(0,i.__)("Cancel","extendify-local")}),(0,p.jsx)("button",{type:"button",className:"flex-1 rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:b,children:(0,i.__)("Try Again","extendify-local")}),(0,p.jsx)("button",{type:"button",className:"flex-1 rounded border border-design-main bg-design-main p-2 text-sm text-white",onClick:async()=>{await t({data:e,shouldRefreshPage:!0})},children:(0,i.__)("Save","extendify-local")})]})]})}}}},6427:e=>{"use strict";e.exports=window.wp.components},6480:e=>{"use strict";e.exports=window.wp.mediaUtils},6636:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(1455),r=n.n(o);const s=async({postId:e,postType:t,replacements:n})=>{const o="page"===t?"pages":"posts",s=await r()({path:`/wp/v2/${o}/${e}?context=edit`});let i=s.content.raw,a=s.title.raw;for(const{original:e,updated:t}of n){const n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");i=i.replace(n,t),a=a.split(e).join(t)}return await r()({path:`/wp/v2/${o}/${e}`,method:"POST",data:{content:i,title:a}})}},6748:(e,t,n)=>{"use strict";n.d(t,{M4:()=>r,qE:()=>o,rQ:()=>s});const o=(e,t,n)=>Math.max(t,Math.min(e,n)),r=()=>Date.now().toString(36)+Math.random().toString(36).slice(2),s=()=>{const e=window.location.pathname,t=new URLSearchParams(window.location.search);return e.includes("/wp-admin/post.php")&&"edit"===t.get("action")}},7143:e=>{"use strict";e.exports=window.wp.data},7275:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var o=n(6087),r=n(7723),s=n(7677),i=n(7108),a=n(1380),l=n(9324),c=n(790);const d=({onClick:e})=>(0,c.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:e,children:(0,r.__)("Cancel","extendify-local")}),u=({onClick:e,text:t})=>(0,c.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",onClick:e,children:t}),p=({children:e})=>(0,c.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),m=({children:e})=>(0,c.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,c.jsx)("div",{className:"p-3",children:e})}),{abilities:g}=window.extAgentData,f={available:()=>g.canInstallPlugins&&g.canActivatePlugins,id:"recommend-plugins",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const[g,f]=(0,o.useState)("idle"),h=()=>{f("installing")};return(0,o.useEffect)((()=>{if(!e.alreadyInstalled)return;const t=requestAnimationFrame((()=>{n?.()}));return()=>cancelAnimationFrame(t)}),[e,n]),(0,o.useEffect)((()=>{let n=!1;return(async()=>{if("installing"!==g){if("activating"===g){try{await(0,l.Bf)(e.pluginSlug)}catch{try{await new Promise((e=>setTimeout(e,500))),await(0,l.Bf)(e.pluginSlug)}catch{return void(n||f("error"))}}if(n)return;try{await(0,a.yB)({slug:e.pluginSlug,source:"ai-agent-recommendation"}),await new Promise((e=>{const{adminUrl:t}=window.extSharedData,n=Object.assign(document.createElement("iframe"),{title:"Admin Loader",src:t,style:"display: none;",sandbox:"allow-same-origin allow-scripts allow-forms",onload:()=>{document.body.removeChild(n),e()}});document.body.appendChild(n)})),n||t({shouldRefreshPage:!0})}catch{n||f("error")}}}else try{if(await(0,l.xZ)(e.pluginSlug),n)return;f("activating")}catch(e){if(n)return;if("folder_exists"===e?.code)return void f("activating");f("error")}})(),()=>{n=!0}}),[g,t,e]),"error"===g?(0,c.jsxs)(p,{children:[(0,c.jsx)(m,{children:(0,c.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,r.__)("There was an error installing the plugin. You may try again","extendify-local")})}),(0,c.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,c.jsx)(d,{onClick:n}),(0,c.jsx)(u,{onClick:h,text:(0,r.__)("Try Again","extendify-local")})]})]}):["installing","activating"].includes(g)?(0,c.jsx)(p,{children:(0,c.jsx)(m,{children:(0,c.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:"installing"===g?(0,r.__)("Installing plugin...","extendify-local"):(0,r.__)("Activating plugin...","extendify-local")})})}):(0,c.jsxs)(p,{children:[(0,c.jsx)(m,{children:(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,r.__)("The agent is requesting to install and activate a plugin.","extendify-local")}),(0,c.jsxs)("div",{className:"flex justify-between gap-1",children:[e.pluginName&&(0,c.jsx)("div",{className:"text-md flex-1 font-bold",children:e.pluginName}),(0,c.jsxs)("a",{className:"flex flex-1 items-end text-gray-900 hover:text-gray-900 hover:decoration-solid",href:`https://wordpress.org/plugins/${e.pluginSlug}`,target:"_blank",rel:"noopener noreferrer",children:[(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,r.sprintf)(
// translators: %1$s and %2$s are HTML tags. %1$s opens a span with screen-reader-only text, and %2$s closes that span.
// translators: %1$s and %2$s are HTML tags. %1$s opens a span with screen-reader-only text, and %2$s closes that span.
(0,r.__)("Plugin Details %1$s(opens in a new tab)%2$s","extendify-local"),'<span class="sr-only">',"</span>")}}),(0,c.jsx)(s.A,{className:"ml-1 inline-block",icon:i.A,size:18})]})]})]})}),(0,c.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,c.jsx)(d,{onClick:n}),(0,c.jsx)(u,{onClick:h,text:(0,r.__)("Install Plugin","extendify-local")})]})]})}}}},7584:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var o=n(3640);const r=document.querySelector('iframe[name="editor-canvas"]')?.contentDocument||document,s=["feFuncR","feFuncG","feFuncB"],i=(()=>{let e=new Map;return({duotoneTheme:t,dynamicDuotone:n})=>{const i=[];return r.querySelectorAll('[id^="wp-duotone-"]').forEach((a=>{const l=a.id.replace("wp-duotone-","");((t,n,i)=>{let a="";isNaN(t)||(a=t,t=i?.[`wp-duotone-${a}`]);const l=n?.find((e=>e.slug===t))?.colors;if(!l||2!==l.length)return!1;const c=r.querySelector(`#wp-duotone-${a}`)||r.querySelector(`#wp-duotone-${t}`);if(!c)return!1;if(!e.has(a||t)){const n={tableValues:{},cssProperty:getComputedStyle(r.documentElement).getPropertyValue(`--wp--preset--duotone--${a||t}`)};s.forEach((e=>{const t=c.querySelector(e);t&&(n.tableValues[e]=t.getAttribute("tableValues"))})),e.set(a||t,n)}const[d,u]=l.map((e=>{const{r:t,g:n,b:r}=(0,o.Mj)(e).toRgb();return{r:t/255,g:n/255,b:r/255}}));return s.forEach(((e,t)=>{const n=["r","g","b"][t],o=c.querySelector(e);o&&o.setAttribute("tableValues",`${d[n]} ${u[n]}`)})),r.documentElement.style.setProperty(`--wp--preset--duotone--${a||t}`,`url(#wp-duotone-${a||t})`),!0})(l,t,n)&&i.push(l)})),i.length>0?()=>{i.forEach((t=>{const n=e.get(t);if(!n)return;const o=r.querySelector(`#wp-duotone-${t}`);o&&(s.forEach((e=>{const t=o.querySelector(e);t&&null!==n.tableValues[e]&&(n.tableValues[e]?t.setAttribute("tableValues",n.tableValues[e]):t.removeAttribute("tableValues"))})),n.cssProperty?r.documentElement.style.setProperty(`--wp--preset--duotone--${t}`,n.cssProperty):r.documentElement.style.removeProperty(`--wp--preset--duotone--${t}`))}))}:null}})()},7723:e=>{"use strict";e.exports=window.wp.i18n},7806:(e,t,n)=>{"use strict";n.d(t,{L:()=>d,e:()=>c});var o=n(7677),r=n(2043),s=n(5295),i=n(9035),a=n(790);const l=Object.values(i.A),c=({onConfirm:e})=>{if(0!==l.length)return(0,a.jsxs)("div",{className:"flex w-full items-start gap-2.5 p-2",children:[(0,a.jsx)("div",{className:"w-7 flex-shrink-0"}),(0,a.jsx)("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:l.map((t=>(0,a.jsx)(d,{tour:t,onClick:()=>{e?.()}},t.id)))})]})},d=({tour:e,onClick:t})=>{const{startTour:n}=(0,s.n)();return(0,a.jsxs)("div",{className:"group relative flex items-center",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded opacity-10 transition-opacity duration-100 group-hover:bg-design-main"}),(0,a.jsxs)("button",{type:"button",className:"flex w-full items-center gap-2 rounded border border-gray-300 bg-transparent p-3 text-left text-sm leading-none text-gray-900 focus:outline-none focus:ring-wp focus:ring-design-main group-hover:ring-wp group-hover:ring-design-main",onClick:()=>{n(e),t?.()},children:[(0,a.jsx)(o.A,{icon:r.A,className:"h-6 w-6 fill-gray-700 leading-none"}),e.message]})]})}},8443:e=>{"use strict";e.exports=window.wp.date},8446:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var o=n(9363),r=n(6427),s=n(8443),i=n(6087),a=n(7723),l=n(1380),c=n(9324),d=n(4866),u=n(9179),p=n(286),m=n(8459),g=n(790);const f=(0,a.__)("Generate Image","extendify-local"),h=({children:e})=>(0,g.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),x=({children:e})=>(0,g.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,g.jsx)("div",{className:"p-3",children:e})}),{context:y,abilities:w}=window.extAgentData,b={available:()=>w?.canEditPosts&&w?.canUploadMedia&&!y?.adminPage&&y?.postId&&!y?.isBlogPage&&y?.isBlockTheme&&document.querySelector(".wp-site-blocks"),id:"block-generate-image",requires:["block"],whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const[y,w]=(0,i.useState)(null),[b,v]=(0,i.useState)(!1),[k,j]=(0,i.useState)(null),[_,T]=(0,i.useState)(0),[L,S]=(0,i.useState)(!1),{imageCredits:C,updateImageCredits:N,subtractOneCredit:E,resetImageCredits:A}=(0,d.C)(),P=0===Number(C.remaining),{addMessage:I,messages:R}=(0,m.L)(),D=async()=>{if(L)return;if(!y){v(!0),E();try{const{imageCredits:t,images:o}=await(0,l.Fz)({prompt:e.prompt});N(t);const r=o?.[0]?.url;if(!r)throw new Error((0,a.__)("No image returned","extendify-local"));await(n=r,new Promise(((e,t)=>{const o=new Image;o.onload=()=>e(n),o.onerror=t,o.src=n}))),w(r),v(!1)}catch(e){j(e?.message||(0,a.__)("An unknown error occurred.","extendify-local")),e?.imageCredits&&N(e.imageCredits),v(!1)}return}var n;S(!0);const o=await(0,c.GV)(null,y,"ai-generated");await t({data:{previousContent:e.previousContent,newContent:(0,p.L)(e,o)},shouldRefreshPage:!0})};return(0,i.useEffect)((()=>{(0,o.registerCoreBlocks)()}),[]),(0,i.useEffect)((()=>{const e=()=>{T((e=>e+1)),C.refresh&&(new Date(Number(C.refresh))>new Date||A())};0===_&&e();const t=setTimeout(e,1e3);return()=>clearTimeout(t)}),[C,A,_]),(0,i.useEffect)((()=>{if(!k)return;const e=setTimeout((()=>n()),100),t=(0,a.sprintf)(
// translators: A chat message shown to the user
// translators: A chat message shown to the user
(0,a.__)("Error generating image: %s","extendify-local"),k),o=R.at(-1)?.details?.content;return t===o||I("message",{role:"assistant",content:t,error:!0}),()=>clearTimeout(e)}),[k,n,I,R]),k?null:b?(0,g.jsx)(h,{children:(0,g.jsx)(x,{children:(0,g.jsx)(u.P.div,{initial:{opacity:1},exit:{opacity:0},className:"flex aspect-square w-full items-center justify-center",style:{background:"linear-gradient(135deg, #E8E8E8 47.92%, #F3F3F3 60.42%, #E8E8E8 72.92%)"},children:(0,g.jsx)(r.Spinner,{style:{height:"48px",width:"48px"}})})})}):y?(0,g.jsxs)(h,{children:[(0,g.jsxs)(x,{children:[(0,g.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,a.__)("Image generated successfully!","extendify-local")}),(0,g.jsx)("div",{className:"my-2 flex justify-center",children:(0,g.jsx)("img",{src:y,alt:e.prompt,style:{maxWidth:"100%",height:"auto"}})})]}),(0,g.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,g.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",disabled:L,onClick:n,children:(0,a.__)("Cancel","extendify-local")}),(0,g.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",disabled:L,onClick:D,children:L?(0,a.__)("Inserting Image...","extendify-local"):(0,a.__)("Insert Image","extendify-local")})]})]}):(0,g.jsxs)(h,{children:[(0,g.jsx)(x,{children:(0,g.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:P?(0,a.sprintf)((0,a.__)("You've used all your image credits for today. Your credits will reset in %s.","extendify-local"),(0,s.humanTimeDiff)(new Date(Number(C.refresh)))):(0,a.sprintf)((0,a.__)('The agent has asked to generate an image. Press "%s" to continue.',"extendify-local"),f)})}),(0,g.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,g.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:n,children:(0,a.__)("Cancel","extendify-local")}),P?null:(0,g.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",disabled:P,onClick:D,children:f})]}),(0,g.jsx)("div",{className:"text-pretty px-4 pb-2 text-center text-xss leading-none text-gray-700",children:(0,a.sprintf)(
// translators: %1$s is the number of credits remaining, %2$s is the total credits
// translators: %1$s is the number of credits remaining, %2$s is the total credits
(0,a.__)("You have %1$s of %2$s daily image credits remaining.","extendify-local"),C.remaining,C.total)})]})}}}},8459:(e,t,n)=>{"use strict";n.d(t,{L:()=>u});var o=n(1455),r=n.n(o),s=n(1621),i=n(7134),a=n(6748);const{chatHistory:l}=window.extAgentData,c="/extendify/v1/agent/chat-events",d={getItem:async()=>await r()({path:c}),setItem:async(e,t)=>await r()({path:c,method:"POST",data:{state:t}})},u=(0,s.vt)()((0,i.Zr)((0,i.lt)(((e,t)=>({messagesRaw:(l||[]).toReversed(),messages:l?.length?l.filter((e=>!(["agent-working","calling-agent","tool-started"].includes(e.details?.type)||["workflow"].includes(e.type)&&"completed"===e.details.status))).reduce(((e,t)=>{const n=e.at(-1);return"assistant"===t.details?.role&&"assistant"===n?.details?.role?e:[...e,t]}),[]).toReversed():[],seenAgents:[],getMessagesForAI:()=>{const e=[];let n=!1;for(const{type:o,details:r}of t().messagesRaw.toReversed()){const t=["completed","canceled"].includes(r.status)||["status"].includes(o)&&"workflow-canceled"===r.type;if("workflow"===o&&t)break;if("workflow-component"===o&&t)break;"message"===o&&"user"===r.role&&(n=!0),("message"!==o||n)&&"message"===o&&e.push(r)}return e.toReversed()},hasMessages:()=>t().messages.length>0,addMessage:(n,o)=>{const r=(0,a.M4)();if(o?.agent?.name&&!t().seenAgents.includes(o.agent.name)){o.firstSeen=!0;const t=e=>new Set([...e.seenAgents,o.agent.name]);e((e=>({seenAgents:[...t(e)]})))}return e((e=>{const t=Math.max(0,e.messages.length-149),s={id:r,type:n,details:o};return{messages:[...e.messages.toSpliced(0,t),s],messagesRaw:[...e.messagesRaw.toSpliced(0,t),s]}})),r},popMessage:()=>{e((e=>({messages:e.messages?.slice(0,-1)||[],messagesRaw:e.messagesRaw?.slice(0,-1)||[]})))},clearMessages:()=>e({messages:[]})})),{name:"Extendify Agent Chat"}),{name:"extendify-agent-chat",storage:(0,i.KU)((()=>d)),skipHydration:!0}))},8490:e=>{"use strict";e.exports=window.wp.domReady},8537:e=>{"use strict";e.exports=window.wp.htmlEntities},8795:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o),s=n(9586);const i=async({settingName:e,newSettingValue:t})=>{if(!s.allowedSettings.includes(e))throw new Error("Setting not allowed");return await r()({path:"/wp/v2/settings?context=edit",method:"POST",data:{[e]:t}})}},8922:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var o=n(1455),r=n.n(o);const s=window.extSharedData?.globalStylesPostID,i=window.extAgentData?.context?.themeSlug,a=async({selectedVibe:e})=>{if(e&&"string"==typeof e&&""!==e.trim())try{const{styles:t}=await r()({path:`wp/v2/global-styles/themes/${i}?context=edit`});if(!t?.blocks)throw new Error("No block styles found in theme global styles");const n={};for(const[o,r]of Object.entries(t.blocks)){if(!r?.variations){n[o]=r;continue}const{variations:t,...s}=r;n[o]={...s,variations:c(t,e)}}await Promise.all([r()({path:`wp/v2/global-styles/${s}`,method:"POST",data:{styles:{...t,blocks:n}}}),l(e)])}catch(e){throw new Error(`Vibe update failed: ${e?.response?.data?.message||e?.message||"Unknown error"}`)}},l=async e=>{const{data:t}=await r()({path:"/extendify/v1/launch/options?option=extendify_siteStyle"}),n={...t&&"object"==typeof t&&!Array.isArray(t)?t:{},vibe:e};return await r()({path:"/extendify/v1/launch/options",method:"POST",data:{option:"extendify_siteStyle",value:n}})},c=(e,t)=>{const n={};for(const[o,r]of Object.entries(e)){if(!o.includes("--natural-1--")){n[o]=r;continue}const s=e[o.replace("--natural-1--",`--${t}--`)];n[o]=s||r}return n}},8942:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var o,r=n(1455),s=n.n(r),i=n(9363),a=n(4997),l=n(7143),c=n(3656),d=n(6087),u=n(8579),p=n(6572),m=n(9130),g=n(202),f=n(6727),h=n(7828),x=n(8512),y=n(9246),w=n(790);const{pageTitlePattern:b}=null!==(o=window.extPageCreator)&&void 0!==o?o:{},v=({pageDescription:e,onComplete:t})=>{const{page:n,loading:o}=(0,u.f)(),{setDescription:r}=(0,m.C)(),{editPost:s}=(0,l.useDispatch)(c.store),[a,h]=(0,d.useState)([]),x=(0,d.useRef)(!1),{theme:y,templates:w}=(0,l.useSelect)((e=>{const t=e("core"),n=t.getCurrentTheme();return{theme:n,templates:t.getEntityRecords("postType","wp_template",{per_page:-1,context:"edit",theme:n?.stylesheet})}}),[]);return(0,d.useEffect)((()=>{(0,i.registerCoreBlocks)()}),[]),(0,d.useEffect)((()=>{r(e)}),[e,r]),(0,d.useEffect)((()=>{!n&&o||x.current||(x.current=!0,(async()=>{await(0,f.D)(b);const e=await(0,p.d)(n?.patterns);await(0,g.Y)({patterns:e}),h(e)})())}),[o,n,h]),(0,d.useEffect)((()=>{if(!a?.length||!x.current)return;if(!y||!Array.isArray(w))return;const e="extendable"===y.textdomain&&w.some((e=>"page-with-title"===e.slug)),o=setTimeout((async()=>{const o=await k({hasPageWithTitle:e,patterns:a,title:n.title});t(o)}),1e3);return()=>clearTimeout(o)}),[a,s,n,y,w,t]),null},k=async({hasPageWithTitle:e,patterns:t,title:n})=>{const o=(e?t.filter((e=>!e.patternTypes?.includes("page-title"))):t).map((({code:e,...t})=>({...t,code:e.replace(/href="#extendify-([^"]+)"/g,'href="#"')}))),r=o.map((({code:e})=>e)).join(""),i=(0,a.rawHandler)({HTML:r}),l=[],c=new Set;for(const[e,t]of i.entries()){const n=o[e].patternTypes?.[0],r=(0,a.serialize)(t),{slug:s}=Object.values(x.Q).find((({alias:e})=>e.includes(n)))||{};!c.has(s)&&s?(c.add(s),l.push((0,y.f)(r,s))):l.push(r)}const d={title:n,status:"draft",content:l.join(""),template:e?"page-with-title":"no-title-sticky-header",meta:{made_with_extendify_launch:!0}};return await s()({path:"/wp/v2/pages",method:"POST",data:d})},j=async({pageDescription:e})=>{if(!e||0===e.trim().length)throw new Error("Page description cannot be empty");const t=await(e=>new Promise(((t,n)=>{const o=document.createElement("div");o.style.display="none",document.body.appendChild(o);let r,s=!1;const i=()=>{r&&clearTimeout(r),o.parentNode&&o.remove()},a=e=>{s||(s=!0,i(),e?t(e):n(new Error("Something went wrong while creating the page")))};r=setTimeout((()=>{s||a(null)}),18e4);try{(0,h.X)((0,w.jsx)(v,{onComplete:e=>{clearTimeout(r),a(e)},pageDescription:e}),o)}catch(e){clearTimeout(r),i(),n(e)}})))(e);if(!t?.id)throw new Error("Page creation failed");return{postId:Number(t.id)}}},9035:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var o=n(2619),r=n(7723);const s=e=>new Promise((t=>{const n=setInterval((()=>{document.querySelector(e)&&(clearInterval(n),t())}),50)})),i=e=>new Promise((t=>{const n=setInterval((()=>{document.querySelector(e)||(clearInterval(n),t())}),50)})),a={id:"library-tour",title:(0,r.__)("Design Library","extendify-local"),message:(0,r.__)("Tour the design library","extendify-local"),settings:{allowOverflow:!0,hideDotsNav:!0,startFrom:[window.extSharedData?.showAIPageCreation?window.extSharedData.adminUrl+"post-new.php?post_type=page&ext-page-creator-close=1":window.extSharedData.adminUrl+"post-new.php?post_type=page&ext-close=1",window.extSharedData.adminUrl+"post-new.php?post_type=page"]},onStart:async()=>{await s("#extendify-library-btn"),document.querySelector(`[aria-label="${(0,r.__)("Settings")}"].is-pressed`)?.click()},steps:[{title:(0,r.__)("Open the Pattern Library","extendify-local"),text:(0,r.__)("The Extendify pattern library can be opened by clicking the button to the left.","extendify-local"),attachTo:{element:'#extendify-library-btn [role="button"]',offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:()=>{}}},{title:(0,r.__)("Filter Patterns","extendify-local"),text:(0,r.__)("Click on any pattern category to refine the selection.","extendify-local"),attachTo:{element:"#extendify-library-category-control",position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},options:{allowPointerEvents:!0},events:{beforeAttach:async()=>(dispatchEvent(new CustomEvent("extendify::open-library")),await s("#extendify-library-category-control"))}},{title:(0,r.__)("Select a Pattern","extendify-local"),text:(0,r.__)("Simply select any pattern you wish to insert into a page by clicking on it.","extendify-local"),attachTo:{element:"#extendify-library-patterns-list",position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:async()=>{await s("#extendify-library-patterns-list")}}},{title:(0,r.__)("View the Inserted Pattern","extendify-local"),text:(0,r.__)("The selected pattern has been inserted into the page.","extendify-local"),attachTo:{element:".wp-block-group:last-child",frame:'iframe[name="editor-canvas"]',offset:{marginTop:15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top left":"top right"},events:{beforeAttach:async()=>(document.querySelector("#extendify-library-patterns-list .library-pattern")?.click(),await i("#extendify-library-patterns-list"))},options:{hideBackButton:!0}}]},l={id:"page-creator-tour",title:(0,r.__)("AI Page Generator","extendify-local"),message:(0,r.__)("Learn about the AI Page Generator","extendify-local"),settings:{allowOverflow:!0,hideDotsNav:!0,startFrom:[window.extSharedData?.showAIPageCreation?window.extSharedData.adminUrl+"post-new.php?post_type=page&ext-page-creator-close=1":window.extSharedData.adminUrl+"post-new.php?post_type=page&ext-close=1",window.extSharedData.adminUrl+"post-new.php?post_type=page"]},onStart:async()=>{await s('#extendify-page-creator-btn [role="button"]'),document.querySelector(`[aria-label="${(0,r.__)("Settings")}"].is-pressed`)?.click()},steps:[{title:(0,r.__)("AI Page Generator","extendify-local"),text:(0,r.__)("Press here to get started with your AI Page Generator.","extendify-local"),attachTo:{element:'#extendify-page-creator-btn [role="button"]',offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:async()=>{await s('#extendify-page-creator-btn [role="button"]')}}},{title:(0,r.__)("Page description","extendify-local"),text:(0,r.__)("Write a description of the page you want to create. Be as detailed as you like. We will create a page based on this description.","extendify-local"),attachTo:{element:"#extendify-page-creator-page-description",position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},options:{allowPointerEvents:!0},events:{beforeAttach:async()=>(dispatchEvent(new CustomEvent("extendify::open-page-creator")),await s("#extendify-page-creator-page-description"))}},{title:(0,r.__)("Site description","extendify-local"),text:(0,r.__)("If needed, update your site description here. We use this to add additional context about your website.","extendify-local"),attachTo:{element:"#extendify-page-creator-site-description",offset:{marginTop:-15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"bottom left":"bottom right"},events:{beforeAttach:async()=>{await s("#extendify-page-creator-site-description")}}},{title:(0,r.__)("Generate your page","extendify-local"),text:(0,r.__)("When ready, press here to generate your page.","extendify-local"),attachTo:{element:"#extendify-page-creator-generate-btn",offset:{marginTop:-15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"bottom left":"bottom right"},events:{beforeAttach:()=>{}},options:{hideBackButton:!0}}]};var c=n(4997);const d=()=>!!document.querySelector('iframe[name="editor-canvas"]'),u=e=>{var t;return null!==(t=13!==e.keyCode)&&void 0!==t?t:e.preventDefault()},p=(e="")=>`.edit-post-header-toolbar__inserter-toggle${e}, .editor-document-tools__inserter-toggle${e}`,m={id:"page-editor-tour",title:(0,r.__)("Page editor","extendify-local"),message:(0,r.__)("Tour the page editor","extendify-local"),settings:{allowOverflow:!0,startFrom:[window.extSharedData?.showAIPageCreation?window.extSharedData.adminUrl+"post-new.php?post_type=page&ext-page-creator-close=1":window.extSharedData.adminUrl+"post-new.php?post_type=page&ext-close=1",window.extSharedData.adminUrl+"post-new.php?post_type=page"]},steps:[{title:(0,r.__)("Add a Block","extendify-local"),text:(0,r.__)("Click the plus to open the block inserter.","extendify-local"),attachTo:{element:p(),offset:{marginTop:15,marginLeft:0},position:{x:(0,r.isRTL)()?"right":"left",y:"bottom"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:async()=>await s(p())}},{title:(0,r.__)("Block Inserter","extendify-local"),text:(0,r.__)("Add a block by clicking or dragging it onto the page.","extendify-local"),attachTo:{element:".block-editor-inserter__menu",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:async()=>(document.querySelector(p(":not(.is-pressed)"))?.click(),await s(".block-editor-tabbed-sidebar")),onAttach:()=>{const e=document.querySelector(p());g.observe(e,{attributes:!0}),window.addEventListener("keydown",u)},onDetach:async()=>{g.disconnect(),window.removeEventListener("keydown",u),document.querySelector(p(".is-pressed"))?.click(),await i(".block-editor-inserter__block-list")}}},{title:(0,r.__)("Page Title","extendify-local"),text:(0,r.__)("Edit the page title by clicking it. Note: The title may or may not show up on the published page, depending on the page template used.","extendify-local"),attachTo:{element:()=>d()?'iframe[name="editor-canvas"]':".wp-block-post-title",offset:()=>({marginTop:d()?15:0,marginLeft:(0,r.isRTL)()?d()?15:-15:d()?-15:15}),position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:()=>(0,r.isRTL)()?d()?"top left":"top right":d()?"top right":"top left"},events:{beforeAttach:async()=>{await window.wp.data.dispatch("core/editor").editPost({title:"Sample Post"})}}},{title:(0,r.__)("Blocks","extendify-local"),text:(0,r.__)("Each block will show up on the page and can be edited by clicking on it.","extendify-local"),attachTo:{element:()=>d()?'iframe[name="editor-canvas"]':".wp-block-post-content > p",offset:()=>({marginTop:d()?15:0,marginLeft:(0,r.isRTL)()?d()?15:-15:d()?-15:15}),position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:()=>(0,r.isRTL)()?d()?"top left":"top right":d()?"top right":"top left"},events:{beforeAttach:async()=>{if(await window.wp.data.select("core/block-editor").getBlockCount()>0)return;const e=(0,c.createBlock)("core/paragraph",{content:(0,r.__)("This is a sample paragraph block. It can be several sentences long and will span multiple rows. You can add as many blocks as you'd like to the page.","extendify-local")});return await window.wp.data.dispatch("core/block-editor").insertBlock(e),d()?await window.wp.data.dispatch("core/block-editor").flashBlock(e.clientId):null}}},{title:(0,r.__)("Page and Block Settings","extendify-local"),text:(0,r.__)("Select either page or block to change the settings for the entire page or the block that is selected.","extendify-local"),attachTo:{element:".interface-interface-skeleton__sidebar",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?15:-15},position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top left":"top right"},events:{beforeAttach:async()=>{const e=document.querySelector(`[aria-label="${(0,r.__)("Settings")}"]:not(.is-pressed)`);e?e?.click():document.querySelector('[aria-label="Settings"]:not(.is-pressed)')?.click(),await s(".interface-interface-skeleton__sidebar"),document.querySelector('.edit-post-sidebar__panel-tab,[data-tab-id="edit-post/document"]')?.click(),await s(".editor-post-status"),document.querySelector(".edit-post-post-status button")?.click()}}},{title:(0,r.__)("Preview","extendify-local"),text:(0,r.__)("Click preview to view how your changes look on the front end of your site.","extendify-local"),attachTo:{element:".block-editor-post-preview__button-toggle,.editor-preview-dropdown__toggle",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?15:-15},position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}},{title:(0,r.__)("Publish or Save","extendify-local"),text:(0,r.__)("Click publish or update to save the changes you have made to the page and make them live on the site.","extendify-local"),attachTo:{element:".editor-post-publish-button__button",offset:{marginTop:15},position:{x:(0,r.isRTL)()?"left":"right",y:"bottom"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}}]},g=new MutationObserver((()=>{document.querySelector(p(":not(.is-pressed)"))?.click()})),f={id:"plugin-install-tour",title:(0,r.__)("Installing a plugin","extendify-local"),message:(0,r.__)("See how to install a plugin","extendify-local"),settings:{allowOverflow:!1,startFrom:[window.extSharedData.adminUrl+"plugin-install.php"]},onStart:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-plugins").classList.add("opensub")},steps:[{title:(0,r.__)("Add New plugin menu","extendify-local"),text:(0,r.__)("Click here to access the Add Plugins page.","extendify-local"),attachTo:{element:'#menu-plugins .wp-submenu a[href="plugin-install.php"]',offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onDetach:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-plugins").classList.remove("opensub")}}},{title:(0,r.__)("Search","extendify-local"),text:(0,r.__)("Search for a plugin by name or functionality.","extendify-local"),attachTo:{element:".search-form.search-plugins",offset:{marginTop:5,marginLeft:(0,r.isRTL)()?350:-350},boxPadding:{top:-5,bottom:3,left:5,right:5},position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Plugin details","extendify-local"),text:(0,r.__)("See important information about each plugin.","extendify-local"),attachTo:{element:"#the-list .plugin-card:first-child .plugin-card-bottom",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"bottom"},hook:(0,r.isRTL)()?"bottom right":"bottom left"},events:{}},{title:(0,r.__)("Install now","extendify-local"),text:(0,r.__)("Install the plugin. Then, press this button again to activate the plugin.","extendify-local"),attachTo:{element:"#the-list .plugin-card:first-child .install-now",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?-15:15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Upload Plugin","extendify-local"),text:(0,r.__)("If you have a plugin from an external source, you can upload it directly here.","extendify-local"),attachTo:{element:".upload-view-toggle",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?-15:15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}}]},h={id:"plugin-management-tour",title:(0,r.__)("Plugin management","extendify-local"),message:(0,r.__)("Learn how to manage plugins","extendify-local"),settings:{allowOverflow:!1,startFrom:[window.extSharedData.adminUrl+"plugins.php"]},onStart:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-plugins").classList.add("opensub")},steps:[{title:(0,r.__)("Installed Plugins menu","extendify-local"),text:(0,r.__)("Click this menu to see and manage the plugins you have installed.","extendify-local"),attachTo:{element:"#menu-plugins ul > li:nth-child(2)",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onDetach:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-plugins").classList.remove("opensub")}}},{title:(0,r.__)("Installed plugins","extendify-local"),text:(0,r.__)("See all plugins installed on your site. This includes plugins that are active and deactivated.","extendify-local"),attachTo:{element:"tbody#the-list > tr:nth-child(1)",offset:{marginTop:15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"bottom"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}},{title:(0,r.__)("Deactivate/activate option","extendify-local"),text:(0,r.__)("Under each plugin you can activate or deactivate it.","extendify-local"),attachTo:{element:"tbody#the-list > tr:nth-child(1) > td.plugin-title",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Add another","extendify-local"),text:(0,r.__)("Click here to add another plugin to your site.","extendify-local"),attachTo:{element:"a.page-title-action",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?-15:15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}}]},x={id:"site-assistant-tour",title:(0,r.__)("Site Assistant","extendify-local"),message:(0,r.__)("Tour the Site Assistant","extendify-local"),settings:{allowOverflow:!1,startFrom:[`${window.extSharedData.adminUrl}admin.php?page=extendify-assist#dashboard`]},steps:[{title:(0,r.__)("Tasks","extendify-local"),text:(0,r.__)("Now that you've created your starter site, make it your own with these follow up tasks.","extendify-local"),showOnlyIf:()=>document.getElementById("assist-tasks-module"),attachTo:{element:"#assist-tasks-module",offset:{marginTop:window.innerWidth<=1151?-15:2,marginLeft:window.innerWidth<=1151?-25:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Quick Links","extendify-local"),text:(0,r.__)("Easily access some of the most common items in WordPress with these quick links.","extendify-local"),attachTo:{element:"#assist-quick-links-module",offset:{marginTop:window.innerWidth<=1151?-15:2,marginLeft:window.innerWidth<=1151?-25:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onAttach:()=>{}}},{title:(0,r.__)("Website Tools & Plugins","extendify-local"),text:(0,r.__)("See our personalized recommendations for you that will help you accomplish your goals.","extendify-local"),showOnlyIf:()=>document.querySelector("#assist-recommendations-module"),attachTo:{element:"#assist-recommendations-module",offset:{marginTop:window.innerWidth<=1151?-15:2,marginLeft:window.innerWidth<=1151?-25:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Visit your site","extendify-local"),text:(0,r.__)("You can always visit your site by clicking this button.","extendify-local"),attachTo:{element:"#assist-menu-bar",offset:{marginTop:20,marginLeft:(0,r.isRTL)()?5:-5},position:{x:(0,r.isRTL)()?"right":"left",y:"bottom"},hook:(0,r.isRTL)()?"top right":"top left",boxPadding:{top:5,bottom:5,left:5,right:5}},events:{}},{title:(0,r.__)("Site Assistant","extendify-local"),text:(0,r.__)("Come back to the Site Assistant any time by clicking the menu item.","extendify-local"),attachTo:{element:"#toplevel_page_extendify-assist",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onAttach:()=>{document.body.classList.contains("folded")&&(document.body.classList.remove("folded"),document.body.classList.add("temp-open"))},onDetach:()=>{document.body.classList.contains("temp-open")&&(document.body.classList.remove("temp-open"),document.body.classList.add("folded"))}}}]},y={"plugin-install-tour":f,"plugin-management-tour":h,"page-editor-tour":m,"library-tour":a,"users-screen-tour":{id:"users-screen-tour",title:(0,r.__)("Users screen","extendify-local"),message:(0,r.__)("Tour the Users screen","extendify-local"),settings:{allowOverflow:!0,startFrom:[window.extSharedData.adminUrl+"users.php"]},onStart:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-users").classList.add("opensub")},steps:[{title:(0,r.__)("All Users menu","extendify-local"),text:(0,r.__)("Click here to view and manage the users on your site.","extendify-local"),attachTo:{element:"#menu-users ul > li:nth-child(2)",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onDetach:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-users").classList.remove("opensub")}}},{title:(0,r.__)("Users","extendify-local"),text:(0,r.__)("See all of your users, including admin users in this table.","extendify-local"),attachTo:{element:"tbody#the-list > tr:nth-child(1)",offset:{marginTop:15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"bottom"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}},{title:(0,r.__)("Edit user information","extendify-local"),text:(0,r.__)("Click the edit button to change the user's role, manage their account, or change their profile information.","extendify-local"),attachTo:{element:"tbody#the-list > tr:nth-child(1) > td.username",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onAttach:()=>{document.querySelector("tbody#the-list > tr:nth-child(1) > td.username .row-actions").style.left="0"},onDetach:()=>{document.querySelector("tbody#the-list > tr:nth-child(1) > td.username .row-actions").style.left="-9999em"}}},{title:(0,r.__)("Search for users","extendify-local"),text:(0,r.__)("Use the search bar to find a particular user.","extendify-local"),attachTo:{element:"p.search-box",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?15:-15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}},{title:(0,r.__)("Add a new user","extendify-local"),text:(0,r.__)("Click the Add New button to add a new user to your site.","extendify-local"),attachTo:{element:".page-title-action",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?-15:15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}}]},"site-assistant-tour":x};(0,o.addFilter)("extendify.tours","extendify/extra-tours",(e=>window.extSharedData?.showAIPageCreation?{...e,"page-creator-tour":l}:e));const w=(0,o.applyFilters)("extendify.tours",y)},9050:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var o=n(7723),r=n(790),s=n(6427),i=n(6087),a=n(1455),l=n.n(a),c=n(4225);const d=async()=>{const e=window.location.pathname,t=new URLSearchParams(window.location.search),n=e.includes("/wp-admin/post.php")&&"edit"===t.get("action"),r=await l()({method:"GET",path:"/extendify/v1/agent/theme-variations"+(n?"":"?includeLayoutStyles")});if(!r||!Array.isArray(r))throw new Error((0,o.__)("Failed to fetch theme variations.","extendify-local"));return{variations:r.reduce(((e,t)=>(e.some((e=>e.title===t.title))||e.push(t),e)),[])}};var u=n(4997),p=n(7143),m=n(1548),g=n(7584);const f="global-styles-inline-css",h=window.location.pathname,x=new URLSearchParams(window.location.search),y=h.includes("/wp-admin/post.php")&&"edit"===x.get("action");var w=n(8459);const b=(e,t)=>e?.color?.palette?.theme.find((e=>e.slug===t))?.color,v=e=>e?.color?.palette?.theme?.filter((e=>"background"!==e.slug))?.reduce(((e,t)=>(e.push(t.color),e)),[]),{context:k,abilities:j}=window.extAgentData,_={available:()=>j?.canEditThemes&&k?.hasThemeVariations,needsRedirect:()=>!Number(k?.postId||0),redirectComponent:()=>(0,r.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,r.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white p-3",children:(0,r.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,o.__)("Hey there! It looks like you are trying to change your theme colors, but you are not on a page where we can do that.","extendify-local")})}),(0,r.jsxs)("div",{className:"m-0 p-3 text-sm text-gray-900",children:[(0,o.__)("Suggestion:","extendify-local")," ",(0,r.jsx)("a",{href:`${window.extSharedData.homeUrl}`,children:(0,o.__)("Home page","extendify-local")})]})]}),id:"change-theme-variation",whenFinished:{component:({onConfirm:e,onCancel:t})=>{const[n,a]=(0,i.useState)(""),[l,h]=(0,i.useState)(null),[x,k]=(0,i.useState)(null),{undoChange:j}=(({css:e,duotoneTheme:t})=>{const n=(0,i.useRef)(null),o=(0,i.useRef)(null),[r,s]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!e||y)return;const t=document.getElementById(f);t&&(n.current||(n.current=t.innerHTML),t.innerHTML=e)}),[e]),(0,i.useEffect)((()=>{if(!e||!r||!y)return;const t=r.getElementById(f),n=document.querySelector('iframe[name="editor-canvas"]');t.innerHTML=e.replaceAll(":root",n?":root":".editor-styles-wrapper")}),[e,r]),(0,i.useEffect)((()=>{if(r)return;const e=setTimeout((()=>{if(r)return;const e=document.querySelector('iframe[name="editor-canvas"]'),t=e?.contentDocument||document;if(!t||!t.body)return;const n=t.createElement("style");n.id=f,t.body.appendChild(n),s(t)}),300);return()=>clearTimeout(e)}),[r]);const a=(0,p.useSelect)((e=>{var t;let n=null!==(t=e("core/block-editor")?.getBlocks?.())&&void 0!==t?t:[];if(n.find((e=>"core/template-part"===e.name))){const{getEditedPostContent:t}=e("core/editor");n=(0,u.parse)(t(),{})}return(0,m.w)(n)}),[]);return(0,i.useEffect)((()=>{t&&(o.current&&(o.current(),o.current=null),o.current=(0,g.T)({duotoneTheme:t,dynamicDuotone:a}))}),[t,a]),{undoChange:()=>{o.current&&(o.current(),o.current=null);const e=document.getElementById(f);if(e&&n.current&&(e.innerHTML=n.current),!y)return;const t=document.querySelector('iframe[name="editor-canvas"]'),r=t?.contentDocument||document;r?.getElementById(f)?.remove()}}})({css:n,duotoneTheme:x}),{variations:_,isLoading:T}=(()=>{const{data:e,error:t,isLoading:n}=(0,c.A)({key:"theme-variations",themeSlug:window.extAgentData.context.themeSlug},d);return{variations:e?.variations,error:t,isLoading:n}})(),L=!_||0===_.length,{addMessage:S,messages:C}=(0,w.L)(),N=(0,i.useMemo)((()=>_?_.sort((()=>Math.random()-.5)):[]),[_]);return(0,i.useEffect)((()=>{if(T||!L)return;const e=setTimeout((()=>t()),100),n=(0,o.__)("We were unable to find any colors for your theme","extendify-local"),r=C.at(-1)?.details?.content;
// translators: A chat message shown to the user
return n===r||S("message",{role:"assistant",content:n,error:!0}),()=>clearTimeout(e)}),[S,t,L,C,T]),T?(0,r.jsx)("div",{className:"min-h-24 p-2 text-center text-sm",children:(0,o.__)("Loading available colors...","extendify-local")}):L?null:(0,r.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,r.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2 p-3",children:N?.slice(0,10)?.map((({title:e,css:t,settings:n})=>(0,r.jsx)(s.Tooltip,{text:e,placement:"top",children:(0,r.jsx)("button",{style:{backgroundColor:b(n,"background")},type:"button",className:"relative flex w-full items-center justify-center overflow-hidden rounded-lg border border-gray-300 bg-none p-2 text-center text-sm "+(l===e?"ring-wp ring-design-main":""),onClick:()=>{h(e),a(t),k(n?.color?.duotone?.theme)},children:(0,r.jsx)("div",{className:"flex max-w-fit items-center justify-center -space-x-4 rounded-lg rtl:space-x-reverse",children:v(n)?.map(((t,n)=>(0,r.jsx)("div",{style:{backgroundColor:t},className:"size-6 flex-shrink-0 overflow-visible rounded-full border border-white md:size-7"},e+t+n)))})})},e)))})}),(0,r.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,r.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:()=>{j(),t()},children:(0,o.__)("Cancel","extendify-local")}),(0,r.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",disabled:!l,onClick:()=>{l&&e({data:{variation:_.find((e=>e.title===l))},shouldRefreshPage:!0})},children:(0,o.__)("Save","extendify-local")})]})]})}}}},9133:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});const o=()=>({success:!0})},9333:(e,t,n)=>{"use strict";n.d(t,{L:()=>r,Y:()=>i});const o=n(1528),r=o.keys().filter((e=>"./workflows.js"!==e)).map((e=>o(e).default||o(e))),s=n(205),i=s.keys().reduce(((e,t)=>(e[t.split("/").pop().replace(".js","")]=s(t).default||s(t),e)),{})},9363:e=>{"use strict";e.exports=window.wp.blockLibrary},9586:(e,t,n)=>{"use strict";n.r(t),n.d(t,{allowedSettings:()=>i,default:()=>a});var o=n(7723),r=n(790);const{abilities:s}=window.extAgentData,i=["posts_per_page","use_smilies","start_of_week","time_format","date_format","title","description"],a={available:()=>s?.canEditSettings,id:"edit-wp-setting",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>(0,r.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,r.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,o.__)("Apply this setting change?","extendify-local")})})}),(0,r.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,r.jsx)("button",{type:"button",className:"w-full rounded border border-gray-300 bg-white p-2 text-sm text-gray-700",onClick:n,children:(0,o.__)("Cancel","extendify-local")}),(0,r.jsx)("button",{type:"button",className:"w-full rounded border border-design-main bg-design-main p-2 text-sm text-white",onClick:()=>{t({data:e,shouldRefreshPage:!0})},children:(0,o.__)("Confirm","extendify-local")})]})]})}}},9665:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o),s=n(6939);const i=async()=>{const e=await r()({path:"/wp/v2/global-styles/themes/extendable?context=edit"}),t=e?.styles;if(!t?.blocks)return null;const n=await r()({path:"/extendify/v1/launch/options?option=extendify_siteStyle"}),o=n?.data?.vibe;return{vibes:a(t),css:{...s},currentVibe:o||"natural-1"}},a=e=>{if(!e?.blocks)return[];const t=new Set,{blocks:n}=e;for(const e of Object.values(n))if(e?.variations)for(const n of Object.keys(e.variations)){if(!n.startsWith("ext-preset--"))continue;const e=n.split("--");if(e.length>=4){const n=e[2];n&&t.add(n)}}return Array.from(t).map((e=>({name:l(e),slug:e})))},l=e=>e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},9982:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),r=n.n(o);const s={page:"pages",post:"posts"},i=async({postId:e,postType:t,updatedStatus:n})=>{const o=s[t]||t;return await r()({path:`/wp/v2/${o}/${e}?context=edit`,method:"POST",data:{status:n}})}}},e=>{e.O(0,[65,223],(()=>e(e.s=5362))),e.O()}]);
(globalThis.webpackChunkextendify=globalThis.webpackChunkextendify||[]).push([[671],{7610(e,t,n){"use strict";var o=n(8459),s=n(1621),r=n(7134);const i={x:window.innerWidth-410-20,y:window.innerHeight-600,width:410,height:600},a=(0,s.vt)()((0,r.Zr)((0,r.lt)(e=>({...i,setSize:(t,n)=>e({width:t,height:n}),setPosition:(t,n)=>e({x:t,y:n}),resetPosition:()=>e({...i,y:window.innerHeight-600})}),{name:"Extendify Agent Position"}),{name:`extendify-agent-position-${window.extSharedData.siteId}`}));var l=n(8443);const c=(0,s.vt)()((0,r.Zr)((0,r.lt)((e,t)=>({retryAfter:void 0,open:!0,minimized:!1,seenToolTips:[],showSuggestions:!0,mode:"floating",queuedTour:null,scratch:{},isMobile:window.innerWidth<768,setIsMobile:n=>{t().isMobile!==n&&e({isMobile:n})},queueTourForRedirect:t=>e({queuedTour:t}),clearQueuedTour:()=>e({queuedTour:null}),setOpen:t=>{t||(a.getState().resetPosition(),window.dispatchEvent(new CustomEvent("extendify-agent:cancel-workflow"))),e({open:t})},setMinimized:n=>{t().minimized!==n&&e({minimized:n})},setShowSuggestions:t=>e({showSuggestions:t}),toggleOpen:()=>e(e=>(e.open||a.getState().resetPosition(),{open:!e.open})),setSeenToolTip:t=>e(e=>e.seenToolTips.includes(t)?e:{seenToolTips:[...e.seenToolTips,t]}),updateRetryAfter:t=>e({retryAfter:t}),isChatAvailable:()=>{const{retryAfter:n}=t();if(!n)return!0;const o=(0,l.isInTheFuture)(new Date(Number(n)));return o||e({retryAfter:void 0}),!o},setScratch:(t,n)=>e(e=>({scratch:{...e.scratch,[t]:n}})),getScratch:e=>t().scratch[e]||null,deleteScratch:t=>e(e=>{const{[t]:n,...o}=e.scratch;return{scratch:o}})}),{name:"Extendify Agent Global"}),{name:`extendify-agent-global-${window.extSharedData.siteId}`,partialize:e=>{const{showSuggestions:t,isMobile:n,...o}=e;return{...o}}}));var d=n(3410),u=n(9333),m=n(8969);const p={...Object.fromEntries(Object.entries(window.extSharedData).filter(([e])=>["partnerId","devbuild","version","siteId","wpLanguage","wpVersion","siteProfile"].includes(e)))},g=()=>{const{x:e,y:t,width:n,height:o}=c.getState();return{userAgent:window?.navigator?.userAgent,vendor:window?.navigator?.vendor||"unknown",platform:window?.navigator?.userAgentData?.platform||window?.navigator?.platform||"unknown",mobile:window?.navigator?.userAgentData?.mobile,width:window.innerWidth,height:window.innerHeight,screenHeight:window.screen.height,screenWidth:window.screen.width,orientation:window.screen.orientation?.type,touchSupport:"ontouchstart"in window||navigator.maxTouchPoints>0,agentUI:{x:e,y:t,width:n,height:o}}},f=async({tool:e,inputs:t})=>{if(!u.Y[e])throw new Error(`Tool ${e} not found`);return await u.Y[e](t)},h=({error:e,sessionId:t,caller:n,additional:o={}})=>{if(!0===Boolean(p?.devbuild))return;const s={message:e.response?.statusText?e.response?.statusText||e.response.message||"Unknown error":"string"==typeof e?e:e?.message||"Unknown error",name:e?.name};return fetch(`${m.AY}/api/agent/digest`,{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify({...p,phpVersion:window.extSharedData?.phpVersion,sessionId:t,error:s,browser:{userAgent:window.navigator?.userAgent,vendor:window.navigator?.vendor,platform:window.navigator?.platform,width:window.innerWidth,height:window.innerHeight,touchSupport:"ontouchstart"in window||navigator.maxTouchPoints>0},caller:n,...o,extra:g()})}).catch(()=>{})};var x=n(6087);const y=e=>{const[t,n]=(0,x.useState)(null);return(0,x.useEffect)(()=>{let t=document.getElementById(e);return t||(t=Object.assign(document.createElement("div"),{className:"extendify-agent"}),t.id=e,document.getElementById("extendify-agent-main").prepend(t)),n(t),()=>t.remove()},[e]),t};var w=n(1455),b=n.n(w),v=n(6427),j=n(7723),k=n(319),_=n(2023),S=n(3832),T=n(8845),L=n(790);const C=["[data-extendify-agent-block-id]","[data-extendify-part-block-id]",".wp-block-navigation"].join(", "),N=["wp-block-video","wp-block-spacer","wp-block-post-*"],E="data-extendify-agent-block-selected",A="extendify-agent-highlighter-mode",P=({busy:e=!1})=>{const[t,n]=(0,x.useState)(null),o=y("extendify-agent-dom-mount"),s=(0,x.useRef)(null),r=(0,x.useRef)(null),{getWorkflowsByFeature:i,block:a,setBlock:l,setBlockCode:c}=(0,d.Y)(),u=i({requires:["block"]})?.length>0,m=(0,x.useCallback)(()=>{l(null),n(null),r.current=null,document.querySelector(A)?.classList.remove(A),document.querySelector(`[${E}]`)?.removeAttribute(E)},[l,n]);if((0,x.useEffect)(()=>{if(!a?.id)return;const e=new AbortController,t=window.extAgentData?.context?.postId;if(!t)return;const n={postId:String(t),blockId:String(a.id)},o={current:!0};return(async()=>{const t=await b()({path:(0,S.addQueryArgs)("extendify/v1/agent/get-block-code",n),signal:e.signal}).catch(()=>({}));t.block&&o.current&&!e.signal.aborted&&c(t.block)})(),()=>{e.abort(),o.current=!1}},[c,a]),(0,x.useEffect)(()=>{const e=()=>{n(null),r.current=null};return window.addEventListener("extendify-agent:remove-block-highlight",e),()=>window.removeEventListener("extendify-agent:remove-block-highlight",e)},[]),(0,x.useEffect)(()=>{if(e||a)return;if(!o||!u)return n(null);const t=e=>{s.current||(s.current=requestAnimationFrame(()=>{s.current=null;const t=e.target;if(!t)return n(null);const o=t.closest(C);if(!o)return n(null);const i=N.map(e=>e.replace("*",".*")).join("|"),a=new RegExp(`^(${i})$`);if(Array.from(o.classList).some(e=>a.test(e)))return n(null);const l=Array.from(o.querySelectorAll(C)).filter(e=>!N.some(t=>e.classList.contains(t))).length;if(l>50)return n(null);r.current=o;const c=o.getBoundingClientRect();if(c.width<=0||c.height<=0)return n(null);const{top:d,left:u,width:m,height:p}=c;n({top:d,left:u,width:m,height:p})}))};return window.addEventListener("mousemove",t,{passive:!0}),()=>{window.removeEventListener("mousemove",t),s.current&&cancelAnimationFrame(s.current)}},[e,o,u,a]),(0,x.useEffect)(()=>{const e=()=>{if(!r.current)return;const{top:e,left:t,width:o,height:s}=r.current.getBoundingClientRect();n({top:e,left:t,width:o,height:s})};return window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[r]),(0,x.useEffect)(()=>{if(!u||e)return;const n=n=>{if(!t||e)return;if(n.target.closest("#extendify-agent-chat"))return;const o=document.elementsFromPoint(n.clientX,n.clientY)||[];if(!o[0])return;n.preventDefault(),n.stopPropagation();const s=o[0].closest(C);if(!s&&!a)return;const r=s?.hasAttribute(E);if(a&&!r)return m();if(a&&r)return;s.setAttribute(E,!0),document.querySelector("#extendify-agent-chat-textarea")?.focus();const i=s.closest("[data-extendify-part]"),c={id:s.getAttribute("data-extendify-agent-block-id"),target:"data-extendify-agent-block-id",hasNav:Boolean(s.querySelector(".wp-block-navigation"))||s.classList.contains("wp-block-navigation"),hasSiteTitle:s.classList.contains("wp-block-site-title")||Boolean(s.querySelector(".wp-block-site-title")),hasSiteLogo:s.classList.contains("wp-block-site-logo")||Boolean(s.querySelector(".wp-block-site-logo")),hasLinks:Boolean(s.querySelector("a"))||"A"===s.tagName,hasImages:Boolean(s.querySelector(".wp-block-image"))||s.classList.contains("wp-block-image")||Boolean(s.querySelector("img")),hasText:/\S/.test((s.textContent||"").replace(/\u200B/g,""))};i&&(c.id=i.getAttribute("data-extendify-part-block-id"),c.target="data-extendify-part-block-id",c.template=i.getAttribute("data-extendify-part")),l(c)};return window.addEventListener("click",n,{capture:!0}),()=>window.removeEventListener("click",n,{capture:!0})},[u,l,t,m,a,e]),(0,x.useEffect)(()=>{if(!r.current)return;const e=new ResizeObserver(()=>{if(!r.current)return;const{top:e,left:t,width:o,height:s}=r.current.getBoundingClientRect();n({top:e,left:t,width:o,height:s})});return e.observe(r.current),()=>{e.disconnect()}},[r.current]),(0,x.useEffect)(()=>{if(!u)return;const e=document.querySelector(".wp-site-blocks");return e?(e.classList.add("extendify-agent-highlighter-mode"),()=>e.classList.remove("extendify-agent-highlighter-mode")):void 0},[u]),(0,x.useEffect)(()=>{if(!e)return;const t=document.querySelector(".wp-site-blocks");return t?(t.classList.add("extendify-agent-busy"),()=>t.classList.remove("extendify-agent-busy")):void 0},[e]),!u||!t||!o)return null;const{top:p,left:g,width:f,height:h}=t,w={x:g,y:p,width:f,height:h,opacity:1};return(0,x.createPortal)((0,L.jsxs)(L.Fragment,{children:[a&&!e?(0,L.jsx)(v.Tooltip,{text:(0,j.__)("Remove highlight","extendify-local"),children:(0,L.jsxs)("div",{role:"button",className:"fixed z-higher h-6 w-6 -translate-y-3.5 cursor-pointer select-none flex items-center justify-center rounded-full text-center font-bold ring-1 ring-black",tabIndex:0,onClick:()=>l(null),onKeyDown:()=>l(null),style:{top:p,left:f/2+g-12,backgroundColor:"var(--wp--preset--color--primary, red)",color:"var(--wp--preset--color--background, white)"},children:[(0,L.jsx)(k.A,{className:"pointer-events-none fill-current leading-none",icon:_.A,size:18}),(0,L.jsx)("span",{className:"sr-only",children:(0,j.__)("Remove highlight","extendify-local")})]})}):null,(0,L.jsx)(T.P.div,{initial:!1,"aria-hidden":!0,animate:w,transition:{type:"spring",stiffness:700,damping:40,mass:.25},className:"fixed z-high-1 mix-blend-hard-light outline-dashed outline-4",style:{top:0,left:0,willChange:"transform,width,height,opacity",outlineColor:"var(--wp--preset--color--primary, red)",pointerEvents:a&&!e?"auto":"none"}})]}),o)};var I=n(6748),R=n(6221);const D=({children:e})=>{const[t,n]=(0,x.useState)(null),o=y("extendify-agent-mount"),{open:s,setOpen:r}=c(),i=(0,x.useCallback)(e=>requestAnimationFrame(()=>n(e)),[]);return(({el:e,open:t,initialPosition:n,onDragEnd:o})=>{const s=(0,x.useRef)({x:0,y:0}),r=(0,x.useRef)(null),i=(0,x.useRef)({x:n.x,y:n.y});(0,x.useLayoutEffect)(()=>{if(!e)return;const t=requestAnimationFrame(()=>{e.style.setProperty("left",`${n.x}px`,"important"),e.style.setProperty("top",`${n.y}px`,"important")});return()=>cancelAnimationFrame(t)},[e,n]),(0,x.useLayoutEffect)(()=>{if(!e||!t)return;const n=window.innerWidth-e.offsetWidth,o=window.innerHeight-e.offsetHeight,s=parseFloat(e.style.left)||0,r=parseFloat(e.style.top)||0,i=(0,I.qE)(s,0,n),a=(0,I.qE)(r,0,o);s===i&&r===a||(e.style.setProperty("left",`${i}px`,"important"),e.style.setProperty("top",`${a}px`,"important"))},[e,t]),(0,x.useLayoutEffect)(()=>{const a=document.getElementById("wpwrap")||document.querySelector(".wp-site-blocks");if(!e||!t||!a)return;const l=e.querySelector("[data-extendify-agent-handle]");if(!(l instanceof HTMLElement))return;e.style.setProperty("left",`${n.x}px`,"important"),e.style.setProperty("top",`${n.y}px`,"important");const c=t=>{t.preventDefault(),t.stopPropagation(),a.style.pointerEvents="none",null===r.current&&(r.current=t.pointerId,l.setPointerCapture(t.pointerId),s.current={x:t.clientX-e.offsetLeft,y:t.clientY-e.offsetTop},document.addEventListener("pointermove",d),document.addEventListener("pointerup",u))},d=t=>{const n=window.innerWidth-l.offsetWidth,o=window.innerHeight-l.offsetHeight,r=(0,I.qE)(t.clientX-s.current.x,0,n),a=(0,I.qE)(t.clientY-s.current.y,0,o);e.style.setProperty("left",`${r}px`,"important"),e.style.setProperty("top",`${a}px`,"important"),i.current={x:r,y:a}},u=e=>{a.style.pointerEvents="auto",r.current===e.pointerId&&(r.current=null,l.releasePointerCapture(e.pointerId),document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),o(i.current.x,i.current.y))},m=()=>u(new PointerEvent("pointerup")),p=e=>(e.preventDefault(),e.stopPropagation(),!1);return l.addEventListener("pointerdown",c),l.addEventListener("contextmenu",p),l.addEventListener("blur",m),()=>{l.removeEventListener("pointerdown",c),l.removeEventListener("blur",m),l.removeEventListener("contextmenu",p),document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),a.style.pointerEvents="auto",null!==r.current&&(l.releasePointerCapture(r.current),r.current=null)}},[e,t,n.x,n.y,o])})({el:t,open:s,initialPosition:a.getState(),onDragEnd:(e,t)=>{a.getState().setPosition(e,t),window.dispatchEvent(new CustomEvent("extendify-agent:drag-end",{detail:{x:e,y:t}}))}}),(({el:e,open:t,initialSize:n,onResizeEnd:o,minWidth:s=250,minHeight:r=400,maxWidth:i=500,maxHeight:a=window.innerHeight})=>{const l=(0,x.useRef)({x:0,y:0,width:0,height:0}),c=(0,x.useRef)(null);(0,x.useLayoutEffect)(()=>{const d=document.getElementById("wpwrap")||document.querySelector(".wp-site-blocks");if(!e||!t||!d)return;e.style.width=`${n.width}px`,e.style.height=`${n.height}px`;const u=e.querySelector("[data-extendify-agent-resize]");if(!(u instanceof HTMLElement))return;const m=t=>{t.preventDefault(),t.stopPropagation(),d.style.pointerEvents="none",null===c.current&&(c.current=t.pointerId,u.setPointerCapture(t.pointerId),l.current={x:t.clientX,y:t.clientY,width:e.offsetWidth,height:e.offsetHeight},document.addEventListener("pointermove",p),document.addEventListener("pointerup",g))},p=t=>{const n=e.getBoundingClientRect(),o=Math.min(i,window.innerWidth-n.left),c=Math.min(a,window.innerHeight-n.top),d=(0,I.qE)(l.current.width+(t.clientX-l.current.x),s,o),u=(0,I.qE)(l.current.height+(t.clientY-l.current.y),r,c);e.style.width=`${d}px`,e.style.height=`${u}px`},g=t=>{if(d.style.pointerEvents="auto",c.current!==t.pointerId)return;c.current=null,u.releasePointerCapture(t.pointerId),document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",g);const n=e.getBoundingClientRect(),m=Math.min(i,window.innerWidth-n.left),f=Math.min(a,window.innerHeight-n.top),h=(0,I.qE)(l.current.width+(t.clientX-l.current.x),s,m),x=(0,I.qE)(l.current.height+(t.clientY-l.current.y),r,f);o(h,x)};return u.addEventListener("pointerdown",m),()=>{u.removeEventListener("pointerdown",m),document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",g),d.style.pointerEvents="auto",null!==c.current&&(u.releasePointerCapture(c.current),c.current=null)}},[e,t,n.width,n.height,o,s,r,i,a])})({el:t,open:s,initialSize:a.getState(),onResizeEnd:(e,t)=>{a.setState({width:e,height:t}),window.dispatchEvent(new CustomEvent("extendify-agent:resize-end",{detail:{width:e,height:t}}))}}),(0,x.useEffect)(()=>{if(!t||!s)return;const e=new IntersectionObserver(e=>{e[0].isIntersecting||r(!1)});return e.observe(t),()=>e.disconnect()},[t,s,r]),o&&s?(0,x.createPortal)((0,L.jsx)(R.N,{children:(0,L.jsxs)(T.P.div,{id:"extendify-agent-popout-modal",initial:{opacity:0},animate:{opacity:1},exit:{y:0,opacity:0},transition:{duration:.4,delay:.1},className:"fixed bottom-0 right-0 z-higher flex max-h-full max-w-full flex-col rounded-lg border border-solid border-gray-300 bg-white shadow-2xl-flipped rtl:left-0 rtl:right-auto",ref:i,children:[(0,L.jsxs)("div",{className:"group flex shrink-0 items-center justify-between overflow-hidden rounded-t-[calc(0.5rem-1px)] bg-banner-main text-banner-text",children:[(0,L.jsxs)("div",{"data-extendify-agent-handle":!0,draggable:!0,className:"flex h-full grow cursor-grab active:cursor-grabbing select-none items-center justify-between gap-1 p-0 py-3",children:[(0,L.jsxs)("div",{className:"flex h-5 justify-center gap-2 px-4 rtl:after:right-0",children:[(0,L.jsx)("div",{className:"flex h-5 max-w-36 overflow-hidden",children:(0,L.jsx)("img",{className:"max-h-full max-w-full object-contain",src:window.extSharedData.partnerLogo,alt:window.extSharedData.partnerName})}),(0,L.jsx)("div",{className:"flex items-center rounded-lg bg-banner-text px-2 font-sans text-xs leading-none text-banner-main",children:(0,j._x)("beta","Feature in beta status","extendify-local")})]}),(0,L.jsx)("div",{className:"opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:(0,L.jsx)($,{})})]}),(0,L.jsx)(v.Tooltip,{text:(0,j.__)("Close window","extendify-local"),children:(0,L.jsxs)("button",{type:"button",className:"relative z-10 flex h-full items-center rounded-none border-0 bg-banner-main py-3 pe-4 ps-2 text-banner-text outline-hidden ring-design-main focus:shadow-none focus:outline-hidden focus-visible:outline-design-main",onClick:()=>{r(!1),window.dispatchEvent(new CustomEvent("extendify-agent:closed-button"))},children:[(0,L.jsx)(k.A,{className:"pointer-events-none fill-current leading-none",icon:_.A,size:18}),(0,L.jsx)("span",{className:"sr-only",children:(0,j.__)("Close window","extendify-local")})]})})]}),e,(0,L.jsx)("div",{"data-extendify-agent-resize":!0,className:"absolute -bottom-2 -right-2 z-high h-6 w-6 group",children:(0,L.jsx)("div",{className:"h-6 w-6 cursor-se-resize group-active:cursor-nwse-resize"})})]},"agent-popout-modal")}),o):null},$=e=>(0,L.jsxs)("div",{style:{userSelect:"none"},className:"relative flex",...e,children:[(0,L.jsx)(k.A,{className:"pointer-events-none text-banner-text",icon:(0,L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",className:"pointer-events-none","aria-hidden":"true",focusable:"false",children:(0,L.jsx)("path",{fill:"currentColor",d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})}),size:24}),(0,L.jsx)("span",{className:"sr-only",children:(0,j.__)("Drag to move","extendify-local")})]});var M=n(9383);const B=({children:e})=>{const t=y("extendify-agent-mount"),{minimized:n,setMinimized:o}=c();return(0,x.useEffect)(()=>{if(t&&!n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[t,n]),t?(0,x.createPortal)((0,L.jsxs)("div",{className:"fixed inset-0 z-max-1 items-center justify-center "+(n?"hidden":"flex"),"aria-hidden":n?"true":"false",children:[(0,L.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-black/70"}),(0,L.jsx)(R.N,{children:(0,L.jsxs)(T.P.div,{id:"extendify-agent-popout-modal",initial:{opacity:0},animate:{opacity:1},exit:{y:0,opacity:0},transition:{duration:.4,delay:.1},className:"fixed bottom-[2vh] z-high flex h-full max-h-[80vh] w-full max-w-[90vw] flex-col rounded-lg border border-solid border-gray-600 bg-white shadow-2xl-flipped rtl:left-0 rtl:right-auto",children:[(0,L.jsxs)("div",{className:"group flex shrink-0 items-center justify-between overflow-hidden rounded-t-[calc(0.5rem-1px)] bg-banner-main text-banner-text",children:[(0,L.jsx)("div",{className:"flex h-full grow items-center justify-between gap-1 p-0 py-3",children:(0,L.jsxs)("div",{className:"flex h-5 justify-center gap-2 px-4 rtl:after:right-0",children:[(0,L.jsx)("div",{className:"flex h-5 max-w-36 overflow-hidden",children:(0,L.jsx)("img",{className:"max-h-full max-w-full object-contain",src:window.extSharedData.partnerLogo,alt:window.extSharedData.partnerName})}),(0,L.jsx)("div",{className:"flex items-center rounded-lg bg-banner-text px-2 font-sans text-xs leading-none text-banner-main",children:(0,j._x)("beta","Feature in beta status","extendify-local")})]})}),(0,L.jsx)(v.Tooltip,{text:(0,j.__)("Minimize window","extendify-local"),children:(0,L.jsxs)("button",{type:"button",className:"relative z-10 flex h-full items-center rounded-none border-0 bg-banner-main py-3 pe-4 ps-2 text-banner-text outline-hidden ring-design-main focus:shadow-none focus:outline-hidden focus-visible:outline-design-main",onClick:()=>o(!0),children:[(0,L.jsx)(k.A,{className:"pointer-events-none fill-current leading-none",icon:M.A,size:24}),(0,L.jsx)("span",{className:"sr-only",children:(0,j.__)("Minimize window","extendify-local")})]})})]}),e]},"agent-popout-modal")})]}),t):null},q=({busy:e,children:t})=>{const{setIsMobile:n,isMobile:o}=c(),{domToolEnabled:s,block:r,setBlock:i,setDomToolEnabled:a}=(0,d.Y)();return(0,x.useEffect)(()=>{o&&r&&i(null)},[o,n,r,i]),(0,x.useEffect)(()=>{let e;const t=()=>{clearTimeout(e),e=window.setTimeout(()=>{n(window.innerWidth<783)},10)};return window.addEventListener("resize",t),()=>{clearTimeout(e),window.removeEventListener("resize",t)}},[n]),(0,x.useEffect)(()=>{const e=e=>{if("Escape"===e.key&&s){if(window.dispatchEvent(new CustomEvent("extendify-agent:cancel-workflow")),r)return i(null);a(!1)}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[s,r,i,a]),o?(0,L.jsx)(B,{children:(0,L.jsx)("div",{id:"extendify-agent-chat",className:"flex min-h-0 flex-1 grow flex-col font-sans",children:t})}):(0,L.jsxs)(D,{children:[(0,L.jsx)("div",{id:"extendify-agent-chat",className:"flex min-h-0 flex-1 grow flex-col font-sans",children:t}),s&&(0,L.jsx)(P,{busy:e})]})},F=(0,L.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsx)("title",{children:(0,j.__)("Magic Icon","extendify-local")}),(0,L.jsx)("path",{d:"M17.0909 9.81818L18 7.81818L20 6.90909L18 6L17.0909 4L16.1818 6L14.1818 6.90909L16.1818 7.81818L17.0909 9.81818Z",fill:"currentColor"}),(0,L.jsx)("path",{d:"M17.0909 14.1818L16.1818 16.1818L14.1818 17.0909L16.1818 18L17.0909 20L18 18L20 17.0909L18 16.1818L17.0909 14.1818Z",fill:"currentColor"}),(0,L.jsx)("path",{d:"M11.6364 10.1818L9.81818 6.18182L8 10.1818L4 12L8 13.8182L9.81818 17.8182L11.6364 13.8182L15.6364 12L11.6364 10.1818ZM10.5382 12.72L9.81818 14.3055L9.09818 12.72L7.51273 12L9.09818 11.28L9.81818 9.69455L10.5382 11.28L12.1236 12L10.5382 12.72Z",fill:"currentColor"})]}),O=(0,L.jsxs)(T.P.svg,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",overflow:"visible",xmlns:"http://www.w3.org/2000/svg",initial:"hidden",animate:"visible",children:[(0,L.jsx)("title",{children:(0,j.__)("Magic Sparkle Animation","extendify-local")}),(0,L.jsx)(T.P.path,{d:"M17.0909 9.81818L18 7.81818L20 6.90909L18 6L17.0909 4L16.1818 6L14.1818 6.90909L16.1818 7.81818L17.0909 9.81818Z",fill:"currentColor",variants:{hidden:{scale:1,opacity:.8},visible:{scale:[1,1.05,1],opacity:[1,.7,1],transition:{repeat:3,duration:1.2,delay:.2}}}}),(0,L.jsx)(T.P.path,{d:"M17.0909 14.1818L16.1818 16.1818L14.1818 17.0909L16.1818 18L17.0909 20L18 18L20 17.0909L18 16.1818L17.0909 14.1818Z",fill:"currentColor",variants:{hidden:{scale:1,opacity:.8},visible:{scale:[1,1.05,1],opacity:[1,.7,1],transition:{repeat:3,duration:1.2,delay:.6}}}}),(0,L.jsx)(T.P.path,{d:"M11.6364 10.1818L9.81818 6.18182L8 10.1818L4 12L8 13.8182L9.81818 17.8182L11.6364 13.8182L15.6364 12L11.6364 10.1818ZM10.5382 12.72L9.81818 14.3055L9.09818 12.72L7.51273 12L9.09818 11.28L9.81818 9.69455L10.5382 11.28L12.1236 12L10.5382 12.72Z",fill:"currentColor",variants:{hidden:{scale:1,opacity:.9},visible:{scale:[1,1.03,1],opacity:[1,.8,1],transition:{repeat:3,duration:1.2,delay:.4}}}}),(0,L.jsx)(T.P.circle,{cx:"6",cy:"6",r:"1.7",fill:"currentColor",initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:[.5,1,.5]},transition:{repeat:2,duration:2,delay:1.7}}),(0,L.jsx)(T.P.circle,{cx:"20",cy:"4",r:"1",fill:"currentColor",initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:[.5,1,.5]},transition:{repeat:3,duration:1.4,delay:.8}}),(0,L.jsx)(T.P.circle,{cx:"4",cy:"20",r:"0.7",fill:"currentColor",initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:[.5,1,.5]},transition:{repeat:3,duration:1.2,delay:1.4}})]}),H=(0,L.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsx)("title",{children:(0,j.__)("Thumb Down Icon","extendify-local")}),(0,L.jsx)("path",{d:"M14.1818 5H7.63636C7.03273 5 6.51636 5.36364 6.29818 5.88727L4.10182 11.0145C4.03636 11.1818 4 11.3564 4 11.5455V13C4 13.8 4.65455 14.4545 5.45455 14.4545H10.0436L9.35273 17.7782L9.33091 18.0109C9.33091 18.3091 9.45455 18.5855 9.65091 18.7818L10.4218 19.5455L15.2145 14.7527C15.4764 14.4909 15.6364 14.1273 15.6364 13.7273V6.45455C15.6364 5.65455 14.9818 5 14.1818 5ZM14.1818 13.7273L11.0255 16.8836L12 13H5.45455V11.5455L7.63636 6.45455H14.1818V13.7273ZM17.0909 5H20V13.7273H17.0909V5Z"})]}),z=(0,L.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsx)("title",{children:(0,j.__)("Thumb Up Icon","extendify-local")}),(0,L.jsx)("path",{d:"M9.81818 19.5455H16.3636C16.9673 19.5455 17.4836 19.1818 17.7018 18.6582L19.8982 13.5309C19.9636 13.3636 20 13.1891 20 13V11.5455C20 10.7455 19.3455 10.0909 18.5455 10.0909H13.9564L14.6473 6.76727L14.6691 6.53455C14.6691 6.23636 14.5455 5.96 14.3491 5.76364L13.5782 5L8.78545 9.79273C8.52364 10.0545 8.36364 10.4182 8.36364 10.8182V18.0909C8.36364 18.8909 9.01818 19.5455 9.81818 19.5455ZM9.81818 10.8182L12.9745 7.66182L12 11.5455H18.5455V13L16.3636 18.0909H9.81818V10.8182ZM4 10.8182H6.90909V19.5455H4V10.8182Z"})]}),W=(0,L.jsxs)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsx)("title",{children:(0,j.__)("Sparkle Icon","extendify-local")}),(0,L.jsx)("path",{d:"M16.4545 10.0909L17.25 8.34091L19 7.54545L17.25 6.75L16.4545 5L15.6591 6.75L13.9091 7.54545L15.6591 8.34091L16.4545 10.0909Z"}),(0,L.jsx)("path",{d:"M16.4545 13.9091L15.6591 15.6591L13.9091 16.4545L15.6591 17.25L16.4545 19L17.25 17.25L19 16.4545L17.25 15.6591L16.4545 13.9091Z"}),(0,L.jsx)("path",{d:"M11.6818 10.4091L10.0909 6.90909L8.5 10.4091L5 12L8.5 13.5909L10.0909 17.0909L11.6818 13.5909L15.1818 12L11.6818 10.4091ZM10.7209 12.63L10.0909 14.0173L9.46091 12.63L8.07364 12L9.46091 11.37L10.0909 9.98273L10.7209 11.37L12.1082 12L10.7209 12.63Z"})]}),U=(0,L.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsx)("title",{children:(0,j.__)("Tool Select Icon","extendify-local")}),(0,L.jsx)("path",{d:"M5 9V6C5 5.44772 5.44772 5 6 5H9",stroke:"currentColor",strokeWidth:"1.5"}),(0,L.jsx)("path",{d:"M17.9799 16.1255C17.9 16.1483 17.8203 16.1708 17.742 16.1958C17.3245 16.3292 16.8439 16.5227 16.4734 16.8175C16.1305 17.0903 15.8256 17.4777 15.5793 17.8342C15.5307 17.9046 15.4826 17.9763 15.4353 18.0489L14.3938 13.9163L17.9799 16.1255Z",stroke:"currentColor",strokeWidth:"2"}),(0,L.jsx)("path",{d:"M15 5L18 5C18.5523 5 19 5.44772 19 6L19 9",stroke:"currentColor",strokeWidth:"1.5"}),(0,L.jsx)("path",{d:"M9 19L6 19C5.44772 19 5 18.5523 5 18L5 15",stroke:"currentColor",strokeWidth:"1.5"})]}),V=(0,L.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsx)("title",{children:(0,j.__)("Selected Content Icon","extendify-local")}),(0,L.jsx)("path",{d:"M5 9V6C5 5.44772 5.44772 5 6 5H9",stroke:"currentColor",strokeWidth:"1.5"}),(0,L.jsx)("path",{d:"M19 15L19 18C19 18.5523 18.5523 19 18 19L15 19",stroke:"currentColor",strokeWidth:"1.5"}),(0,L.jsx)("path",{d:"M15 5L18 5C18.5523 5 19 5.44772 19 6L19 9",stroke:"currentColor",strokeWidth:"1.5"}),(0,L.jsx)("path",{d:"M9 19L6 19C5.44772 19 5 18.5523 5 18L5 15",stroke:"currentColor",strokeWidth:"1.5"}),(0,L.jsx)("path",{d:"M15 9H9V10.0588H15V9ZM9 11.4706H15V12.5294H9V11.4706ZM15 13.9412H9V15H15V13.9412Z",fill:"currentColor"})]}),Y=(0,L.jsxs)("svg",{height:"14",viewBox:"0 0 16 16",width:"14",style:{color:"currentcolor"},children:[(0,L.jsx)("title",{children:(0,j.__)("Cancel","extendify-local")}),(0,L.jsx)("path",{clipRule:"evenodd",d:"M3 3H13V13H3V3Z",fill:"currentColor",fillRule:"evenodd"})]});var Z=n(1037),G=n(6942),X=n.n(G);const K=({disabled:e=!1})=>{const{getWorkflowsByFeature:t,domToolEnabled:n,setDomToolEnabled:o}=(0,d.Y)();return t({requires:["block"]})?.length>0?(0,L.jsx)("div",{className:"flex items-center",children:(0,L.jsx)(v.Tooltip,{text:n?(0,j.__)("Exit select mode","extendify-local"):(0,j.__)("Select Area to Edit","extendify-local"),children:(0,L.jsxs)("button",{type:"button",disabled:e,className:X()("m-0 flex items-center rounded-sm border-0 px-1 py-0.5 leading-none disabled:opacity-50 text-gray-900",{"bg-gray-300":n,"bg-gray-100 text-gray-900":!n,"hover:bg-gray-200":!e}),onClick:()=>{window.dispatchEvent(new CustomEvent("extendify-agent:cancel-workflow")),o(!n)},children:[(0,L.jsx)(k.A,{size:24,icon:U}),(0,L.jsx)("span",{className:"px-1 text-sm font-medium",children:(0,j.__)("Select","extendify-local")}),n&&(0,L.jsx)(k.A,{size:20,icon:Z.A,className:"fill-current"})]})})}):null};var Q=n(4794);const J=({disabled:e,handleSubmit:t})=>{const n=(0,x.useRef)(null),[o,s]=(0,x.useState)(""),[r,i]=(0,x.useState)([]),a=(0,x.useRef)(!1),[l,u]=(0,x.useState)(null),{getWorkflowsByFeature:m,block:p}=(0,d.Y)(),{isMobile:g}=c(),f=m({requires:["block"]})?.length>0&&!g,h=o.trim().length>1500,y=(0,x.useCallback)(()=>{if(!n.current)return;n.current.style.height="auto";const e=.55*n.current.closest("#extendify-agent-chat").offsetHeight,t=Math.min(e,n.current.scrollHeight);n.current.style.height=`${p&&t<60?60:t}px`},[p]);(0,x.useLayoutEffect)(()=>(window.addEventListener("extendify-agent:resize-end",y),y(),()=>window.removeEventListener("extendify-agent:resize-end",y)),[y]),(0,x.useEffect)(()=>{const e=({detail:e})=>{i(t=>t?.at(-1)===e.message?t:[...t,e.message]),u(null)};return window.addEventListener("extendify-agent:chat-submit",e),()=>window.removeEventListener("extendify-agent:chat-submit",e)},[]),(0,x.useEffect)(()=>{y()},[o,y]),(0,x.useEffect)(()=>{const e=Array.from(document.querySelectorAll('#extendify-agent-chat-scroll-area > [data-agent-message-role="user"]'))?.map(e=>e.textContent||""),t=e.filter((e,t,n)=>0===t||e!==n[t-1]);i(t)},[]);const w=(0,x.useCallback)(e=>{e?.preventDefault(),o.trim()&&!h&&(t(o.trim()),i(e=>e?.at(-1)===o?e:[...e,o]),u(null),s(""),requestAnimationFrame(()=>{a.current=!1,y(),n.current?.focus()}))},[o,t,y,h]),b=(0,x.useCallback)(e=>{if("Enter"===e.key&&!e.shiftKey&&!e.nativeEvent.isComposing)return e.preventDefault(),void(h||w());if(!a.current){if("ArrowUp"===e.key){if(!r.length)return;if(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)return;return u(e=>{const t=null===e?r.length-1:Math.max(e-1,0);return s(r[t]),t}),void e.preventDefault()}if("ArrowDown"===e.key){if(null===l)return;if(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)return;return u(e=>{if(null===e)return null;const t=e+1;return t>=r.length?(s(""),null):(s(r[t]),t)}),void e.preventDefault()}a.current=!0}},[r,l,w,h]),v=(0,x.useCallback)(e=>{e.stopPropagation(),window.dispatchEvent(new CustomEvent("extendify-agent:cancel-workflow"))},[]);return(0,L.jsxs)("form",{onSubmit:w,onClick:()=>n.current?.focus(),className:X()("relative flex w-full flex-col rounded-sm border border-gray-300 focus-within:outline-design-main focus:rounded-sm focus:border-design-main focus:ring-design-main",{"bg-gray-300":e,"bg-gray-50":!e}),children:[(0,L.jsx)("textarea",{ref:n,id:"extendify-agent-chat-textarea",disabled:e,className:X()("flex max-h-[calc(75dvh)] min-h-10 w-full resize-none overflow-y-auto bg-transparent px-2 pb-4 pt-2.5 text-base placeholder:text-gray-700 focus:shadow-none focus:outline-hidden disabled:opacity-50 md:text-sm border-none text-gray-900"),placeholder:p?(0,j.__)("What do you want to change in the selected content?","extendify-local"):(0,j.__)("Ask anything","extendify-local"),rows:"1",autoFocus:!0,value:o,onChange:e=>{s(e.target.value),u(null),y()},onKeyDown:b}),(0,L.jsxs)("div",{className:"flex justify-between gap-4 px-2 pb-2",children:[f?(0,L.jsx)(K,{disabled:e}):null,(0,L.jsxs)("div",{className:"ms-auto flex items-center gap-2",children:[(0,L.jsx)("span",{className:X()("text-xs font-medium",h?"text-red-600":"invisible"),role:"alert",children:h&&(0,j.__)("Message too long","extendify-local")}),(0,L.jsx)(ee,{disabled:e,noInput:0===o.trim().length,overLimit:h,handleCancel:v})]})]})]})},ee=({disabled:e,noInput:t,overLimit:n,handleCancel:o})=>e?(0,L.jsxs)("button",{type:"button",onClick:o,className:"inline-flex h-fit items-center justify-center gap-2 whitespace-nowrap rounded-full border-0 bg-design-main p-1 text-sm font-medium text-white transition-colors focus-visible:ring-design-main disabled:opacity-20",children:[(0,L.jsx)(k.A,{fill:"currentColor",icon:Y,size:18}),(0,L.jsx)("span",{className:"sr-only",children:(0,j.__)("Cancel","extendify-local")})]}):(0,L.jsxs)("button",{type:"submit",className:"inline-flex h-fit items-center justify-center gap-2 whitespace-nowrap rounded-full border-0 bg-design-main p-0.5 text-sm font-medium text-white transition-colors focus-visible:ring-design-main disabled:opacity-20",disabled:e||t||n,children:[(0,L.jsx)(k.A,{fill:"currentColor",icon:Q.A,size:24}),(0,L.jsx)("span",{className:"sr-only",children:(0,j.__)("Send message","extendify-local")})]});var te=n(2344);const ne=window.extSharedData?.homeUrl,oe={a:({href:e,children:t})=>{const n=(e=>{try{const t=new URL(ne),n=new URL(e);return t.hostname!==n.hostname}catch{return!1}})(e);return(0,L.jsxs)("a",{href:e,...n&&{target:"_blank",rel:"noopener noreferrer"},children:[t,n&&(0,L.jsx)(k.A,{icon:te.A,size:18,className:"ml-0.5 inline"})]})}};var se=n(8334);const re=({words:e,delay:t=.4,duration:n=.25})=>{const o=e.every(e=>1===e.length);return(0,L.jsx)(R.N,{children:e.map((e,s)=>(0,L.jsx)(T.P.span,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:n,delay:s*t},children:o?e:(0,L.jsx)(se.oz,{components:oe,children:e})},s))})};var ie=n(2619);(0,ie.addFilter)("extendify.ai-agent-suggestion-tours","extendify/ai-agent-extra-tours",e=>window.extSharedData?.showAIPageCreation?{...e,"post-new.php?post_type=page":"page-creator-tour"}:e);const ae=(0,ie.applyFilters)("extendify.ai-agent-suggestion-tours",{"plugin-install.php":"plugin-install-tour","plugins.php":"plugin-management-tour","post-new.php?post_type=page":"page-editor-tour","post-new.php?post_type=post":"library-tour","users.php":"users-screen-tour","admin.php?page=extendify-assist":"site-assistant-tour"});var le=n(9035),ce=n(7806),de=n(8537),ue=n(5974),me=n(4891),pe=n(1450),ge=n(974);const fe=Object.values(le.A),he=window.extAgentData.agentContext?.availableAdminPages||[],xe=Object.fromEntries(he.map(e=>[e,{label:(0,j.__)("Take me there","extendify-local"),tour:fe.find(t=>t.id===ae[e])??null}]))||{},ye={agent1:ue.A,agent2:me.A,agent3:pe.A,agent4:ge.A},we=({message:e,animate:t})=>{const{content:n,role:o,pageSuggestion:s,agent:r,sessionId:i="not-set"}=e.details,a=/```[\s\S]*?```/.test(n)?[(0,de.decodeEntities)(n)]:(0,de.decodeEntities)(n).split(/\n{2,}/),l=Object.keys(xe).find(e=>s?.startsWith(e)),c=xe[l]||{};return(0,L.jsxs)("div",{"data-agent-message-role":o,className:"flex w-full items-start gap-2.5 p-2",children:[(0,L.jsx)("div",{className:"w-7 shrink-0",children:(0,L.jsx)(v.Tooltip,{text:r?.name??(0,j.__)("Agent","extendify-local"),placement:"top",children:r?.avatar?(0,L.jsx)("img",{className:"mt-px",src:r.avatar,alt:r.name}):(0,L.jsx)(k.A,{className:"-mt-0.5 fill-gray-900",icon:ye[r?.id]??F,size:28})})}),(0,L.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-4",children:[(0,L.jsx)("div",{className:"extendify-agent-markdown w-full",children:t?(0,L.jsx)(re,{words:a,delay:.1,duration:.35}):(0,L.jsx)(se.oz,{children:(0,de.decodeEntities)(n)})}),c?.label?(0,L.jsx)("div",{children:(0,L.jsx)("a",{onClick:()=>{(({action:e,sessionId:t,value:n={}})=>{t?fetch(`${m.AY}/api/agent/activities`,{keepalive:!0,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...p,action:e,sessionId:t,value:n})}):Promise.resolve(null)})({sessionId:i,action:"take_me_there_click",value:{pageSuggestion:s}})},href:`${window.extSharedData.adminUrl}${s}`,className:"rounded-sm border border-design-main bg-design-main p-2 text-sm text-white no-underline hover:opacity-90",children:c.label})}):null,c?.tour&&(0,L.jsx)("div",{children:(0,L.jsx)(ce.L,{tour:c.tour})})]})]})},be=({status:e,animate:t})=>{const{type:n,label:o}=e.details,[s,r]=(0,x.useState)(),[i,a]=(0,x.useState)(0),l=(0,x.useMemo)(()=>({"calling-agent":(0,j.__)("Thinking...","extendify-local"),"agent-working":[(0,j.__)("Working on it...","extendify-local"),(0,j.__)("Interpreting message...","extendify-local"),(0,j.__)("Formulating a response...","extendify-local"),(0,j.__)("Reviewing logic...","extendify-local")],"tool-started":o||(0,j.__)("Gathering data...","extendify-local"),"tool-completed":o||(0,j.__)("Analyzing...","extendify-local"),"tool-canceled":o||(0,j.__)("Canceled","extendify-local"),"workflow-canceled":o||(0,j.__)("Canceled","extendify-local"),"credits-exhausted":(0,j.__)("Usage limit reached","extendify-local"),"credits-restored":(0,j.__)("Usage limit restored","extendify-local")}),[o]),c=["calling-agent","agent-working","tool-started"].includes(n);return(0,x.useEffect)(()=>{if(!Array.isArray(l[n]))return void r(l[n]);r(l[n][i]);const e=setTimeout(()=>{r(null),a(e=>(e+1)%l[n].length)},5e3);return()=>{r(null),clearTimeout(e)}},[n,l,s,i]),"workflow-tool-completed"===n?(0,L.jsx)(ve,{label:o}):s?(0,L.jsx)("div",{className:X()("p-2 text-center text-xs italic text-gray-700",{"status-animation":c}),children:t?(0,L.jsx)(re,{words:(0,de.decodeEntities)(s).split(""),delay:.02}):(0,de.decodeEntities)(s)}):null},ve=({label:e})=>(0,L.jsxs)("div",{className:"flex w-full items-start gap-2.5 p-2",children:[(0,L.jsx)("div",{className:"w-7 shrink-0"}),(0,L.jsx)("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:(0,L.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border border-wp-alert-green bg-wp-alert-green/20 p-3 text-green-900",children:[(0,L.jsx)("div",{className:"h-6 w-6 leading-none",children:(0,L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:[(0,L.jsx)("title",{children:(0,j.__)("Success icon","extendify-local")}),(0,L.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})]})}),(0,L.jsx)("div",{className:"text-sm",children:(0,de.decodeEntities)(e)||(0,j.__)("Workflow completed successfully","extendify-local")})]})})]}),je=({message:e})=>{const{content:t,role:n}=e.details;return(0,L.jsx)("div",{"data-agent-message-role":n,className:"flex w-full flex-col items-end p-2",children:(0,L.jsx)("div",{className:"max-w-[80%] rounded-xl bg-gray-100 p-1.5 px-2.5 text-gray-900",children:(0,de.decodeEntities)(t)})})},ke=({children:e})=>(0,L.jsx)("div",{className:"mb-4 ml-10 mr-2 min-w-0 flex-1 flex-col gap-1 rtl:ml-2 rtl:mr-10 rtl:flex",children:(0,L.jsxs)("div",{className:"flex gap-2 rounded-lg border border-wp-alert-red bg-wp-alert-red/10 p-3 text-red-800",children:[(0,L.jsx)("div",{children:(0,L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:[(0,L.jsx)("title",{children:(0,j.__)("Error icon","extendify-local")}),(0,L.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})]})}),(0,L.jsx)("div",{className:"text-sm",children:e})]})}),_e=({message:e})=>{const t=u.L.find(t=>t.id===e.details.id)?.whenFinished?.component;return t?(0,L.jsx)(t,{...e.details}):(0,L.jsx)(Se,{})},Se=()=>(0,L.jsx)(ke,{children:(0,L.jsxs)("div",{className:"text-sm",children:[(0,L.jsx)("div",{className:"font-semibold",children:(0,j.__)("Component not available","extendify-local")}),(0,L.jsx)("div",{className:"",children:
// translators: This is for when a component doesn't exist
// translators: This is for when a component doesn't exist
(0,j.__)("It may have been removed or is not available for your account.","extendify-local")})]})});var Te=n(5295),Le=n(6568),Ce=n(5506),Ne=n(2041),Ee=n(3725),Ae=n(34),Pe=n(5367);const{suggestions:Ie}=window.extAgentData,Re=Object.values(le.A).filter(({settings:{startFrom:e}})=>!e||e.includes(window.location.href)),De=Re?.length?Re[Math.floor(Math.random()*Re.length)]:void 0,$e=De?.message&&(Ie.length<3||Math.random()<.3),Me={styles:me.A,edit:pe.A,help:Le.A,video:Ce.A,sparkle:W,drafts:Ne.A,published:Ee.A,typography:Ae.A},Be=Ie.filter(e=>!!e?.feature),qe=Ie.filter(e=>!e?.feature),Fe=({suggestions:e=[]})=>{const{startTour:t}=(0,Te.n)(),[n,o]=(0,x.useState)(qe);(0,x.useEffect)(()=>{o(e=>e.toSorted(()=>Math.random()-.5))},[]);const s=e=>{window.dispatchEvent(new CustomEvent("extendify-agent:chat-submit",{detail:{message:e}}))};return e?.length>0?e.map(e=>(0,L.jsx)(Oe,{suggestion:e,handleSubmit:s},e.message)):(0,L.jsxs)(L.Fragment,{children:[$e?(0,L.jsx)(Oe,{suggestion:{...De,icon:"video"},handleSubmit:()=>t(De)},De.message):null,[...Be,...n].slice(0,$e?2:3).map(e=>(0,L.jsx)(Oe,{suggestion:e,handleSubmit:s},e.message))]})},Oe=({suggestion:e,handleSubmit:t})=>{const n=Me[e?.icon]??Me.sparkle;return(0,L.jsxs)("button",{type:"button",className:"group flex items-center justify-between rounded-sm bg-transparent px-1 py-1 text-left text-sm text-gray-900 transition-colors duration-100 hover:bg-gray-100 focus:outline-hidden focus:ring-2 focus:ring-design-main",onClick:()=>t(e.message),children:[(0,L.jsxs)("div",{className:"flex items-center gap-1.5 leading-none",children:[(0,L.jsx)("span",{className:"h-5 w-5 flex-shrink-0 self-start fill-gray-700",children:n}),(0,L.jsx)("span",{className:"leading-5",children:e.message})]}),(0,L.jsx)("span",{className:"inline-block h-5 w-5 fill-gray-700 leading-none opacity-0 transition-opacity duration-100 group-hover:opacity-100 rtl:scale-x-[-1]",children:Pe.A})]})},He=({answerId:e})=>{const[t,n]=(0,x.useState)(void 0);return(0,x.useEffect)(()=>{e&&void 0!==t&&(({answerId:e,rating:t})=>{fetch(`${m.AY}/api/agent/rate-workflow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answerId:e,rating:t})}).catch(n=>h({caller:"rateAnswer",error:n,extra:{answerId:e,rating:t}}))})({answerId:e,rating:t})},[t,e]),(0,L.jsx)("div",{className:"flex items-center justify-end",children:(0,L.jsxs)("div",{className:"flex items-center gap-px rounded-xl border border-gray-400 bg-gray-50 px-2 text-right",children:[(0,L.jsx)("button",{type:"button","aria-pressed":1===t,"aria-live":"polite",onClick:()=>n(e=>1===e?0:1),"aria-label":1===t?(0,j.__)("Remove rating","extendify-local"):(0,j.__)("Rate that this answer was helpful","extendify-local"),className:X()("m-0 h-6 border-0 bg-transparent p-0 hover:text-design-main",{"text-design-main":1===t,"text-gray-600":1!==t}),children:(0,L.jsx)(k.A,{className:"fill-current",icon:z})}),(0,L.jsx)("button",{type:"button","aria-pressed":-1===t,"aria-live":"polite",onClick:()=>n(e=>-1===e?0:-1),"aria-label":-1===t?(0,j.__)("Remove rating","extendify-local"):(0,j.__)("Rate that this answer was not helpful","extendify-local"),className:X()("m-0 h-6 border-0 bg-transparent p-0 hover:text-design-main",{"text-design-main":-1===t,"text-gray-600":-1!==t}),children:(0,L.jsx)(k.A,{className:"fill-current",icon:H})})]})})},ze=({message:e})=>{const{status:t,answerId:n}=e.details;return(0,L.jsxs)("div",{className:"flex flex-col gap-px p-2 text-center text-xs italic",children:[n&&(0,L.jsx)(He,{answerId:n}),["completed","canceled"].includes(t)?(0,L.jsxs)("div",{className:"relative mb-4 ml-9 mr-2 mt-4 flex flex-col gap-0.5 border-t border-gray-300 p-0 pt-4 text-sm text-gray-800 rtl:ml-2 rtl:mr-9",children:[(0,L.jsx)("p",{className:"m-0 mb-2 p-0 px-2 text-left text-sm not-italic text-gray-900 rtl:text-right",children:(0,j.__)("What's next? Would you like to do something else?","extendify-local")}),(0,L.jsx)(Fe,{})]}):null]})};var We=n(1573);const Ue=({canScrollDown:e,onClick:t})=>(0,L.jsx)("div",{className:"pointer-events-none sticky bottom-1 flex h-8 items-center justify-center",children:(0,L.jsx)(R.N,{children:e?(0,L.jsxs)(T.P.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,exit:{duration:0}},onClick:t,type:"button",className:"pointer-events-auto flex h-fit items-center justify-center gap-2 whitespace-nowrap rounded-full border border-gray-500 bg-white/90 p-1 text-sm font-medium text-design-main shadow-lg transition-colors hover:bg-gray-100 focus-visible:ring-design-main disabled:pointer-events-none",children:[(0,L.jsx)(k.A,{fill:"currentColor",icon:We.A,size:20}),(0,L.jsx)("span",{className:"sr-only",children:(0,j.__)("Scroll down","extendify-local")})]},"scroll-down"):null})});var Ve=n(1609);const Ye=({children:e,...t})=>{const n=(0,Ve.useRef)(null),o=(0,Ve.useRef)(!1);return(0,Ve.useEffect)(()=>{if(!n.current||o.current)return;const e=n.current,t=e.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight,r=t.height,i=Math.max(t.top,0),a=Math.min(t.bottom,s);Math.max(0,a-i)/r>=.5||(e.scrollIntoView({behavior:"smooth",block:"end"}),o.current=!0)},[]),(0,L.jsx)("div",{ref:n,...t,children:e})},Ze=()=>{const{open:e}=c(),{messages:t}=(0,o.L)(),{getWorkflow:n}=(0,d.Y)(),s=n(),r=(()=>{const{whenFinishedToolProps:e,setWhenFinishedToolProps:t}=(0,d.Y)(),n=(0,x.useCallback)((t={})=>{e&&window.dispatchEvent(new CustomEvent("extendify-agent:workflow-confirm",{detail:{...t,whenFinishedToolProps:e}}))},[e]),o=(0,x.useCallback)(()=>{e&&window.dispatchEvent(new CustomEvent("extendify-agent:workflow-cancel",{detail:{whenFinishedToolProps:e}}))},[e]),s=(0,x.useCallback)(()=>{e&&(t(null),window.dispatchEvent(new CustomEvent("extendify-agent:workflow-retry",{detail:{whenFinishedToolProps:e}})))},[e,t]);return(0,x.useMemo)(()=>e?{...e,onConfirm:n,onCancel:o,onRetry:s}:null,[e,n,o,s])})(),i=s?.whenFinished?.component,[a,l]=(0,x.useState)(!1),u=(0,x.useRef)(null),m=(0,x.useRef)(!0),p="user"===t.filter(({type:e})=>"status"!==e).at(-1)?.details?.role;return(0,x.useEffect)(()=>{if(!u.current||!e)return;if(!m.current)return;m.current=!1;const t=u.current.querySelector("#extendify-agent-chat-scroll-area > :last-child");let n;const o=requestAnimationFrame(()=>{n=requestAnimationFrame(()=>{t?.scrollIntoView({behavior:"auto",block:"start"})})});return()=>{cancelAnimationFrame(o),cancelAnimationFrame(n),m.current=!0}},[e]),(0,x.useEffect)(()=>{if(!u.current)return;if(!p)return;const e=u.current,t=e.querySelectorAll('[data-agent-message-role="user"]'),n=t[t.length-1];if(!n||t.length<2)return;const o=e.querySelector("#extendify-agent-chat-scroll-area"),s=n.getBoundingClientRect(),r=Array.from(o.children).reduce((e,t)=>e+t.offsetHeight,0)+e.clientHeight-s.height;o.style.minHeight=`${r}px`,n.scrollIntoView({behavior:"smooth",block:"start"})},[p,t]),(0,x.useLayoutEffect)(()=>{const e=u.current;if(!e)return;const t=e.querySelector("#extendify-agent-chat-scroll-area > :last-child");if(!t)return;const n=e.scrollTop+e.clientHeight>=e.scrollHeight-4;l(!n);const o=new IntersectionObserver(([t])=>e.querySelector("#extendify-agent-chat-scroll-area > :last-child")?e.scrollTop+e.clientHeight>=e.scrollHeight-4?l(!1):void l(!t.isIntersecting):l(!1),{root:e,threshold:.1});return o.observe(t),()=>o.disconnect()},[t]),(0,L.jsxs)("div",{ref:u,style:{overscrollBehavior:"contain"},className:"relative grow overflow-y-auto overflow-x-hidden p-1 pb-0 text-sm text-gray-900 md:p-2",children:[(0,L.jsxs)("div",{id:"extendify-agent-chat-scroll-area",children:[t.map(e=>{const n=t.at(-1)?.id===e.id,o=m.current;if("user"===e.details?.role)return(0,L.jsx)(je,{message:e},e.id);if("assistant"===e.details?.role)return(0,L.jsx)(we,{animate:!o,message:e},e.id);if("workflow"===e.type)return(0,L.jsx)(ze,{message:e},e.id);if("workflow-component"===e.type)return(0,L.jsx)(_e,{message:e},e.id);if("status"===e.type&&(n||["workflow-tool-completed"].includes(e.details?.type))){const t="error"===e.details?.type;return(0,L.jsx)(be,{animate:!t,status:e},e.id)}return null}),!s?.needsRedirect?.()&&r?.id&&i?(0,L.jsx)(Ye,{children:(0,x.createElement)(i,r)}):null,s?.needsRedirect?.()?(0,L.jsx)(s.redirectComponent,{}):null]}),(0,L.jsx)(Ue,{canScrollDown:a,onClick:()=>{if(!u.current)return;const e=u.current.querySelector("#extendify-agent-chat-scroll-area > :last-child");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}})]})};var Ge=n(8482);const Xe=({onReady:e})=>{const{retryAfter:t,isChatAvailable:n}=c(),[o,s]=(0,x.useState)(null);if((0,x.useEffect)(()=>{if(!t)return;const o=setInterval(()=>{n()&&e(),s(()=>(0,l.humanTimeDiff)(new Date(Number(t)+45e3),new Date))},1e3);return()=>clearInterval(o)},[n,t,e]),t&&o)return(0,L.jsxs)("div",{className:"flex gap-2 rounded-lg bg-gray-100 p-3 text-sm text-gray-900",children:[(0,L.jsx)(k.A,{icon:Ge.A,className:"flex-none"}),(0,L.jsx)("div",{className:"grow",children:(0,L.jsx)("div",{children:(0,j.sprintf)(
// translators: %s is a human-readable time difference, e.g. "2 hours from now"
// translators: %s is a human-readable time difference, e.g. "2 hours from now"
(0,j.__)("You have reached your daily messages limit. Your limit will reset in %s.","extendify-local"),o)})})]})},Ke=({busy:e})=>{const{setBlock:t}=(0,d.Y)();return(0,L.jsxs)("div",{className:"flex w-fit items-center justify-start gap-1 rounded-sm border border-gray-500 bg-gray-100 p-1 text-sm text-gray-900",children:[(0,L.jsxs)("div",{className:"flex items-center gap-1",children:[(0,L.jsx)(k.A,{icon:V}),(0,L.jsx)("div",{children:(0,j.__)("Selected content","extendify-local")})]}),(0,L.jsx)(v.Tooltip,{text:(0,j.__)("Remove","extendify-local"),children:(0,L.jsxs)("button",{type:"button",disabled:e,className:"flex h-full items-center rounded-none border-0 bg-transparent outline-hidden ring-design-main focus:shadow-none focus:outline-hidden focus-visible:outline-design-main",onClick:()=>t(null),children:[(0,L.jsx)(k.A,{className:"pointer-events-none fill-current leading-none",icon:_.A,size:18}),(0,L.jsx)("span",{className:"sr-only",children:(0,j.__)("Remove","extendify-local")})]})})]})},Qe=window.extSharedData.launchCompletedAt;let Je=!1;try{const e=new Date(Qe),t=new Date;t.setDate(t.getDate()-1),Je=e<t}catch(e){}const{suggestions:et}=window.extAgentData,tt=["change-theme-variation",et.some(e=>"change-site-vibes"===e.workflowId&&e?.feature)?"change-site-vibes":"edit-wp-setting","change-theme-fonts-variation"].map(e=>et.find(t=>t.workflowId===e&&t?.feature)).filter(Boolean),nt=()=>(0,L.jsxs)("div",{className:"relative mx-2 px-2 text-gray-900",children:[Je?null:(0,L.jsxs)("div",{className:"text-2xl font-semibold text-gray-700",children:[(0,j.__)("Site is live!","extendify-local")," ðŸŽ‰"]}),(0,L.jsx)("div",{className:"mb-2 text-2xl font-semibold",children:(0,j.__)("Your expert AI team is here","extendify-local")}),(0,L.jsx)("div",{className:"text-base text-base text-gray-900",children:(0,j.__)("Your team of site experts â€” designers, developers, and marketers â€” ready to help from content to layouts. Tell us what you need or pick a task to start.","extendify-local")}),(0,L.jsx)("div",{className:"relative my-2 flex flex-col gap-0.5 p-2",children:(0,L.jsx)(Fe,{suggestions:tt})})]}),{pluginRecommendations:ot=[]}=window?.extAgentData?.agentContext||{},{adminUrl:st,homeUrl:rt}=window?.extSharedData||{},it=window.extSharedData.devbuild;let at=new AbortController;const{postId:lt}=window?.extAgentData?.context||{},ct=window.extSharedData?.wpLanguage||"en_US",dt=()=>{const{hasMessages:e,addMessage:t,popMessage:n}=(0,o.L)(),{mergeWorkflowData:s,getWorkflow:r,workflowData:i,setWorkflow:a,addWorkflowResult:l,setWhenFinishedToolProps:u,whenFinishedToolProps:y,getAvailableWorkflows:w,block:v,setBlock:k}=(0,d.Y)(),_=w().map(e=>e.id),{open:S,setOpen:T,showSuggestions:C,setShowSuggestions:N,updateRetryAfter:E,isChatAvailable:A}=c();(({postId:e,enabled:t})=>{(0,x.useEffect)(()=>{if(!e||!t)return;let n;const o=async()=>{await b()({path:"/extendify/v1/agent/lock-post",method:"POST",data:{postId:e}}).catch(()=>{}),n=setTimeout(o,84e4)};return o(),()=>clearTimeout(n)},[e,t])})({postId:lt,enabled:!!S});const[P,I]=(0,x.useState)(!0),R=(0,x.useRef)(!1),D=(0,x.useRef)(!1),$=(0,x.useRef)(!1),[M,B]=(0,x.useState)(!1),[F,O]=(0,x.useState)(0),H=r(),z=(0,x.useMemo)(()=>A(),[A]),W=window.extAgentData?.suggestions,U=(0,x.useCallback)(()=>{I(!0),R.current=!1,B(!1),at=new AbortController,v&&k(null),window.dispatchEvent(new Event("extendify-agent:remove-block-highlight"));const e=Array.from(document.querySelectorAll("#extendify-agent-chat-scroll-area div:last-child"))?.at(-1);e?.scrollIntoView({behavior:"smooth",block:"nearest"}),e?.scrollBy({top:-5,behavior:"smooth"})},[k,v]),V=(0,x.useCallback)(async(e={})=>{t("status",{type:"calling-agent"});const n=await(async({workflows:e,options:t})=>{const{failedWorkflows:n,context:s}=window.extAgentData,r=n??new Set,i=e.filter(e=>!r.has(e.id)),{workflowHistory:a,block:l}=d.Y.getState(),c=o.L.getState().getMessagesForAI(),u=o.L.getState().getLastAssistantMessage(),f=await fetch(`${m.AY}/api/agent/find-agent`,{method:"POST",headers:{"Content-Type":"application/json"},signal:t?.signal,body:JSON.stringify({...p,workflows:i,previousAgentName:a.at(0)?.agentName,previousWorkflow:{lastMessage:u?.details?.content,sessionId:u?.details?.sessionId,...a?.at(0)},context:s,agentContext:window.extAgentData.agentContext,messages:c.slice(-5),hasBlock:Boolean(l),blockDetails:l,...t,extra:g()})});if(!f.ok){h({caller:"pick-workflow",error:{name:f.statusText,messages:f.statusMessage}});const e=new Error("Bad response from server");throw e.response=f,e}return await f.json()})({workflows:_,options:{signal:at.signal,...e}}).catch(async e=>{if(it&&console.error(e),429===e?.response?.status)return E(e?.response?.headers?.get("Retry-After")),I(!1),void t("status",{type:"credits-exhausted"});I(!0),"Workflow aborted"!==e?(await new Promise(e=>setTimeout(e,1e3)),t("message",{role:"assistant",
// translators: This message is shown when the AI agent fails to find a suitable workflow.
content:(0,j.__)("Something went wrong while trying to start this request. Please try again.","extendify-local"),error:!0})):t("status",{type:"workflow-canceled"})});if(!n)return;const{workflow:s,reply:r}=n;s?.id&&a(s),r&&t("message",{role:"assistant",content:r,agent:s?.agent}),s?.id||I(!0)},[t,E,a,_]),Y=(0,x.useCallback)(async e=>{N(!1),B(!1),R.current=!1,t("message",{role:"user",content:e}),I(!1);const n=H?.needsRedirect?.(),o=y?.id,r=n||o;if(r&&a(null),H&&!r){const e=i||{};return a({...H}),void s(e)}const l=W?.find(t=>t?.message===e),c=l?.workflowId,d=w().find(e=>e.id===c);d?a({...d,language:ct}):await V().catch(e=>it&&console.error(e))},[t,V,s,y,a,H,i,N,w,W]);(0,x.useEffect)(()=>{const e=({detail:e})=>{e?.message&&Y(e.message)},n=()=>{at.abort("Workflow aborted"),U(),H?.id&&(a(null),t("status",{type:"workflow-canceled"}))};return window.addEventListener("extendify-agent:cancel-workflow",n),window.addEventListener("extendify-agent:chat-submit",e),()=>{window.removeEventListener("extendify-agent:cancel-workflow",n),window.removeEventListener("extendify-agent:chat-submit",e)}},[Y,U,a,t,H]),(0,x.useEffect)(()=>{const e=async({detail:e})=>{if(D.current)return;D.current=!0;const{data:n,whenFinishedToolProps:o,shouldRefreshPage:s}=e??{},{status:r,whenFinishedTool:i,answerId:c,redirectTo:d}=o.agentResponse,{id:u,labels:m}=i||{},p=await(f?.({tool:u,inputs:n}).catch(e=>{const{sessionId:t}=H||{};return h({caller:`when-finished: ${u}`,sessionId:t,error:e}),it&&console.error(e),{error:e.message}}));if(D.current=!1,l({answerId:c,agentName:H?.agent?.name,status:r,errorMsg:p?.error,language:H?.language}),p?.error)return await new Promise(e=>setTimeout(e,1e3)),t("message",{role:"assistant",
// translators: This message is shown when the AI agent fails to confirm an action.
content:(0,j.__)("Sorry, something went wrong attempting to call the tool. Please try again.","extendify-local"),error:!0}),a(null),void U();t("status",{label:m?.confirm,type:"workflow-tool-completed"}),t("workflow",{status:"completed",agent:H.agent,answerId:c}),a(null);const g=((e,t={})=>{if("plugin-setup"===e?.type){const e=ot.find(({slug:e})=>e===t.pluginSlug);return e?(e=>{try{return new URL(e.replace("{{ADMIN_URL}}",st).replace("{{HOME_URL}}",rt)).toString()}catch(e){return console.error(e),""}})(e.redirectTo):""}return""})(d,o?.inputs);return g?window.location.assign(g):s?window.location.reload():void U()},o=({detail:e})=>{if(D.current)return;const{answerId:n}=e.whenFinishedToolProps.agentResponse;t("workflow",{status:"canceled",agent:H.agent,answerId:n}),l({answerId:n,status:"canceled",agentName:H?.agent?.name,language:H?.language}),a(null),U()},s=()=>{n(),B(!1),R.current=!1,$.current=!0,O(e=>e+1)};return window.addEventListener("extendify-agent:workflow-confirm",e),window.addEventListener("extendify-agent:workflow-cancel",o),window.addEventListener("extendify-agent:workflow-retry",s),()=>{window.removeEventListener("extendify-agent:workflow-confirm",e),window.removeEventListener("extendify-agent:workflow-cancel",o),window.removeEventListener("extendify-agent:workflow-retry",s)}},[t,n,U,l,a,H]),(0,x.useEffect)(()=>{const e=()=>T(!1),t=()=>T(!0);return window.addEventListener("extendify-agent:close",e),window.addEventListener("extendify-agent:open",t),()=>{window.removeEventListener("extendify-agent:close",e),window.removeEventListener("extendify-agent:open",t)}},[T]),(0,x.useEffect)(()=>{if(M||!S||!H?.id)return;const e=H?.startingPage!==window.location.href,n=!v&&H?.requires?.includes("block");if(H?.cancelOnPageChange&&e||n)return t("workflow",{status:"canceled",agent:H.agent}),a(null),void U();y?.id||(H?.needsRedirect?.()?U():(async()=>{if(R.current)return;I(!1),N(!1),R.current=!0,t("status",{type:"agent-working"});const e=await(async({workflow:e,workflowData:t,options:n})=>{const s=o.L.getState().getMessagesForAI(),r=await fetch(`${m.AY}/api/agent/handle-workflow`,{method:"POST",headers:{"Content-Type":"application/json"},signal:n?.signal,body:JSON.stringify({...p,workflow:e,workflowData:t,messages:s,context:window.extAgentData.context,agentContext:window.extAgentData.agentContext,retry:n?.retry||!1,extra:g()})});if(!r.ok)throw new Error("Bad response from server");return await r.json()})({workflow:H,workflowData:i,options:{signal:at.signal,retry:$.current}}).catch(e=>{if("Workflow aborted"===e)return t("status",{type:"workflow-canceled"}),a(null),void U();const{sessionId:n}=H||{};return h({caller:"handle-workflow",sessionId:n,error:e}),it&&console.error(e),{error:e.message}});if($.current&&($.current=!1),!e)return;const{status:n,answerId:r,sessionId:c}=e;if(l({answerId:r,status:n,errorMsg:e?.error,agentName:H?.agent?.name,language:H?.language}),S){if(e.error)throw window.extAgentData.failedWorkflows=window.extAgentData.failedWorkflows||new Set,window.extAgentData.failedWorkflows.add(H.id),new Error(`Error handling workflow: ${e.error}`);if(e.reply&&t("message",{role:"assistant",content:e.reply,followup:!!e.tool,pageSuggestion:e.pageSuggestion,agent:H.agent,sessionId:H?.sessionId}),e.whenFinishedTool?.id){u({...e.whenFinishedTool,agentResponse:e});const{id:n,inputs:o,static:s}=e.whenFinishedTool;return void(s&&(t("workflow-component",{id:n,status:"completed",inputs:o}),a(null),t("workflow",{status:"completed",agent:H.agent,answerId:r}),U()))}if("in-progress"!==e.status)return a(null),U(),void t("workflow",{status:"completed"===e.status?"completed":"canceled",agent:H.agent,answerId:r});if(c&&c!==H.sessionId&&a({...H,sessionId:c}),s(e.inputs),e.tool){const{id:n,inputs:o,labels:r}=e.tool;t("status",{label:r?.started,type:"tool-started"});const i=await Promise.all([f({tool:n,inputs:o}),new Promise(e=>setTimeout(e,3e3))]).then(([e])=>e).catch(e=>{const{sessionId:t}=H||{};throw h({caller:`in-progress: ${n}`,sessionId:t,error:e}),it&&console.error(e),e});return t("status",{label:r?.confirm,type:"tool-completed"}),await new Promise(e=>setTimeout(e,1e3)),s(i),B(!1),R.current=!1,void O(e=>e+1)}I(!0),B(!0)}})().catch(async e=>{const{sessionId:n}=H||{};h({caller:"main-loop",sessionId:n,error:e}),it&&console.error(e),a(null),U(),await new Promise(e=>setTimeout(e,1e3)),t("message",{role:"assistant",
// translators: This message is shown when the AI agent encounters a general error.
content:(0,j.__)("Sorry, something went wrong. I tried but wasn't able to do this request. Please try again.","extendify-local"),error:!0})}))},[F,U,l,S,H,i,t,a,R,M,s,P,V,N,y,u,v]),(0,x.useEffect)(()=>{P&&document.querySelector("#extendify-agent-chat-textarea")?.focus()},[P]);const Z=!e(),G=!H?.id&&!Z&&z&&C&&!v,X=!P||!z||H?.id;return(0,L.jsx)(q,{busy:X,children:(0,L.jsxs)("div",{className:"relative z-50 flex h-full flex-col justify-between overflow-auto border-t border-solid border-gray-300",children:[Z?(0,L.jsxs)("div",{className:"relative flex grow flex-col overflow-y-auto overflow-x-hidden",style:{backgroundImage:"linear-gradient( to bottom, #f0f0f0 0%, #fff 60%,  #fff 100%)"},children:[(0,L.jsx)("div",{className:"grow"}),(0,L.jsx)(nt,{})]}):(0,L.jsx)(Ze,{redirectComponent:H?.needsRedirect?.()?H.redirectComponent:null}),(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{className:"relative flex flex-col px-4 pb-2 pt-2.5 shadow-lg-flipped",children:[G?(0,L.jsx)(Fe,{}):null,v?(0,L.jsx)(Ke,{busy:X,blockId:v.id}):null,(0,L.jsx)(Xe,{onReady:()=>{U(),N(!0),t("status",{type:"credits-restored"})}})]}),(0,L.jsx)("div",{className:"p-4 pb-2 pt-0",children:(0,L.jsx)(J,{disabled:!P||!z,handleSubmit:Y})}),(0,L.jsx)("div",{className:"text-pretty px-4 pb-2 text-center text-xss leading-none text-gray-600",children:(0,j.__)("AI Agent can make mistakes. Check changes before saving.","extendify-local")})]})]})})};var ut=n(7828),mt=n(365),pt=n(8490),gt=n.n(pt);const ft=()=>{const{toggleOpen:e,open:t,isMobile:n}=c(),[o,s]=(0,x.useState)(!1),[r,i]=(0,x.useState)(!1),a=(0,x.useRef)(!1);return(0,x.useEffect)(()=>{if(!a.current)return void(a.current=!0);if(t||n)return;s(!0),i(!0);const e=setTimeout(()=>{s(!1)},1500),o=setTimeout(()=>{i(!1)},5e3);return()=>{clearTimeout(e),clearTimeout(o)}},[t,n]),n?null:(0,L.jsxs)("button",{type:"button",className:X()("m-1 items-center justify-center rounded-xs border-0 bg-wp-theme-main p-0.5 px-1.5 leading-extra-tight text-white ring-offset-[#1D2327] focus:outline-hidden focus:ring-wp focus:ring-wp-theme-main focus:ring-offset-1 md:inline-flex",{"opacity-60":t}),onClick:()=>{t&&s(!0),e()},"aria-label":(0,j.__)("Open Agent","extendify-local"),children:[(0,L.jsx)(v.Icon,{icon:r?O:F,width:20,height:20,className:X()("fill-design-text",{"scale-x-[-1]":(0,j.isRTL)()})}),(0,L.jsx)("span",{className:X()("px-1 leading-none",{"extendify-gradient-animation":o}),children:(0,j.__)("AI Agent","extendify-local")})]})};var ht=n(1152);const xt=()=>{const{isMobile:e,minimized:t,setMinimized:n}=c(),o=(0,x.useRef)(null);return(0,x.useEffect)(()=>{e&&!t&&document.body.style.setProperty("--extendify-agent-mobile-btn-height",`${o.current?.offsetHeight}px`)},[e,t]),(0,x.useEffect)(()=>{if(e)return document.body.classList.add("extendify-agent-mobile-btn-open"),()=>{document.body.classList.remove("extendify-agent-mobile-btn-open")}},[e]),e&&t?(0,L.jsxs)("button",{ref:o,type:"button",className:"m-0 flex w-full items-center justify-between gap-2 bg-gray-900 px-4 py-3 font-sans text-white shadow-[0_-1px_0_0_rgba(255,255,255,0.05)]",onClick:()=>n(!1),"aria-label":(0,j.__)("Open Agent","extendify-local"),children:[(0,L.jsxs)("div",{className:"flex gap-3",children:[(0,L.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-wp-theme-main",children:(0,L.jsx)(k.A,{icon:F,size:24})}),(0,L.jsxs)("div",{className:"text-left text-sm rtl:text-right",children:[(0,L.jsx)("div",{className:"font-semibold",children:(0,j.__)("AI Agent","extendify-local")}),(0,L.jsx)("div",{className:"text-gray-600",children:(0,j.__)("How can we help you today?","extendify-local")})]})]}),(0,L.jsx)(k.A,{className:"fill-white",icon:ht.A,size:24})]}):null},yt=()=>{const{toggleOpen:e,open:t,isMobile:n}=c(),[o,s]=(0,x.useState)(!1),[r,i]=(0,x.useState)(!1),a=(0,x.useRef)(!1);return(0,x.useEffect)(()=>{if(!a.current)return void(a.current=!0);if(t||n)return;s(!0),i(!0);const e=setTimeout(()=>{s(!1)},1500),o=setTimeout(()=>{i(!1)},5e3);return()=>{clearTimeout(e),clearTimeout(o)}},[t,n]),n?null:(0,L.jsx)(v.Button,{variant:"primary",icon:r?O:F,iconPosition:"left",className:"is-compact has-text relative z-10",onClick:()=>{t&&s(!0),e()},"aria-label":(0,j.__)("Open Agent","extendify-local"),children:(0,L.jsx)("span",{className:X()("px-1 leading-none",{"extendify-gradient-animation":o}),children:(0,j.__)("AI Agent","extendify-local")})})};var wt=n(2279);gt()(()=>{if((0,mt.Zz)())return;const e="wp-admin-bar-extendify-agent-btn";if(document.getElementById(e))return;const t=Object.assign(document.createElement("li"),{className:"extendify-agent",id:e});t.style.height="1.75rem",document.querySelector("#wp-admin-bar-my-account")?.before(t),(0,ut.X)((0,L.jsx)(ft,{}),t)}),gt()(()=>{if((0,mt.Zz)())return;const e="extendify-agent-mobile-btn";if(document.getElementById(e))return;const t=Object.assign(document.createElement("div"),{className:"extendify-agent",id:e});t.style.position="sticky",t.style.top="calc(100% - var(--extendify-agent-mobile-btn-height))",t.style.bottom="0",t.style.zIndex="99999",document.body.appendChild(t),(0,ut.X)((0,L.jsx)(xt,{}),t)}),(0,wt.registerPlugin)("extendify-agent-buttons",{render:()=>(0,L.jsx)(bt,{})});const bt=()=>((0,x.useEffect)(()=>{if((0,mt.Zz)())return;const e="extendify-agent-editor-btn";if(document.getElementById(e))return;const t=Object.assign(document.createElement("span"),{className:"extendify-agent",id:e});setTimeout(()=>{document.getElementById(e)||(document.querySelector('[aria-controls="edit-post:document"]')?.after(t),document.querySelector('[aria-controls="edit-site:template"]')?.after(t),(0,ut.X)((0,L.jsx)(yt,{}),t))},300)},[]),null);var vt=n(8971);const jt=e=>{const{top:t,right:n,bottom:o,left:s,width:r,height:i,x:a,y:l}=e.getBoundingClientRect();return{top:t,right:n,bottom:o,left:s,width:r,height:i,x:a,y:l}},kt=()=>{const e=(0,x.useRef)(),{currentTour:t,currentStep:n,startTour:o,closeCurrentTour:s,getStepData:r,onTourPage:i}=(0,Te.n)(),{settings:a}=t||{},{image:l,title:d,text:u,attachTo:m,events:p,options:g}=r(n),{queueTourForRedirect:f,queuedTour:h,clearQueuedTour:y,isMobile:w}=c(),{element:b,frame:v,offset:S,position:C,hook:N,boxPadding:E}=m||{},A=(0,x.useMemo)(()=>"function"==typeof b?b():b,[b]),P=(0,x.useMemo)(()=>"function"==typeof v?v():v,[v]),I=(0,x.useMemo)(()=>"function"==typeof S?S():S,[S]),D=(0,x.useMemo)(()=>"function"==typeof N?N():N,[N]),$=(0,x.useRef)(),M=(0,x.useRef)(!1),[B,q]=(0,x.useState)(null),[F,O]=(0,x.useState)(!1),[H,z]=(0,x.useState)(!1),[W,U]=(0,x.useState)(null),[V,Y]=(0,x.useState)({x:void 0,y:void 0,...I}),Z=(0,x.useCallback)((e,t)=>{Y(20===e?{x:e,y:t}:{x:e,y:t,...I})},[I]),G=(0,x.useCallback)(()=>{const t=D?.split(" ")||[];return{x:t.includes("right")?e.current?.offsetWidth:0,y:t.includes("bottom")?e.current?.offsetHeight:0}},[D]),X=(0,x.useCallback)(()=>{if(!B)return;const t=P?document.querySelector(P)?.contentDocument??document:document,n=jt(t.querySelector(A)??B);if(t!==document){const e=jt(t.defaultView.frameElement);n.x+=e.x,n.left+=e.x,n.right+=e.x,n.y+=e.y,n.top+=e.y,n.bottom+=e.y}if(window.innerWidth<=960)return void s("closed-resize");if(void 0===C?.x)return Z(void 0,void 0),U(null),void z(!1);const o=Math.max(20,n?.[C.x]-G().x),r=Math.max(20,n?.[C.y]-G().y),i=e.current;Z(Math.min(o,window.innerWidth-(i?.offsetWidth??0)-20),Math.min(r,window.innerHeight-(i?.offsetHeight??0)-20)),U(n)},[B,C,G,Z,P,A,s]);if((0,x.useLayoutEffect)(()=>{a?.startFrom&&(i()||(O(!0),f(t.id),s("redirected"),window.location.assign(a?.startFrom[0]),window.location.href.split("#")[0]===a.startFrom[0].split("#")[0]&&window.location.reload()))},[a?.startFrom,t,f,s,i]),(0,x.useEffect)(()=>{n&&document.querySelectorAll("[inert]").forEach(e=>{e?.removeAttribute("inert")})},[n]),(0,x.useEffect)(()=>{const e=e=>{const{tourSlug:t}=e.detail;le.A[t]&&requestAnimationFrame(()=>{o(le.A[t])})};return window.addEventListener("extendify-assist:start-tour",e),()=>{window.removeEventListener("extendify-assist:start-tour",e)}},[o]),(0,x.useLayoutEffect)(()=>{if(F)return;const e=h;let t=0;if(!e||!le.A[e])return y();const n=()=>{requestAnimationFrame(()=>{o(le.A[e])}),y()};return addEventListener("load",n),"complete"===document.readyState&&(t=requestAnimationFrame(n)),()=>{cancelAnimationFrame(t),removeEventListener("load",n)}},[o,h,y,F]),(0,x.useEffect)(()=>{if(!A)return;const e=(P?document.querySelector(P)?.contentDocument??document:document).querySelector(A)??document.querySelector(A);return e?(q(e),()=>q(null)):void 0},[P,A]),(0,x.useLayoutEffect)(()=>{if(B&&!F)return z(!0),X(),addEventListener("resize",X),g?.allowPointerEvents||(B.style.pointerEvents="none"),()=>{removeEventListener("resize",X),B.style.pointerEvents="auto"}},[F,B,X,g]),(0,x.useEffect)(()=>{M.current||n&&(M.current=!0)},[n]),(0,x.useEffect)(()=>{if(void 0===n||!B)return;p?.onAttach?.(B);let e=0;const t=requestAnimationFrame(()=>{B.scrollIntoView({block:"center"}),X(),e=requestAnimationFrame(X)});return $?.current?.focus(),()=>{p?.onDetach?.(B),cancelAnimationFrame(t),cancelAnimationFrame(e)}},[n,p,B,X,$]),(0,x.useLayoutEffect)(()=>{if(a?.allowOverflow)return document.documentElement.classList.add("ext-force-overflow-auto"),()=>{document.documentElement.classList.remove("ext-force-overflow-auto")}},[a]),!H||w)return null;const K=Tt(W,E);return(0,L.jsx)(R.N,{children:Boolean(t)&&(0,L.jsxs)(vt.lG,{as:T.P.div,static:!0,initialFocus:$,className:"extendify-agent",open:Boolean(t),onClose:()=>{},children:[(0,L.jsx)("div",{className:"relative z-max",children:(0,L.jsxs)(T.P.div,{ref:e,animate:{opacity:1,...V},initial:{opacity:0,...V},onAnimationComplete:()=>{X()},transition:{duration:M.current?.5:0,ease:"easeInOut"},className:"fixed left-0 top-0 z-20 flex max-w-xs flex-col bg-transparent shadow-2xl sm:overflow-hidden",style:{minWidth:a?.minBoxWidth??"325px"},children:[(0,L.jsx)("button",{type:"button","data-test":"close-tour",className:"absolute right-0 top-0 z-20 m-2 flex h-6 w-6 items-center justify-center rounded-full border-0 bg-white p-0 leading-none outline-hidden ring-1 ring-gray-200 focus:shadow-none focus:ring-wp focus:ring-design-main rtl:left-0 rtl:right-auto",onClick:()=>s("closed-manually"),"aria-label":(0,j.__)("Close Modal","extendify-local"),children:(0,L.jsx)(k.A,{icon:_.A,className:"h-4 w-4 fill-current"})}),(0,L.jsx)(vt.lG.Title,{className:"sr-only",children:t?.title??(0,j.__)("Tour","extendify-local")}),l&&(0,L.jsx)("div",{className:"w-full p-6",style:{minHeight:150,background:"linear-gradient(58.72deg, #485563 7.71%, #29323C 92.87%)"},children:(0,L.jsx)("img",{src:l,className:"block w-full",alt:d})}),(0,L.jsxs)("div",{className:"relative m-0 bg-white p-6 pt-0 text-left rtl:text-right",children:[d&&(0,L.jsx)("h2",{className:"mb-2 text-xl font-medium",children:d}),u&&(0,L.jsx)("p",{className:"mb-6",children:u}),(0,L.jsx)(St,{initialFocus:$})]})]})}),g?.allowPointerEvents||(0,L.jsx)("div",{"aria-hidden":!0,className:"fixed inset-0 z-max-1"}),Boolean(t)&&void 0!==W?.left&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(T.P.div,{initial:{opacity:0,clipPath:"polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%, 0 0)"},animate:{opacity:1,clipPath:`polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%, 0 0, ${K.left}px 0, ${K.left}px ${K?.bottom}px, ${K?.right}px ${K.bottom}px, ${K.right}px ${K.top}px, ${K.left}px ${K.top}px)`},transition:{duration:M.current?.5:0,ease:"easeInOut"},className:"fixed inset-0 z-max-1 hidden bg-black/70 lg:block","aria-hidden":"true"}),(0,L.jsx)(_t,{rectWithPadding:K,finishedStepOne:M})]})]})})},_t=({rectWithPadding:e,finishedStepOne:t})=>{const[n,o]=(0,x.useState)(!1);return(0,L.jsx)(T.P.div,{initial:{...e??{}},animate:{...e??{}},transition:{duration:t.current?.5:0,ease:"easeInOut"},onAnimationStart:()=>o(!1),onAnimationComplete:()=>o(!0),className:X()("fixed inset-0 z-high hidden border-2 lg:block",{"border-transparent":!n,"border-design-main":n,"inset-y-auto right-0":(0,j.isRTL)()}),"aria-hidden":"true"})},St=({initialFocus:e})=>{const{goToStep:t,completeCurrentTour:n,currentStep:o,preparingStep:s,getStepData:r,hasNextStep:i,nextStep:a,hasPreviousStep:l,prevStep:c,currentTour:d}=(0,Te.n)(),{options:u={}}=r(o),{hideBackButton:m=!1}=u,{steps:p,settings:g}=d||{};return(0,L.jsxs)("div",{id:"extendify-tour-navigation",className:"flex w-full items-center justify-between",children:[(0,L.jsx)("div",{className:"flex flex-1 justify-start rtl:flex-none",children:(0,L.jsx)(R.N,{children:l()&&!m&&(0,L.jsx)(T.P.div,{initial:{opacity:0},animate:{opacity:1},children:(0,L.jsxs)("button",{type:"button",className:"flex h-8 items-center justify-center gap-2 rounded-xs bg-transparent p-0 text-gray-900 ring-design-main hover:bg-transparent focus:outline-hidden focus:ring-wp focus:ring-offset-1 focus:ring-offset-white disabled:opacity-60",onClick:c,disabled:s>-1,children:[s<o&&(0,L.jsx)(v.Spinner,{className:"m-0 h-4 text-design-main"}),(0,L.jsx)("span",{children:(0,j.__)("Back","extendify-local")})]})})})}),p?.length>2&&!g?.hideDotsNav?(0,L.jsx)("nav",{"aria-label":(0,j.__)("Tour Steps","extendify-local"),className:"flex flex-1 -translate-x-3 items-center justify-center gap-1",children:p.map((e,n)=>(0,L.jsx)("div",{children:(0,L.jsx)("button",{type:"button","aria-label":(0,j.sprintf)(
// translators: %1$s is the current step, %2$s is the total number of steps
// translators: %1$s is the current step, %2$s is the total number of steps
(0,j.__)("%1$s of %2$s","extendify-local"),n+1,p.length),"aria-current":n===o,className:"m-0 block h-2.5 w-2.5 rounded-full p-0 ring-offset-1 ring-offset-white focus:outline-hidden focus:ring-wp focus:ring-design-main "+(n===o?"bg-design-main":"bg-gray-300"),onClick:()=>t(n),disabled:s>-1})},n))}):null,(0,L.jsx)("div",{className:"flex flex-1 justify-end rtl:flex-none",children:i()?(0,L.jsxs)(v.Button,{ref:e,id:"agent-tour-next-button","data-test":"agent-tour-next-button",onClick:a,disabled:s>-1,className:"flex gap-2 bg-design-main text-design-text focus:text-design-text disabled:opacity-60",variant:"primary",children:[s>o&&(0,L.jsx)(v.Spinner,{className:"m-0 h-4 text-design-main"}),(0,L.jsx)("span",{children:(0,j.__)("Next","extendify-local")})]}):(0,L.jsx)(v.Button,{id:"agent-tour-next-button","data-test":"agent-tour-next-button",onClick:()=>{n()},className:"bg-design-main",variant:"primary",children:(0,j.__)("Done","extendify-local")})})]})},Tt=(e,t)=>({top:e.top-(t?.top??0),left:e.left-(t?.left??0),right:e.right+(t?.right??0),bottom:e.bottom+(t?.bottom??0),width:e.width+(t?.left??0)+(t?.right??0),height:e.height+(t?.top??0)+(t?.bottom??0),x:e.x-(t?.left??0),y:e.y-(t?.top??0)}),Lt=({children:e,title:t,name:n,onClose:o,anchors:s=[]})=>{const{seenToolTips:r,setSeenToolTip:i,isMobile:a}=c(),[l,d]=(0,x.useState)(!1),[u,m]=(0,x.useState)(0),[p,g]=(0,x.useState)(0),[f,h]=(0,x.useState)(0),y=()=>{d(!1),i(n),o?.()};if((0,x.useLayoutEffect)(()=>{const e=s.map(e=>document.querySelector(e)).find(Boolean);if(!e||!l||a)return;const t=document.querySelector(".interface-interface-skeleton__secondary-sidebar, .interface-interface-skeleton__sidebar"),n=t?.style.zIndex;t&&(t.style.zIndex=20);const o=e.style.outline;e.style.outline="99999px solid rgba(0, 0, 0, 0.4)";const r=e.getBoundingClientRect(),i=r.left+r.width/2,c=r.top+r.height;return h(r.width),m(i),g(c),()=>{e.style.outline=o,t&&(t.style.zIndex=n)}},[s,l,a]),(0,x.useEffect)(()=>{if(r.includes(n)||a)return;const e=()=>{const e=s.map(e=>document.querySelector(e)).find(Boolean);e&&e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&d(!0)};return window.addEventListener("extendify-agent:closed-button",e),()=>{window.removeEventListener("extendify-agent:closed-button",e)}},[d,r,n,s,a]),l&&!a)return(0,L.jsx)(vt.lG,{static:!0,className:"extendify-agent",open:l,onClose:y,children:(0,L.jsxs)("div",{className:"relative z-max",children:[(0,L.jsx)("div",{onClick:y,"aria-hidden":!0,role:"presentation",className:"fixed inset-0 z-10 h-screen w-screen bg-transparent"}),(0,L.jsxs)("div",{className:"fixed z-20 flex min-w-80 max-w-xs flex-col rounded-lg bg-transparent shadow-2xl",style:{top:`${p+20}px`,left:(0,j.isRTL)()?`${u+100}px`:u-100+"px",transform:"translate(-50%, 0)"},children:[(0,L.jsx)("div",{style:{insetInlineEnd:f/2-5+"px"},className:"absolute top-[-12px] h-0 w-0 transform border-b-[12px] border-l-[10px] border-r-[10px] border-transparent border-b-wp-theme-main"}),(0,L.jsx)("button",{type:"button","data-test":"close-tooltip",className:"ring-none focus:ring-none absolute right-0 top-0 z-20 m-2 flex h-6 w-6 items-center justify-center border-0 bg-wp-theme-main p-0 leading-none text-design-text outline-hidden focus:shadow-none rtl:left-0 rtl:right-auto",onClick:y,"aria-label":(0,j.__)("Close ToolTip","extendify-local"),children:(0,L.jsx)(v.Icon,{icon:_.A,className:"h-4 w-4 fill-current"})}),(0,L.jsx)(vt.L3,{className:"sr-only",children:t}),(0,L.jsx)("div",{className:"text-base relative m-0 rounded-lg bg-wp-theme-main p-6 pt-8 text-left font-sans leading-7 text-design-text rtl:text-right",children:e})]})]})})},Ct=()=>(0,L.jsxs)(Lt,{name:"reopen",title:(0,j.__)("Tooltip pointing to the agent button","extendify-local"),anchors:["#extendify-agent-editor-btn > button","#wp-admin-bar-extendify-agent-btn"],children:[(0,L.jsx)("div",{className:"mb-1 text-base font-semibold",children:(0,j.__)("Need help again?","extendify-local")}),(0,L.jsx)("div",{className:"text-base",children:(0,j.__)("You can always access your AI Agent if you need help with anything on your site.","extendify-local")})]});gt()(()=>{const e="extendify-agent-tour";if(document.getElementById(e))return;const t=Object.assign(document.createElement("div"),{className:"extendify-agent-tour",id:e});(0,ut.X)((0,L.jsx)(kt,{}),t);const n=document.getElementById("wpwrap")||document.querySelector(".wp-site-blocks");if((0,mt.Zz)()||document.querySelector("body.iframe")||!n)return;const o="extendify-agent-main";if(document.getElementById(o))return;const s=Object.assign(document.createElement("div"),{className:"extendify-agent",id:o});document.body.appendChild(s),(0,ut.X)((0,L.jsx)(dt,{}),s);const r=Object.assign(document.createElement("div"),{id:"extendify-agent-modal-tooltip"});document.body.appendChild(r),(0,ut.X)((0,L.jsx)(Ct,{}),r)})},4972(e,t,n){"use strict";n.d(t,{G:()=>y});var o=n(8377),s=n(4078),r=n(1455),i=n.n(r),a=n(3162),l=n(6427),c=n(3582),d=n(7143),u=n(6087),m=n(7723),p=n(6480),g=n(6942),f=n.n(g),h=n(790);const x=["image"],y=({type:e,onSave:t,onCancel:n,onSelect:r,title:g,actionLabel:y})=>{const[b,v]=(0,u.useState)(!1),[j,k]=(0,u.useState)(!1),[_,S]=(0,u.useState)(null),[T,L]=(0,u.useState)(null),C=T||_,N=(0,d.useSelect)(e=>e(c.store).getMedia(C),[C]),{mediaWidth:E,mediaHeight:A,mediaSourceUrl:P}=(0,s.B)(N);(0,u.useEffect)(()=>((0,o.q)(),()=>(0,o.P)()),[]),(0,u.useEffect)(()=>{const t=new AbortController;var n;return v(!0),(n=t.signal,i()({path:"/wp/v2/settings",signal:n})).then(t=>{t[e]&&S(Number(t[e]))}).finally(()=>v(!1)),()=>t.abort()},[e]);const I=e=>{e.id!==C&&(L(e.id),r?.(e))},R=e=>{(0,p.uploadMedia)({allowedTypes:x,filesList:e,onFileChange([e]){(0,a.isBlobURL)(e?.url)?v(!0):(I(e),v(!1))},onError(e){console.error({message:e})}})};return(0,h.jsx)("div",{className:"extendify-shared",children:(0,h.jsxs)(w,{children:[(0,h.jsx)(p.MediaUpload,{title:g,onSelect:I,allowedTypes:x,value:C,modalClass:"",render:({open:e})=>(0,h.jsxs)("div",{className:"relative block",children:[(0,h.jsxs)(l.Button,{className:"editor-post-featured-image__toggle extendify-assist-upload-logo relative m-0 flex h-48 w-full min-w-full justify-center border-0 bg-gray-100 p-0 text-center text-gray-900 hover:bg-gray-300 hover:text-current",onClick:e,"aria-label":C?(0,m.__)("Edit or update the image","extendify-local"):null,"aria-describedby":C?`image-${C}-describedby`:null,children:[C&&N&&(0,h.jsx)(l.ResponsiveWrapper,{naturalWidth:E,naturalHeight:A,isInline:!0,children:(0,h.jsx)("img",{className:"inset-0 m-auto block h-auto max-h-48 w-auto max-w-96",src:P,alt:""})}),b&&(0,h.jsx)(l.Spinner,{}),!C&&!b&&(y||(0,h.jsx)("div",{className:"flex flex-col",children:y}))]}),(0,h.jsx)(l.DropZone,{className:"absolute inset-0 h-full w-full",onFilesDrop:R,label:(0,m.__)("Drop images to upload","extendify-local")})]})}),(0,h.jsx)("div",{className:"mt-6",children:(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)("button",{type:"button",onClick:()=>{L(null),S(null),n()},className:f()("w-full rounded-sm border border-gray-300 bg-white p-2 text-sm text-gray-800 hover:bg-gray-50",{"cursor-not-allowed":j}),disabled:j,children:(0,m.__)("Cancel","extendify-local")}),!T&&(0,h.jsx)(p.MediaUpload,{title:g,onSelect:I,allowedTypes:x,modalClass:"image__media-modal",render:({open:e})=>(0,h.jsx)("button",{type:"button",onClick:e,className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white hover:bg-gray-800",children:(0,m.__)("Open Media Library","extendify-local")})}),T&&(0,h.jsx)("button",{type:"button",onClick:async()=>{k(!0);try{await(t?.({imageId:T}))}catch(e){console.log(e)}finally{k(!1)}},className:f()("flex items-center justify-center w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white hover:bg-gray-800",{"cursor-not-allowed":j}),disabled:j,children:j?(0,h.jsx)(l.Spinner,{className:"m-0"}):(0,m.__)("Save","extendify-local")})]})})]})})},w=({fallback:e=null,children:t})=>{const{checkingPermissions:n,hasUploadPermissions:o}=(0,d.useSelect)(e=>{const t=e("core");return{hasUploadPermissions:t.canUser("read","media"),checkingPermissions:!t.hasFinishedResolution("canUser",["read","media"])}});return(0,h.jsxs)(h.Fragment,{children:[n&&(0,h.jsx)(l.Spinner,{}),!n&&o?t:e]})}},2441(e,t,n){"use strict";n.d(t,{b:()=>m});var o=n(1548),s=n(7584),r=n(4997),i=n(7143),a=n(6087);const l="global-styles-inline-css",c=window.location.pathname,d=new URLSearchParams(window.location.search),u=c.includes("/wp-admin/post.php")&&"edit"===d.get("action"),m=({css:e,duotoneTheme:t})=>{const n=(0,a.useRef)(null),c=(0,a.useRef)(null),[d,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!e||u)return;const t=document.getElementById(l);t&&(n.current||(n.current=t.innerHTML),t.innerHTML=e)},[e]),(0,a.useEffect)(()=>{if(!e||!d||!u)return;const t=d.getElementById(l),n=document.querySelector('iframe[name="editor-canvas"]');t.innerHTML=e.replaceAll(":root",n?":root":".editor-styles-wrapper")},[e,d]),(0,a.useEffect)(()=>{if(d)return;const e=setTimeout(()=>{if(d)return;const e=document.querySelector('iframe[name="editor-canvas"]'),t=e?.contentDocument||document;if(!t||!t.body)return;const n=t.createElement("style");n.id=l,t.body.appendChild(n),m(t)},300);return()=>clearTimeout(e)},[d]);const p=(0,i.useSelect)(e=>{let t=e("core/block-editor")?.getBlocks?.()??[];if(t.find(e=>"core/template-part"===e.name)){const{getEditedPostContent:n}=e("core/editor");t=(0,r.parse)(n(),{})}return(0,o.w)(t)},[]);return(0,a.useEffect)(()=>{t&&(c.current&&(c.current(),c.current=null),c.current=(0,s.T)({duotoneTheme:t,dynamicDuotone:p}))},[e,t,p]),{undoChange:()=>{c.current&&(c.current(),c.current=null);const e=document.getElementById(l);if(e&&n.current&&(e.innerHTML=n.current),!u)return;const t=document.querySelector('iframe[name="editor-canvas"]'),o=t?.contentDocument||document;o?.getElementById(l)?.remove()}}}},286(e,t,n){"use strict";n.d(t,{L:()=>s});var o=n(4997);const s=(e,t)=>{const n=(0,o.rawHandler)({HTML:e.previousContent}),s=new DOMParser,r=n=>n.map(n=>{if(["core/image","core/cover"].includes(n.name)){const o={...n.attributes},r=e.url.includes("unsplash.com")?e.url.split("?")[0]:e.url,i=o.id===e.imageId,a=o.url.startsWith(r);if(!i&&!a)return{...n,attributes:o};o.url=t.source_url||t.url,o.id=t.id,o.className&&(o.className=o.className.split(" ").filter(e=>"extendify-image-import"!==e).join(" "));const l=s.parseFromString(o.originalContent||n.originalContent||"","text/html"),c=l.querySelector("img");if(!c)return{...n,attributes:o};c.setAttribute("src",t.source_url||t.url);const d=c.className.split(" ").filter(t=>t!==`wp-image-${e.imageId}`);return d.push(`wp-image-${t.id}`),c.className=d.join(" "),o.originalContent=l.body.innerHTML,{...n,attributes:o}}return n.innerBlocks&&n.innerBlocks.length>0?{...n,innerBlocks:r(n.innerBlocks)}:n}),i=r(n);return(0,o.serialize)(i)}},5713(e,t,n){"use strict";n.d(t,{E:()=>s,u:()=>r});var o=n(7143);const s=()=>{const e=(0,o.select)("core/preferences").get("core","renderingModes")||{},t=(0,o.select)("core").getCurrentTheme()?.stylesheet;return e?.[t]?.page},r=async e=>{const t=(0,o.select)("core/preferences").get("core","renderingModes")||{},n=(0,o.select)("core").getCurrentTheme()?.stylesheet;return(0,o.dispatch)("core/preferences").set("core","renderingModes",{...t,[n]:{...t[n]||{},page:e}}),await new Promise(e=>requestAnimationFrame(e))}},8377(e,t,n){"use strict";n.d(t,{P:()=>a,q:()=>i});const o="media-views-important",s=e=>{const t=[];return[...e].forEach(e=>{switch(e.type){case CSSRule.STYLE_RULE:t.push(r(e));break;case CSSRule.MEDIA_RULE:t.push(`@media ${e.conditionText} {`),s(e.cssRules,t),t.push("}");break;default:t.push(e.cssText)}}),t},r=e=>{const t=[...e.style].map(t=>`${t}: ${e.style.getPropertyValue(t)} !important`);return`${e.selectorText} { ${t.join("; ")}; }`},i=()=>{if(document.getElementById(o))return;const e=(()=>{const e=document.getElementById("media-views-css");if(!e)return null;const t=s(e.sheet?.cssRules);return t?.length?`\n\t\t\tdiv:has(> .media-modal) {z-index: 999999 !important}\n\t\t\t.media-frame {\n\t\t\t\th1, h2, h3, h4, h5, h6 {\n\t\t\t\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif !important;\n\t\t\t\t\tcolor: #1d2327 !important;\n\t\t\t\t}\n\n\t\t\t\t.uploader-inline-content {\n\t\t\t\t\tcolor: #1d2327 !important;\n\t\t\t\t}\n\n\t\t\t\t.media-sidebar {\n\t\t\t\t\tcolor: #646970 !important;\n\t\t\t\t}\n\n\t\t\t\t.media-search-input-label,\n\t\t\t\t.load-more-count {\n\t\t\t\t\tcolor: #3c434a !important;\n\t\t\t\t}\n\t\t\t}\n\t\t ${t.join("\n")}`:null})();if(!e)return;const t=document.createElement("style");t.id=o,t.textContent=e,document.head.appendChild(t)},a=()=>{const e=document.getElementById(o);e&&e.remove()}},1548(e,t,n){"use strict";n.d(t,{w:()=>o});const o=e=>{const t=new Map,n=new Set,o=e=>{if(e&&e.length)for(const r of e){if("core/image"!==r.name){o(r.innerBlocks||[]);continue}const e=r.attributes?.url||"";if(!e||!e.startsWith("data:image/svg+xml;")||n.has(r.clientId)){o(r.innerBlocks||[]);continue}const i=r.attributes?.style?.color?.duotone,a=i?.startsWith("var:preset|duotone|")?i.slice(19):null,l=s(r.clientId,e)?.filter(Boolean);a&&l.length&&!t.has(a)&&l.forEach(e=>{t.set(e,a)}),n.add(r.clientId),o(r.innerBlocks||[])}};return o(e),Object.fromEntries(t)},s=(e,t)=>{const n=document.querySelector('iframe[name="editor-canvas"]')?.contentDocument||document;if(!n)return[];const o=n.querySelector(`[data-block="${e}"]`);if(o?.classList){const e=[];for(const t of o.classList)t.startsWith("wp-duotone-")&&e.push(t);if(e.length)return e}const s=n.querySelectorAll(`img[src="${t}"]`),r=[];for(const e of s){const t=e.closest("figure[data-block]");if(t?.classList)for(const e of t.classList)e.startsWith("wp-duotone-")&&r.push(e)}return r}},7584(e,t,n){"use strict";n.d(t,{T:()=>i});var o=n(3640);const s=()=>document.querySelector('iframe[name="editor-canvas"]')?.contentDocument||document,r=["feFuncR","feFuncG","feFuncB"],i=(()=>{const e=new Map;return({duotoneTheme:t,dynamicDuotone:n})=>{const i=[],a=s();if(a.querySelectorAll('[id^="wp-duotone-"]').forEach(a=>{const l=a.id.replace("wp-duotone-","");((t,n,i)=>{let a="";Number.isNaN(Number(t))||(a=t,t=i?.[`wp-duotone-${a}`]);const l=n?.find(e=>e.slug===t)?.colors;if(!l||2!==l.length)return!1;const c=s(),d=`wp-duotone-${a||t}`,u=c.querySelector(`svg#${d}`)||c.querySelector(`filter#${d}`);if(!u)return!1;if(!e.has(a||t)){const n={tableValues:{},cssProperty:getComputedStyle(c.documentElement).getPropertyValue(`--wp--preset--duotone--${a||t}`)};r.forEach(e=>{const t=u.querySelector(e);t&&(n.tableValues[e]=t.getAttribute("tableValues"))}),e.set(a||t,n)}const[m,p]=l.map(e=>{const{r:t,g:n,b:s}=(0,o.Mj)(e).toRgb();return{r:t/255,g:n/255,b:s/255}});return r.forEach((e,t)=>{const n=["r","g","b"][t],o=u.querySelector(e);o&&o.setAttribute("tableValues",`${m[n]} ${p[n]}`)}),c.documentElement.style.setProperty(`--wp--preset--duotone--${a||t}`,`url(#${d})`),!0})(l,t,n)&&i.push(l)}),i.length>0){let e=a.getElementById("extendify-duotone-overrides");e||(e=a.createElement("style"),e.id="extendify-duotone-overrides",a.head.appendChild(e)),e.textContent=i.map(e=>`.wp-duotone-${e} img { filter: url(#wp-duotone-${e}) !important; }`).join("\n")}return i.length>0?()=>{const t=s();i.forEach(n=>{const o=e.get(n);if(!o)return;const s=`wp-duotone-${n}`,i=t.querySelector(`svg#${s}`)||t.querySelector(`filter#${s}`);i&&(r.forEach(e=>{const t=i.querySelector(e);t&&null!==o.tableValues[e]&&(o.tableValues[e]?t.setAttribute("tableValues",o.tableValues[e]):t.removeAttribute("tableValues"))}),o.cssProperty?t.documentElement.style.setProperty(`--wp--preset--duotone--${n}`,o.cssProperty):t.documentElement.style.removeProperty(`--wp--preset--duotone--${n}`))}),t.getElementById("extendify-duotone-overrides")?.remove()}:null}})()},6748(e,t,n){"use strict";n.d(t,{M4:()=>s,qE:()=>o,rQ:()=>r});const o=(e,t,n)=>Math.max(t,Math.min(e,n)),s=()=>Date.now().toString(36)+Math.random().toString(36).slice(2),r=()=>{const e=window.location.pathname,t=new URLSearchParams(window.location.search);return e.includes("/wp-admin/post.php")&&"edit"===t.get("action")}},9395(e,t,n){"use strict";n.d(t,{D:()=>r,o:()=>i});var o=n(1455),s=n.n(o);const r=async(e,t)=>{await s()({path:"/extendify/v1/agent/options",method:"post",data:{option:e,value:t}})},i=e=>{const t=new URLSearchParams({option:String(e)});return s()({path:`/extendify/v1/agent/options?${t.toString()}`,method:"GET"})}},8459(e,t,n){"use strict";n.d(t,{L:()=>u});var o=n(6748),s=n(1455),r=n.n(s),i=n(1621),a=n(7134);const{chatHistory:l}=window.extAgentData,c="/extendify/v1/agent/chat-events",d={getItem:async()=>await r()({path:c}),setItem:async(e,t)=>await r()({path:c,method:"POST",data:{state:t}})},u=(0,i.vt)()((0,a.Zr)((0,a.lt)((e,t)=>({messagesRaw:(l||[]).toReversed(),messages:l?.length?l.filter(e=>!(["agent-working","calling-agent","tool-started"].includes(e.details?.type)||["workflow"].includes(e.type)&&"completed"===e.details.status)).reduce((e,t)=>{const n=e.at(-1);return"assistant"===t.details?.role&&"assistant"===n?.details?.role||e.push(t),e},[]).toReversed():[],seenAgents:[],getMessagesForAI:()=>{const e=[];let n=!1;for(const{type:o,details:s}of t().messagesRaw.toReversed()){const t=["completed","canceled"].includes(s.status)||["status"].includes(o)&&"workflow-canceled"===s.type;if("workflow"===o&&t)break;if("workflow-component"===o&&t)break;"message"===o&&"user"===s.role&&(n=!0),("message"!==o||n)&&"message"===o&&e.push(s)}return e.toReversed()},getLastAssistantMessage:()=>t()?.messagesRaw?.findLast(e=>"message"===e.type&&"assistant"===e.details?.role),hasMessages:()=>t().messages.length>0,addMessage:(n,s)=>{const r=(0,o.M4)();if(s?.agent?.name&&!t().seenAgents.includes(s.agent.name)){s.firstSeen=!0;const t=e=>new Set([...e.seenAgents,s.agent.name]);e(e=>({seenAgents:[...t(e)]}))}return e(e=>{const t=Math.max(0,e.messages.length-149),o={id:r,type:n,details:s};return{messages:[...e.messages.toSpliced(0,t),o],messagesRaw:[...e.messagesRaw.toSpliced(0,t),o]}}),r},popMessage:()=>{e(e=>({messages:e.messages?.slice(0,-1)||[],messagesRaw:e.messagesRaw?.slice(0,-1)||[]}))},clearMessages:()=>e({messages:[]})}),{name:"Extendify Agent Chat"}),{name:"extendify-agent-chat",storage:(0,a.KU)(()=>d),skipHydration:!0}))},5295(e,t,n){"use strict";n.d(t,{n:()=>u});var o=n(6528),s=n(1455),r=n.n(s),i=n(1621),a=n(7134);const l={currentTour:null,currentStep:void 0,preparingStep:void 0,progress:[],...(0,o.N)(window.extAgentData.userData.tourData)?.state??{}},c="/extendify/v1/help-center/tour-data",d={getItem:async()=>await r()({path:c}),setItem:async(e,t)=>await r()({path:c,method:"POST",data:{state:t}})},u=(0,i.vt)((0,a.Zr)((0,a.lt)((e,t)=>({...l,startTour:async n=>{const{trackTourProgress:o,updateProgress:s,getStepData:r,onTourPage:i}=t();i(n?.settings?.startFrom)&&(window.dispatchEvent(new CustomEvent("extendify-agent:close")),await(n?.onStart?.(n)),n.steps=n.steps?.filter(e=>e?.showOnlyIf?.()||void 0===e?.showOnlyIf?.())||[],await(r(0,n)?.events?.beforeAttach?.(n))),e({currentTour:n,currentStep:0,preparingStep:void 0});const a=o(n.id);s(a.id,{openedCount:Number(a.openedCount)+1,lastAction:"started"})},onTourPage:(e=null)=>{const n=window.location.href;if(e?.includes(n))return!0;const{currentTour:o}=t();return o?.settings?.startFrom?.includes(n)},completeCurrentTour:async()=>{const{currentTour:n,wasCompleted:o,findTourProgress:s,updateProgress:r}=t(),i=s(n?.id);i?.id&&(o(i.id)||r(i.id,{completedAt:(new Date).toISOString(),lastAction:"completed"}),r(i.id,{completedCount:Number(i.completedCount)+1,lastAction:"completed"}),await(n?.onDetach?.()),await(n?.onFinish?.()),e({currentTour:null,currentStep:void 0}),window.dispatchEvent(new CustomEvent("extendify-agent:open")))},closeCurrentTour:async n=>{const{currentTour:o,findTourProgress:s,updateProgress:r}=t(),i=s(o?.id);if(!i?.id)return;const a={};return["redirected"].includes(n)?r(i?.id,{lastAction:n}):["closed-by-caught-error"].includes(n)?r(i?.id,{lastAction:n,errored:!0}):("closed-manually"===n&&(a.closedManuallyCount=Number(i.closedManuallyCount)+1),await(o?.onDetach?.()),await(o?.onFinish?.()),r(i?.id,{lastAction:n,...a}),e({currentTour:null,currentStep:void 0,preparingStep:void 0}),void window.dispatchEvent(new CustomEvent("extendify-agent:open")))},findTourProgress:e=>t().progress.find(t=>t.id===e),wasCompleted:e=>t().findTourProgress(e)?.completedAt,wasOpened:e=>Number(t().findTourProgress(e)?.openedCount??0)>0,isSeen:e=>t().findTourProgress(e)?.firstSeenAt,trackTourProgress:n=>{const{findTourProgress:o}=t();return o(n)||e(e=>({progress:[...e.progress,{id:n,firstSeenAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),completedAt:null,lastAction:"init",currentStep:0,openedCount:0,closedManuallyCount:0,completedCount:0,errored:!1}]})),o(n)},updateProgress:(t,n)=>{const o=n?.lastAction??"unknown";e(e=>({progress:e.progress.map(e=>e.id===t?{...e,...n,lastAction:o,updatedAt:(new Date).toISOString()}:e)}))},getStepData:(e,n=t().currentTour)=>n?.steps?.[e]??{},hasNextStep:()=>!!t().currentTour&&Number(t().currentStep)<t().currentTour.steps.length-1,nextStep:async()=>{const{currentTour:e,goToStep:n,updateProgress:o,currentStep:s}=t(),r=Number(s)+1;await n(r),o(e.id,{currentStep:r,lastAction:"next"})},hasPreviousStep:()=>!!t().currentTour&&Number(t().currentStep)>0,prevStep:async()=>{const{currentTour:e,goToStep:n,updateProgress:o,currentStep:s}=t(),r=s-1;await n(r),o(e.id,{currentStep:r,lastAction:"prev"})},goToStep:async n=>{const{currentTour:o,updateProgress:s,closeCurrentTour:r,getStepData:i}=t(),a=o;if(n<0||n>a.steps.length-1)return void r("closed-by-caught-error");s(a.id,{currentStep:n,lastAction:`go-to-step-${n}`});const l=i(n)?.events;l?.beforeAttach&&(e(()=>({preparingStep:n})),await Promise.allSettled([l.beforeAttach?.(a),new Promise(e=>setTimeout(e,300))]),e(()=>({preparingStep:void 0}))),e(()=>({currentStep:n}))}}),{name:"Extendify Tour Progress"}),{name:"extendify-help-center-tour-progress",storage:(0,a.KU)(()=>d),skipHydration:!0,partialize:e=>{const{currentTour:t,currentStep:n,preparingStep:o,...s}=e;return s}}))},3410(e,t,n){"use strict";n.d(t,{Y:()=>c});var o=n(9333),s=n(365),r=n(1455),i=n.n(r),a=n(1621),l=n(7134);const c=(0,a.vt)()((0,l.Zr)((0,l.lt)((e,t)=>({workflow:null,block:null,setBlock:t=>e({block:t,blockCode:null}),blockCode:null,setBlockCode:t=>e({blockCode:t}),domToolEnabled:!1,setDomToolEnabled:n=>{t().block||e({domToolEnabled:n})},getWorkflow:()=>{const e=t().workflow,n=e?.templateId||e?.id,r=o.L.find(({id:e})=>e===n);return r?.id?{...(0,s.$N)(e,r||{}),id:e?.id}:e||null},getAvailableWorkflows:()=>{const e=o.L.filter(({available:e})=>e()),n=e.filter(({requires:e})=>e?.includes("block"));return t().block?n:e.filter(({id:e})=>!n.some(t=>t.id===e))},getWorkflowsByFeature:({requires:e}={})=>e?o.L.filter(({available:t,requires:n})=>t()&&(!e||n?.some(t=>e.includes(t)))):o.L.filter(({available:e})=>e()),workflowData:null,workflowHistory:window.extAgentData?.workflowHistory||[],whenFinishedToolProps:null,addWorkflowResult:n=>{const o=t().workflow?.id;"completed"===n.status&&e(e=>{const t=Math.max(0,e.workflowHistory.length-10);return{workflowHistory:[{workflowId:o,...n},...e.workflowHistory.toSpliced(0,t)]}}),o&&i()({method:"POST",keepalive:!0,path:"/extendify/v1/agent/workflows",data:{workflowId:o,...n}})},mergeWorkflowData:t=>{e(e=>e.workflowData?{workflowData:{...e.workflowData,...t}}:{workflowData:t})},setWorkflow:n=>e({workflow:n?{...n,startingPage:window.location.href}:null,workflowData:t().blockCode?{previousContent:t().blockCode}:null,whenFinishedToolProps:null}),setWhenFinishedToolProps:t=>e({whenFinishedToolProps:t})}),{name:"Extendify Agent Workflows"}),{name:`extendify-agent-workflows-${window.extSharedData.siteId}`,partialize:e=>{const{block:t,workflowHistory:n,...o}=e;return{...o}}}))},9035(e,t,n){"use strict";n.d(t,{A:()=>b});const o=e=>new Promise(t=>{const n=setInterval(()=>{document.querySelector(e)&&(clearInterval(n),t())},50)}),s=e=>new Promise(t=>{const n=setInterval(()=>{document.querySelector(e)||(clearInterval(n),t())},50)});var r=n(7723);const i={id:"library-tour",title:(0,r.__)("Design Library","extendify-local"),message:(0,r.__)("Tour the design library","extendify-local"),settings:{allowOverflow:!0,hideDotsNav:!0,startFrom:[window.extSharedData?.showAIPageCreation?window.extSharedData.adminUrl+"post-new.php?post_type=page&ext-page-creator-close=1":window.extSharedData.adminUrl+"post-new.php?post_type=page&ext-close=1",`${window.extSharedData.adminUrl}post-new.php?post_type=page`]},onStart:async()=>{await o("#extendify-library-btn"),document.querySelector(`[aria-label="${(0,r.__)("Settings")}"].is-pressed`)?.click()},steps:[{title:(0,r.__)("Open the Pattern Library","extendify-local"),text:(0,r.__)("The Extendify pattern library can be opened by clicking the button to the left.","extendify-local"),attachTo:{element:'#extendify-library-btn [role="button"]',offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:()=>{}}},{title:(0,r.__)("Filter Patterns","extendify-local"),text:(0,r.__)("Click on any pattern category to refine the selection.","extendify-local"),attachTo:{element:"#extendify-library-category-control",position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},options:{allowPointerEvents:!0},events:{beforeAttach:async()=>(dispatchEvent(new CustomEvent("extendify::open-library")),await o("#extendify-library-category-control"))}},{title:(0,r.__)("Select a Pattern","extendify-local"),text:(0,r.__)("Simply select any pattern you wish to insert into a page by clicking on it.","extendify-local"),attachTo:{element:"#extendify-library-patterns-list",position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:async()=>{await o("#extendify-library-patterns-list")}}},{title:(0,r.__)("View the Inserted Pattern","extendify-local"),text:(0,r.__)("The selected pattern has been inserted into the page.","extendify-local"),attachTo:{element:".wp-block-group:last-child",frame:'iframe[name="editor-canvas"]',offset:{marginTop:15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top left":"top right"},events:{beforeAttach:async()=>(document.querySelector("#extendify-library-patterns-list .library-pattern")?.click(),await s("#extendify-library-patterns-list"))},options:{hideBackButton:!0}}]},a={id:"page-creator-tour",title:(0,r.__)("AI Page Generator","extendify-local"),message:(0,r.__)("Learn about the AI Page Generator","extendify-local"),settings:{allowOverflow:!0,hideDotsNav:!0,startFrom:[window.extSharedData?.showAIPageCreation?`${window.extSharedData.adminUrl}post-new.php?post_type=page&ext-page-creator-close=1`:`${window.extSharedData.adminUrl}post-new.php?post_type=page&ext-close=1`,`${window.extSharedData.adminUrl}post-new.php?post_type=page`]},onStart:async()=>{await o('#extendify-page-creator-btn [role="button"]'),document.querySelector(`[aria-label="${(0,r.__)("Settings")}"].is-pressed`)?.click()},steps:[{title:(0,r.__)("AI Page Generator","extendify-local"),text:(0,r.__)("Press here to get started with your AI Page Generator.","extendify-local"),attachTo:{element:'#extendify-page-creator-btn [role="button"]',offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:async()=>{await o('#extendify-page-creator-btn [role="button"]')}}},{title:(0,r.__)("Page description","extendify-local"),text:(0,r.__)("Write a description of the page you want to create. Be as detailed as you like. We will create a page based on this description.","extendify-local"),attachTo:{element:"#extendify-page-creator-page-description",position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},options:{allowPointerEvents:!0},events:{beforeAttach:async()=>(dispatchEvent(new CustomEvent("extendify::open-page-creator")),await o("#extendify-page-creator-page-description"))}},{title:(0,r.__)("Site description","extendify-local"),text:(0,r.__)("If needed, update your site description here. We use this to add additional context about your website.","extendify-local"),attachTo:{element:"#extendify-page-creator-site-description",offset:{marginTop:-15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"bottom left":"bottom right"},events:{beforeAttach:async()=>{await o("#extendify-page-creator-site-description")}}},{title:(0,r.__)("Generate your page","extendify-local"),text:(0,r.__)("When ready, press here to generate your page.","extendify-local"),attachTo:{element:"#extendify-page-creator-generate-btn",offset:{marginTop:-15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"bottom left":"bottom right"},events:{beforeAttach:()=>{}},options:{hideBackButton:!0}}]};var l=n(4997);const c=()=>!!document.querySelector('iframe[name="editor-canvas"]'),d=e=>13!==e.keyCode??e.preventDefault(),u=(e="")=>`.edit-post-header-toolbar__inserter-toggle${e}, .editor-document-tools__inserter-toggle${e}`,m={id:"page-editor-tour",title:(0,r.__)("Page editor","extendify-local"),message:(0,r.__)("Tour the page editor","extendify-local"),settings:{allowOverflow:!0,startFrom:[window.extSharedData?.showAIPageCreation?`${window.extSharedData.adminUrl}post-new.php?post_type=page&ext-page-creator-close=1`:`${window.extSharedData.adminUrl}post-new.php?post_type=page&ext-close=1`,`${window.extSharedData.adminUrl}post-new.php?post_type=page`]},steps:[{title:(0,r.__)("Add a Block","extendify-local"),text:(0,r.__)("Click the plus to open the block inserter.","extendify-local"),attachTo:{element:u(),offset:{marginTop:15,marginLeft:0},position:{x:(0,r.isRTL)()?"right":"left",y:"bottom"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:async()=>await o(u())}},{title:(0,r.__)("Block Inserter","extendify-local"),text:(0,r.__)("Add a block by clicking or dragging it onto the page.","extendify-local"),attachTo:{element:".block-editor-inserter__menu",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{beforeAttach:async()=>(document.querySelector(u(":not(.is-pressed)"))?.click(),await o(".block-editor-tabbed-sidebar")),onAttach:()=>{const e=document.querySelector(u());p.observe(e,{attributes:!0}),window.addEventListener("keydown",d)},onDetach:async()=>{p.disconnect(),window.removeEventListener("keydown",d),document.querySelector(u(".is-pressed"))?.click(),await s(".block-editor-inserter__block-list")}}},{title:(0,r.__)("Page Title","extendify-local"),text:(0,r.__)("Edit the page title by clicking it. Note: The title may or may not show up on the published page, depending on the page template used.","extendify-local"),attachTo:{element:()=>c()?'iframe[name="editor-canvas"]':".wp-block-post-title",offset:()=>({marginTop:c()?15:0,marginLeft:(0,r.isRTL)()?c()?15:-15:c()?-15:15}),position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:()=>(0,r.isRTL)()?c()?"top left":"top right":c()?"top right":"top left"},events:{beforeAttach:async()=>{await window.wp.data.dispatch("core/editor").editPost({title:"Sample Post"})}}},{title:(0,r.__)("Blocks","extendify-local"),text:(0,r.__)("Each block will show up on the page and can be edited by clicking on it.","extendify-local"),attachTo:{element:()=>c()?'iframe[name="editor-canvas"]':".wp-block-post-content > p",offset:()=>({marginTop:c()?15:0,marginLeft:(0,r.isRTL)()?c()?15:-15:c()?-15:15}),position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:()=>(0,r.isRTL)()?c()?"top left":"top right":c()?"top right":"top left"},events:{beforeAttach:async()=>{if(await window.wp.data.select("core/block-editor").getBlockCount()>0)return;const e=(0,l.createBlock)("core/paragraph",{content:(0,r.__)("This is a sample paragraph block. It can be several sentences long and will span multiple rows. You can add as many blocks as you'd like to the page.","extendify-local")});return await window.wp.data.dispatch("core/block-editor").insertBlock(e),c()?await window.wp.data.dispatch("core/block-editor").flashBlock(e.clientId):null}}},{title:(0,r.__)("Page and Block Settings","extendify-local"),text:(0,r.__)("Select either page or block to change the settings for the entire page or the block that is selected.","extendify-local"),attachTo:{element:".interface-interface-skeleton__sidebar",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?15:-15},position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top left":"top right"},events:{beforeAttach:async()=>{const e=document.querySelector(`[aria-label="${(0,r.__)("Settings")}"]:not(.is-pressed)`);e?e?.click():document.querySelector('[aria-label="Settings"]:not(.is-pressed)')?.click(),await o(".interface-interface-skeleton__sidebar"),document.querySelector('.edit-post-sidebar__panel-tab,[data-tab-id="edit-post/document"]')?.click(),await o(".editor-post-status"),document.querySelector(".edit-post-post-status button")?.click()}}},{title:(0,r.__)("Preview","extendify-local"),text:(0,r.__)("Click preview to view how your changes look on the front end of your site.","extendify-local"),attachTo:{element:".block-editor-post-preview__button-toggle,.editor-preview-dropdown__toggle",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?15:-15},position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}},{title:(0,r.__)("Publish or Save","extendify-local"),text:(0,r.__)("Click publish or update to save the changes you have made to the page and make them live on the site.","extendify-local"),attachTo:{element:".editor-post-publish-button__button",offset:{marginTop:15},position:{x:(0,r.isRTL)()?"left":"right",y:"bottom"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}}]},p=new MutationObserver(()=>{document.querySelector(u(":not(.is-pressed)"))?.click()}),g={id:"plugin-install-tour",title:(0,r.__)("Installing a plugin","extendify-local"),message:(0,r.__)("See how to install a plugin","extendify-local"),settings:{allowOverflow:!1,startFrom:[`${window.extSharedData.adminUrl}plugin-install.php`]},onStart:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-plugins").classList.add("opensub")},steps:[{title:(0,r.__)("Add New plugin menu","extendify-local"),text:(0,r.__)("Click here to access the Add Plugins page.","extendify-local"),attachTo:{element:'#menu-plugins .wp-submenu a[href="plugin-install.php"]',offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onDetach:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-plugins").classList.remove("opensub")}}},{title:(0,r.__)("Search","extendify-local"),text:(0,r.__)("Search for a plugin by name or functionality.","extendify-local"),attachTo:{element:".search-form.search-plugins",offset:{marginTop:5,marginLeft:(0,r.isRTL)()?350:-350},boxPadding:{top:-5,bottom:3,left:5,right:5},position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Plugin details","extendify-local"),text:(0,r.__)("See important information about each plugin.","extendify-local"),attachTo:{element:"#the-list .plugin-card:first-child .plugin-card-bottom",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"bottom"},hook:(0,r.isRTL)()?"bottom right":"bottom left"},events:{}},{title:(0,r.__)("Install now","extendify-local"),text:(0,r.__)("Install the plugin. Then, press this button again to activate the plugin.","extendify-local"),attachTo:{element:"#the-list .plugin-card:first-child .install-now",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?-15:15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Upload Plugin","extendify-local"),text:(0,r.__)("If you have a plugin from an external source, you can upload it directly here.","extendify-local"),attachTo:{element:".upload-view-toggle",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?-15:15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}}]},f={id:"plugin-management-tour",title:(0,r.__)("Plugin management","extendify-local"),message:(0,r.__)("Learn how to manage plugins","extendify-local"),settings:{allowOverflow:!1,startFrom:[`${window.extSharedData.adminUrl}plugins.php`]},onStart:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-plugins").classList.add("opensub")},steps:[{title:(0,r.__)("Installed Plugins menu","extendify-local"),text:(0,r.__)("Click this menu to see and manage the plugins you have installed.","extendify-local"),attachTo:{element:"#menu-plugins ul > li:nth-child(2)",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onDetach:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-plugins").classList.remove("opensub")}}},{title:(0,r.__)("Installed plugins","extendify-local"),text:(0,r.__)("See all plugins installed on your site. This includes plugins that are active and deactivated.","extendify-local"),attachTo:{element:"tbody#the-list > tr:nth-child(1)",offset:{marginTop:15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"bottom"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}},{title:(0,r.__)("Deactivate/activate option","extendify-local"),text:(0,r.__)("Under each plugin you can activate or deactivate it.","extendify-local"),attachTo:{element:"tbody#the-list > tr:nth-child(1) > td.plugin-title",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Add another","extendify-local"),text:(0,r.__)("Click here to add another plugin to your site.","extendify-local"),attachTo:{element:"a.page-title-action",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?-15:15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}}]},h={id:"site-assistant-tour",title:(0,r.__)("Site Assistant","extendify-local"),message:(0,r.__)("Tour the Site Assistant","extendify-local"),settings:{allowOverflow:!1,startFrom:[`${window.extSharedData.adminUrl}admin.php?page=extendify-assist#dashboard`]},steps:[{title:(0,r.__)("Tasks","extendify-local"),text:(0,r.__)("Now that you've created your starter site, make it your own with these follow up tasks.","extendify-local"),showOnlyIf:()=>document.getElementById("assist-tasks-module"),attachTo:{element:"#assist-tasks-module",offset:{marginTop:window.innerWidth<=1151?-15:2,marginLeft:window.innerWidth<=1151?-25:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Quick Links","extendify-local"),text:(0,r.__)("Easily access some of the most common items in WordPress with these quick links.","extendify-local"),attachTo:{element:"#assist-quick-links-module",offset:{marginTop:window.innerWidth<=1151?-15:2,marginLeft:window.innerWidth<=1151?-25:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onAttach:()=>{}}},{title:(0,r.__)("Website Tools & Plugins","extendify-local"),text:(0,r.__)("See our personalized recommendations for you that will help you accomplish your goals.","extendify-local"),showOnlyIf:()=>document.querySelector("#assist-recommendations-module"),attachTo:{element:"#assist-recommendations-module",offset:{marginTop:window.innerWidth<=1151?-15:2,marginLeft:window.innerWidth<=1151?-25:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}},{title:(0,r.__)("Visit your site","extendify-local"),text:(0,r.__)("You can always visit your site by clicking this button.","extendify-local"),attachTo:{element:"#assist-menu-bar",offset:{marginTop:20,marginLeft:(0,r.isRTL)()?5:-5},position:{x:(0,r.isRTL)()?"right":"left",y:"bottom"},hook:(0,r.isRTL)()?"top right":"top left",boxPadding:{top:5,bottom:5,left:5,right:5}},events:{}},{title:(0,r.__)("Site Assistant","extendify-local"),text:(0,r.__)("Come back to the Site Assistant any time by clicking the menu item.","extendify-local"),attachTo:{element:"#toplevel_page_extendify-assist",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onAttach:()=>{document.body.classList.contains("folded")&&(document.body.classList.remove("folded"),document.body.classList.add("temp-open"))},onDetach:()=>{document.body.classList.contains("temp-open")&&(document.body.classList.remove("temp-open"),document.body.classList.add("folded"))}}}]},x={id:"users-screen-tour",title:(0,r.__)("Users screen","extendify-local"),message:(0,r.__)("Tour the Users screen","extendify-local"),settings:{allowOverflow:!0,startFrom:[`${window.extSharedData.adminUrl}users.php`]},onStart:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-users").classList.add("opensub")},steps:[{title:(0,r.__)("All Users menu","extendify-local"),text:(0,r.__)("Click here to view and manage the users on your site.","extendify-local"),attachTo:{element:"#menu-users ul > li:nth-child(2)",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onDetach:()=>{document.body.classList.contains("folded")&&document.querySelector("#menu-users").classList.remove("opensub")}}},{title:(0,r.__)("Users","extendify-local"),text:(0,r.__)("See all of your users, including admin users in this table.","extendify-local"),attachTo:{element:"tbody#the-list > tr:nth-child(1)",offset:{marginTop:15,marginLeft:0},position:{x:(0,r.isRTL)()?"left":"right",y:"bottom"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}},{title:(0,r.__)("Edit user information","extendify-local"),text:(0,r.__)("Click the edit button to change the user's role, manage their account, or change their profile information.","extendify-local"),attachTo:{element:"tbody#the-list > tr:nth-child(1) > td.username",offset:{marginTop:0,marginLeft:(0,r.isRTL)()?-15:15},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{onAttach:()=>{document.querySelector("tbody#the-list > tr:nth-child(1) > td.username .row-actions").style.left="0"},onDetach:()=>{document.querySelector("tbody#the-list > tr:nth-child(1) > td.username .row-actions").style.left="-9999em"}}},{title:(0,r.__)("Search for users","extendify-local"),text:(0,r.__)("Use the search bar to find a particular user.","extendify-local"),attachTo:{element:"p.search-box",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?15:-15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"right":"left",y:"top"},hook:(0,r.isRTL)()?"top left":"top right"},events:{}},{title:(0,r.__)("Add a new user","extendify-local"),text:(0,r.__)("Click the Add New button to add a new user to your site.","extendify-local"),attachTo:{element:".page-title-action",offset:{marginTop:-5,marginLeft:(0,r.isRTL)()?-15:15},boxPadding:{top:5,bottom:5,left:5,right:5},position:{x:(0,r.isRTL)()?"left":"right",y:"top"},hook:(0,r.isRTL)()?"top right":"top left"},events:{}}]};var y=n(2619);const w={"plugin-install-tour":g,"plugin-management-tour":f,"page-editor-tour":m,"library-tour":i,"users-screen-tour":x,"site-assistant-tour":h};(0,y.addFilter)("extendify.tours","extendify/extra-tours",e=>window.extSharedData?.showAIPageCreation?{...e,"page-creator-tour":a}:e);const b=(0,y.applyFilters)("extendify.tours",w)},6097(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});const o=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=(e,t)=>{if(!e)return[];const n=new RegExp(`^(${o(t)}.*)--(\\d+)$`,"i"),s=[],r=new Set,i=[e,...e.querySelectorAll(`[class*="${t}"]`)];for(const e of i)for(const t of e.classList){const e=t.match(n);if(!e)continue;const o=e[1],i=Number(e[2]);r.has(i)||(r.add(i),s.push({prefix:o,number:i}))}return s},r=(e,t)=>{const n=document.createElement("div");return n.innerHTML=e,s(n,t)},i=(e,t,n)=>{if(!n||!n.size)return e;const s=document.createElement("div");s.innerHTML=e;const r=new RegExp(`^${o(t)}.*--(\\d+)$`,"i"),i=s.querySelectorAll(`[class*="${t}"]`);for(const e of i){const o=Array.from(e.classList);let s=!1;for(const[e,t]of o.entries()){const i=t.match(r);if(!i)continue;const a=Number(i[1]);if(!n.has(a))continue;const l=n.get(a),c=t.replace(/--(\d+)$/,`--${l}`);c!==t&&(o[e]=c,s=!0)}o.includes(t)||(o.push(t),s=!0),s&&(e.className=o.join(" "))}return s.innerHTML};var a=n(3410),l=n(1455),c=n.n(l),d=n(6087),u=n(7723),m=n(790);const p=["is-style-ext-preset","is-style-outline"],g=({children:e})=>(0,m.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),f=({children:e})=>(0,m.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,m.jsx)("div",{className:"p-3",children:e})}),{context:h,abilities:x}=window.extAgentData,y={available:()=>x?.canEditPosts&&!h?.adminPage&&h?.postId&&!h?.isBlogPage&&h?.isBlockTheme&&document.querySelector(".wp-site-blocks"),id:"block-general",requires:["block"],whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n,onRetry:o})=>{const{block:l}=(0,a.Y)(),[h,x]=(0,d.useState)(!0),y=(0,d.useRef)(null),w=(0,d.useCallback)(()=>{const e=document.querySelector("[data-extendify-temp-replacement]");y.current&&(e?.parentNode?.insertBefore(y.current,e),y.current=null),e&&e.remove(),n()},[n]),b=(0,d.useCallback)(()=>{const e=document.querySelector("[data-extendify-temp-replacement]");y.current&&(e?.parentNode?.insertBefore(y.current,e),y.current=null),e&&e.remove(),o()},[o]);return(0,d.useEffect)(()=>{c()({path:"/extendify/v1/agent/get-block-html",method:"POST",data:{blockCode:e.newContent}}).then(({content:e})=>{window.dispatchEvent(new Event("extendify-agent:remove-block-highlight"));const t=document.querySelector(`[data-extendify-agent-block-id="${l.id}"]`);if(!t&&!y.current)return n();if(y.current)return;y.current=t;const o=((e,t,n)=>{let o=e;for(const e of n){const n=s(t,e),a=r(o,e);if(!n.length||!a.length)continue;const l=new Map;for(const{prefix:e,number:t}of n)l.has(e)||l.set(e,[]),l.get(e).push(t);const c=new Map;for(const{prefix:e,number:t}of a)c.has(e)||c.set(e,[]),c.get(e).push(t);const d=new Map;for(const[e,t]of c){const n=l.get(e);if(!n)continue;const o=Math.min(t.length,n.length);for(const[e,s]of t.entries()){if(e>=o)break;s!==n[e]&&d.set(s,n[e])}}d.size&&(o=i(o,e,d))}return o})(e,t.cloneNode(!0),p),a=document.createElement("template");a.innerHTML=o||'<div style="display:none"></div>';const c=a.content.firstElementChild;if(!c)return n();const d=/^has-([\w-]+-)?(background-color|color|font-size|gradient-background)$|^has-background$|^has-text-color$/,u=new Set(c.classList);t.classList.forEach(e=>{u.has(e)||d.test(e)||c.classList.add(e)}),c.setAttribute("data-extendify-temp-replacement",!0),t.parentNode.insertBefore(c,t.nextSibling),t.parentNode?.removeChild(t),x(!1)})},[l,e,n]),h?(0,m.jsx)(g,{children:(0,m.jsx)(f,{children:(0,u.__)("Loading...","extendify-local")})}):(0,m.jsxs)(g,{children:[(0,m.jsx)(f,{children:(0,m.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,u.__)("The agent has made the changes in the browser. Please review and confirm.","extendify-local")})}),(0,m.jsxs)("div",{className:"flex flex-wrap justify-start gap-2 p-3",children:[(0,m.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:w,children:(0,u.__)("Cancel","extendify-local")}),(0,m.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:b,children:(0,u.__)("Try Again","extendify-local")}),(0,m.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:async()=>{await t({data:e,shouldRefreshPage:!0})},children:(0,u.__)("Save","extendify-local")})]})]})}}}},8446(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>b});var o=n(286),s=n(8459),r=n(3410),i=n(1380),a=n(9324),l=n(4866),c=n(9363),d=n(4997),u=n(6427),m=n(8443),p=n(6087),g=n(7723),f=n(790);const h=({children:e})=>(0,f.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),x=({children:e})=>(0,f.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,f.jsx)("div",{className:"p-3",children:e})}),{context:y,abilities:w}=window.extAgentData,b={available:()=>w?.canEditPosts&&w?.canUploadMedia&&!y?.adminPage&&y?.postId&&!y?.isBlogPage&&y?.isBlockTheme&&document.querySelector(".wp-site-blocks"),id:"block-generate-image",requires:["block"],whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n,onRetry:y})=>{const[w,b]=(0,p.useState)(null),[v,j]=(0,p.useState)(!1),[k,_]=(0,p.useState)(null),[S,T]=(0,p.useState)(0),[L,C]=(0,p.useState)(!1),{imageCredits:N,updateImageCredits:E,subtractOneCredit:A,resetImageCredits:P}=(0,l.C)(),{addMessage:I,messages:R}=(0,s.L)(),{block:D}=(0,r.Y)(),$=0===Number(N.remaining),M=(0,p.useCallback)(()=>{if(!w)return!1;const t=document.querySelector(`[data-extendify-agent-block-id="${D?.id}"] > img[src="${CSS.escape(w)}"]`);return!!t&&(t.src=e.url,!0)},[D?.id,w,e.url]),B=(0,p.useCallback)(()=>{w?(M(),n()):n()},[n,w,M]),q=(0,p.useCallback)(()=>{M(),y()},[y,M]);return(0,p.useEffect)(()=>{0===(0,d.getBlockTypes)().length&&(0,c.registerCoreBlocks)()},[]),(0,p.useEffect)(()=>{w||$||(j(!0),A(),(async()=>{try{const{imageCredits:n,images:o}=await(0,i.Fz)({prompt:e.prompt});E(n);const s=o?.[0]?.url;if(!s)throw new Error((0,g.__)("No image returned","extendify-local"));await(t=s,new Promise((e,n)=>{const o=new Image;o.onload=()=>e(t),o.onerror=n,o.src=t})),b(s),j(!1)}catch(e){_(e?.message||(0,g.__)("An unknown error occurred.","extendify-local")),e?.imageCredits&&E(e.imageCredits),j(!1)}var t})())},[e.prompt,w,$,A,E]),(0,p.useEffect)(()=>{const e=()=>{T(e=>e+1),N.refresh&&(new Date(Number(N.refresh))>new Date||P())};0===S&&e();const t=setTimeout(e,1e3);return()=>clearTimeout(t)},[N,P,S]),(0,p.useEffect)(()=>{if(!w)return;const t=document.querySelector(`[data-extendify-agent-block-id="${D?.id}"] > img[src="${CSS.escape(e.url)}"]`);t&&(t.srcset="",t.src=w)},[w,e.url,D?.id]),(0,p.useEffect)(()=>{if(!k)return;const e=setTimeout(()=>B(),100),t=(0,g.sprintf)(
// translators: A chat message shown to the user
// translators: A chat message shown to the user
(0,g.__)("Error generating image: %s","extendify-local"),k),n=R.at(-1)?.details?.content;return t===n||I("message",{role:"assistant",content:t,error:!0}),()=>clearTimeout(e)},[k,B,I,R]),(0,p.useEffect)(()=>{if(!$||v||w)return;const e=setTimeout(()=>B(),1500),t=(0,g.sprintf)((0,g.__)("It looks like you've run out of credits. They'll refresh in %s, so check back then.","extendify-local"),(0,m.humanTimeDiff)(new Date(Number(N.refresh)))),n=R.at(-1)?.details?.content;if(t===n)return()=>clearTimeout(e);const o=setTimeout(()=>{I("message",{role:"assistant",content:t,error:!0})},1e3);return()=>{clearTimeout(e),clearTimeout(o)}},[$,v,w,B,I,R,N.refresh]),k||!w&&$&&!v?null:v?(0,f.jsx)(h,{children:(0,f.jsx)(x,{children:(0,f.jsxs)("p",{className:"m-0 p-0 flex gap-0.5 items-center text-sm text-gray-900",children:[(0,f.jsx)(u.Spinner,{className:"my-0 h-4 w-4"}),(0,f.jsx)("span",{children:(0,g.__)("Generating image...","extendify-local")})]})})}):(0,f.jsxs)(h,{children:[(0,f.jsx)(x,{children:(0,f.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,g.__)("Image generated successfully!","extendify-local")})}),(0,f.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,f.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:B,children:(0,g.__)("Cancel","extendify-local")}),(0,f.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900 disabled:opacity-50",onClick:q,disabled:L||$,children:(0,g.__)("Try Again","extendify-local")}),(0,f.jsx)("button",{type:"button",className:"flex-1 rounded border border-design-main bg-design-main p-2 text-sm text-white disabled:opacity-50",disabled:L,onClick:async()=>{if(!L){C(!0);try{const n=await(0,a.GV)(null,w,"ai-generated");await t({data:{previousContent:e.previousContent,newContent:(0,o.L)(e,n)},shouldRefreshPage:!0})}catch(e){C(!1),_(e?.message||(0,g.__)("Failed to save image","extendify-local"))}}},children:L?(0,g.__)("Saving...","extendify-local"):(0,g.__)("Save","extendify-local")})]}),(0,f.jsx)("div",{className:"text-pretty px-4 pb-2 text-center text-xss leading-none text-gray-700",children:(0,g.sprintf)(
// translators: %1$s is the number of credits remaining, %2$s is the total credits
// translators: %1$s is the number of credits remaining, %2$s is the total credits
(0,g.__)("You have %1$s of %2$s daily image credits remaining.","extendify-local"),N.remaining,N.total)})]})}}}},1598(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(1455),s=n.n(o);const r=async({previousContent:e,newContent:t})=>{const{postType:n,postId:o}=window.extAgentData.context,r=await s()({path:`/wp/v2/types/${encodeURIComponent(n)}`}),i=r?.rest_base||`${n}s`,a=(await s()({path:`/wp/v2/${i}/${o}?context=edit`})).content.raw.replace(e,t);await s()({path:`/wp/v2/${i}/${o}`,method:"POST",data:{content:a}})}},2853(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(3410),s=n(1455),r=n.n(s);const i=async()=>{const{block:e}=o.Y.getState(),{postId:t}=window.extAgentData.context,n=await r()({path:`/extendify/v1/agent/get-block-code?postId=${t}&blockId=${e.id}`});return{previousContent:n?.block??""}}},1256(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(1455),s=n.n(o);const r=async({previousContent:e,newContent:t})=>{const{postType:n,postId:o}=window.extAgentData.context,r=await s()({path:`/wp/v2/types/${encodeURIComponent(n)}`}),i=r?.rest_base||`${n}s`,a=(await s()({path:`/wp/v2/${i}/${o}?context=edit`})).content.raw.replace(e,t);await s()({path:`/wp/v2/${i}/${o}`,method:"POST",data:{content:a}})}},2628(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(1455),s=n.n(o);const r=async({previousContent:e,newContent:t})=>{const{postType:n,postId:o}=window.extAgentData.context,r=await s()({path:`/wp/v2/types/${encodeURIComponent(n)}`}),i=r?.rest_base||`${n}s`,a=(await s()({path:`/wp/v2/${i}/${o}?context=edit`})).content.raw.replace(e,t);await s()({path:`/wp/v2/${i}/${o}`,method:"POST",data:{content:a}})}},8998(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(1455),s=n.n(o);const r=async({imageId:e})=>{await s()({path:"/wp/v2/settings",method:"POST",data:{site_logo:e}})}},7882(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(3944);const{context:s,abilities:r}=window.extAgentData,i={available:()=>r?.canUploadMedia&&!s?.adminPage&&s?.postId&&!s?.isBlogPage&&s?.isBlockTheme&&document.querySelector(".wp-site-blocks"),id:"block-update-logo",requires:["block"],whenFinished:{component:o.N}}},1804(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});var o=n(286),s=n(8377),r=n(3410),i=n(9363),a=n(4997),l=n(6087),c=n(7723),d=n(6480),u=n(790);const m=(0,c.__)("Open Media Library","extendify-local"),p=({children:e})=>(0,u.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),g=({children:e})=>(0,u.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,u.jsx)("div",{className:"p-3",children:e})}),f=({handleConfirm:e,handleCancel:t})=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g,{children:(0,u.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,c.__)("The agent has made the changes in the browser. Please review and confirm.","extendify-local")})}),(0,u.jsxs)("div",{className:"flex flex-wrap justify-start gap-2 p-3",children:[(0,u.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:t,children:(0,c.__)("Cancel","extendify-local")}),(0,u.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:e,children:(0,c.__)("Save","extendify-local")})]})]}),{context:h,abilities:x}=window.extAgentData,y={available:()=>x?.canEditPosts&&x?.canUploadMedia&&!h?.adminPage&&h?.postId&&!h?.isBlogPage&&h?.isBlockTheme&&document.querySelector(".wp-site-blocks"),id:"block-upload-image",requires:["block"],whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const[h,x]=(0,l.useState)(!1),[y,w]=(0,l.useState)(null),{block:b}=(0,r.Y)(),v=(0,l.useCallback)(()=>{if(!y)return void n();const t=document.querySelector(`[data-extendify-agent-block-id="${b?.id}"] > img[src="${CSS.escape(y.url)}"]`);t&&(t.src=e.url),n()},[n,e,b,y]);return(0,l.useEffect)(()=>{0===(0,a.getBlockTypes)().length&&(0,i.registerCoreBlocks)()},[]),(0,l.useEffect)(()=>{const e=document.createElement("style");return e.textContent=".media-modal {\n\t\t\tz-index: 999999 !important;\n\t\t}",document.head.appendChild(e),()=>e.remove()},[]),(0,l.useEffect)(()=>((0,s.q)(),()=>(0,s.P)()),[]),h?(0,u.jsx)(p,{children:(0,u.jsx)(f,{handleConfirm:async()=>{y&&await t({data:{previousContent:e.previousContent,newContent:(0,o.L)(e,y)},shouldRefreshPage:!0})},handleCancel:v})}):(0,u.jsxs)(p,{children:[(0,u.jsx)(g,{children:(0,u.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,c.sprintf)((0,c.__)('The agent has requested the media library. Press "%s" to upload or select an image.',"extendify-local"),m)})}),(0,u.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,u.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:n,children:(0,c.__)("Cancel","extendify-local")}),(0,u.jsx)(d.MediaUpload,{title:(0,c.__)("Select or Upload Image","extendify-local"),onSelect:t=>{const n=document.querySelector(`[data-extendify-agent-block-id="${b?.id}"] > img[src="${CSS.escape(e.url)}"]`);n&&(n.srcset="",n.src=t.url,x(!0),w(t))},allowedTypes:["image"],modalClass:"image__media-modal",render:({open:e})=>(0,u.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:e,children:m})})]})]})}}}},439(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c});var o=n(6087),s=n(7723),r=n(790);const{homeUrl:i}=window.extSharedData||{},{context:a,abilities:l}=window.extAgentData,c={available:()=>!["page","post"].includes(a?.adminPage)&&a.isBlockTheme&&l.canEditPosts,id:"create-page",whenFinished:{component:({inputs:e,onConfirm:t})=>{const n=(0,o.useCallback)(()=>{e.postId&&window.open(`${i}/?page_id=${e.postId}`,"_self"),t()},[e.postId,t]);return(0,r.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,r.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,s.__)("The agent has finished creating your page. Press take me there to visit your new page or dismiss to remove this notice.","extendify-local")})})}),(0,r.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,r.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:t,children:(0,s.__)("Dismiss","extendify-local")}),(0,r.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:n,children:(0,s.__)("Take me there","extendify-local")})]})]})}}}},1352(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(6087);const{abilities:s,context:r}=window.extAgentData,i={available:()=>s?.canEditPost&&r?.usingBlockEditor&&r?.adminPage&&r?.postId,id:"edit-post-strings-editor",whenFinished:{component:({inputs:e,onConfirm:t})=>((0,o.useEffect)(()=>{const n=requestAnimationFrame(()=>{t({data:e})});return()=>cancelAnimationFrame(n)},[e,t]),null)}}},1429(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c});var o=n(6087),s=n(7723),r=n(790);const i=e=>{const t=document.getElementById("extendify-agent-chat"),n=e=>t?.contains(e),o=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1);let s=o.nextNode();for(;s;){const t=s;if(s=o.nextNode(),!n(t.parentNode))for(const{original:n,updated:o}of e??[]){const e=t.nodeValue??"";e.includes(n)&&(t.nodeValue=e.split(n).join(o))}}["alt","title","aria-label"].forEach(t=>{document.querySelectorAll(`[${t}]`).forEach(o=>{if(!n(o))for(const{original:n,updated:s}of e??[]){const e=o.getAttribute(t);e?.includes(n)&&o.setAttribute(t,e.split(n).join(s))}})})},{context:a,abilities:l}=window.extAgentData,c={available:()=>l?.canEditPosts&&!a?.adminPage&&a?.postId&&!a?.isBlogPage&&a.usingBlockEditor,id:"edit-post-strings",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n,onRetry:a})=>{const l=(0,o.useCallback)(()=>{const t=(e.replacements||[]).map(({original:e,updated:t})=>({original:t,updated:e}));i(t),a()},[a,e]),c=(0,o.useCallback)(()=>{const t=(e.replacements||[]).map(({original:e,updated:t})=>({original:t,updated:e}));n(),i(t)},[e,n]);return(0,o.useEffect)(()=>{i(e.replacements)},[e.replacements]),(0,r.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,r.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,s.__)("The agent has made the changes in the browser. Please review and confirm.","extendify-local")})})}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-start gap-2 p-3",children:[(0,r.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:c,children:(0,s.__)("Cancel","extendify-local")}),(0,r.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:l,children:(0,s.__)("Try Again","extendify-local")}),(0,r.jsx)("button",{type:"button",className:"flex-1 rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:()=>{t({data:e})},children:(0,s.__)("Save","extendify-local")})]})]})}}}},8942(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>j});var o=n(9246),s=n(8579),r=n(6572),i=n(9130),a=n(202),l=n(6727),c=n(7828),d=n(8512),u=n(1455),m=n.n(u),p=n(9363),g=n(4997),f=n(7143),h=n(3656),x=n(6087),y=n(790);const{pageTitlePattern:w}=window.extPageCreator??{},b=({pageDescription:e,onComplete:t})=>{const{page:n,loading:o}=(0,s.f)(),{setDescription:c}=(0,i.C)(),{editPost:d}=(0,f.useDispatch)(h.store),[u,m]=(0,x.useState)([]),y=(0,x.useRef)(!1),{theme:b,templates:j}=(0,f.useSelect)(e=>{const t=e("core"),n=t.getCurrentTheme();return{theme:n,templates:t.getEntityRecords("postType","wp_template",{per_page:-1,context:"edit",theme:n?.stylesheet})}},[]);return(0,x.useEffect)(()=>{0===(0,g.getBlockTypes)().length&&(0,p.registerCoreBlocks)()},[]),(0,x.useEffect)(()=>{c(e)},[e,c]),(0,x.useEffect)(()=>{!n&&o||y.current||(y.current=!0,(async()=>{await(0,l.D)(w);const e=await(0,r.d)(n?.patterns);await(0,a.Y)({patterns:e}),m(e)})())},[o,n,m]),(0,x.useEffect)(()=>{if(!u?.length||!y.current)return;if(!b||!Array.isArray(j))return;const e="extendable"===b.textdomain&&j.some(e=>"page-with-title"===e.slug),o=setTimeout(async()=>{const o=await v({hasPageWithTitle:e,patterns:u,title:n.title});t(o)},1e3);return()=>clearTimeout(o)},[u,d,n,b,j,t]),null},v=async({hasPageWithTitle:e,patterns:t,title:n})=>{const s=(e?t.filter(e=>!e.patternTypes?.includes("page-title")):t).map(({code:e,...t})=>({...t,code:e.replace(/href="#extendify-([^"]+)"/g,'href="#"')})),r=s.map(({code:e})=>e).join(""),i=(0,g.rawHandler)({HTML:r}),a=[],l=new Set;for(const[e,t]of i.entries()){const n=s[e].patternTypes?.[0],r=(0,g.serialize)(t),{slug:i}=Object.values(d.Q).find(({alias:e})=>e.includes(n))||{};!l.has(i)&&i?(l.add(i),a.push((0,o.f)(r,i))):a.push(r)}const c={title:n,status:"draft",content:a.join(""),template:e?"page-with-title":"no-title-sticky-header",meta:{made_with_extendify_launch:!0}};return await m()({path:"/wp/v2/pages",method:"POST",data:c})},j=async({pageDescription:e})=>{if(!e||0===e.trim().length)throw new Error("Page description cannot be empty");const t=await(e=>new Promise((t,n)=>{const o=document.createElement("div");o.style.display="none",document.body.appendChild(o);let s,r=!1;const i=()=>{s&&clearTimeout(s),o.parentNode&&o.remove()},a=e=>{r||(r=!0,i(),e?t(e):n(new Error("Something went wrong while creating the page")))};s=setTimeout(()=>{r||a(null)},18e4);try{(0,c.X)((0,y.jsx)(b,{onComplete:e=>{clearTimeout(s),a(e)},pageDescription:e}),o)}catch(e){clearTimeout(s),i(),n(e)}}))(e);if(!t?.id)throw new Error("Page creation failed");return{postId:Number(t.id)}}},3571(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),s=n.n(o);const r={page:"pages",post:"posts"},i=async({postId:e,postType:t})=>{const n=r[t]||t;return{post_status:(await s()({path:`/wp/v2/${n}/${e}?context=view`})).status}}},5261(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(5713),s=n(7143);const r=async()=>{const e=(0,o.E)();"template-locked"===e&&await(0,o.u)("post-only");const t=(0,s.select)("core/block-editor").getBlocks(),n=(0,s.select)("core/editor").getEditedPostAttribute("title"),r=l([n,...i(t)]);return"template-locked"===e&&(0,o.u)("template-locked"),{post_strings:r}},i=e=>e.flatMap(e=>[...["content","caption","alt","title","value"].map(t=>"string"==typeof e?.attributes?.[t]?e.attributes[t].trim():null).map(()=>"string"==typeof e?.attributes?.text?.text?e.attributes.text.text.trim():null).filter(Boolean),...e.originalContent?[c(e.originalContent),...d(e.originalContent)].filter(Boolean):[],...i(e.innerBlocks||[])]),a=e=>new Set(e.filter(Boolean)),l=e=>[...a(e)],c=e=>e.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim(),d=e=>{const t=[],n=e.match(/alt="([^"]*)"/);n?.[1]&&t.push(n[1].trim());const o=e.match(/title="([^"]*)"/);return o?.[1]&&t.push(o[1].trim()),t}},1557(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),s=n.n(o);const r=window.wp.blockSerializationDefaultParser,i=async({postId:e,postType:t})=>{const n="page"===t?"pages":"posts",o=await s()({path:`/wp/v2/${n}/${e}?context=edit`}),i=(0,r.parse)(o.content.raw);return{post_strings:l([o.title.raw,...u(i)])}},a=e=>new Set(e.filter(Boolean)),l=e=>[...a(e)],c=e=>e.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim(),d=e=>{const t=[],n=e.match(/alt="([^"]*)"/);n?.[1]&&t.push(n[1].trim());const o=e.match(/title="([^"]*)"/);return o?.[1]&&t.push(o[1].trim()),t},u=e=>e&&0!==e.length?e.flatMap(e=>[...e.innerContent?e.innerContent.filter(Boolean).flatMap(e=>[c(e),...d(e)]).filter(Boolean):[],...["content","caption","alt","title","value"].map(t=>"string"==typeof e.attrs?.[t]?e.attrs[t].trim():null).filter(Boolean),...u(e.innerBlocks||[])]):[]},9982(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),s=n.n(o);const r={page:"pages",post:"posts"},i=async({postId:e,postType:t,updatedStatus:n})=>{const o=r[t]||t;return await s()({path:`/wp/v2/${o}/${e}?context=edit`,method:"POST",data:{status:n}})}},5092(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(5713),s=n(4997),r=n(7143);const i=async({replacements:e})=>{const t=(0,o.E)();"template-locked"===t&&await(0,o.u)("post-only");const n=(0,r.select)("core/editor").getEditedPostAttribute("title"),s=a(n,e);(0,r.dispatch)("core/editor").editPost({title:s}),(0,r.select)("core/block-editor").getBlocks().flatMap(t=>l(t,e)).forEach(({clientId:e,block:t})=>{(0,r.dispatch)("core/block-editor").replaceBlock(e,t)}),"template-locked"===t&&(0,o.u)("template-locked")},a=(e,t)=>t.filter(e=>""!==e.original).reduce((e,{original:t,updated:n})=>e.split(t).join(n),e),l=(e,t)=>{const n=[],o={...e.attributes};let r=!1;if(["content","caption","alt","title","value","text"].forEach(e=>{const n=o[e],s=n&&"function"==typeof n.toString?n.toString():n;if("string"==typeof s){const n=a(s,t);n!==s&&(o[e]=n,r=!0)}}),r){const t=(0,s.createBlock)(e.name,o,e.innerBlocks);n.push({clientId:e.clientId,block:t})}return e.innerBlocks.forEach(e=>{n.push(...l(e,t))}),n}},6636(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(1455),s=n.n(o);const r=async({postId:e,postType:t,replacements:n})=>{const o="page"===t?"pages":"posts",r=await s()({path:`/wp/v2/${o}/${e}?context=edit`});let i=r.content.raw,a=r.title.raw;const l=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");for(const{original:e,updated:t}of n){const n=new RegExp(l(e),"g");i=i.replace(n,t),a=a.split(e).join(t)}return await s()({path:`/wp/v2/${o}/${e}`,method:"POST",data:{content:i,title:a}})}},9133(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});const o=()=>({success:!0})},1755(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c});var o=n(6087),s=n(7723),r=n(790);const i={draft:(0,s.__)("Draft"),publish:(0,s.__)("Published")},{context:a,abilities:l}=window.extAgentData,c={available:()=>l?.canEditPosts&&!a?.adminPage&&a?.postId,id:"update-post-status",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const a=(0,o.useCallback)(()=>{n()},[n]);return(0,r.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,r.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,s.sprintf)(
// translators: %1$s is the current page or post status, and %2$s is the updated page or post status.
// translators: %1$s is the current page or post status, and %2$s is the updated page or post status.
(0,s.__)('Status will change from "%s" to "%s", please confirm to save.',"extendify-local"),i[e.postStatus],i[e.updatedStatus])})})}),(0,r.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,r.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:a,children:(0,s.__)("Cancel","extendify-local")}),(0,r.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:()=>{window?.extAgentData?.context&&(window.extAgentData.context.postStatus=e.updatedStatus),t({data:e})},children:(0,s.__)("Confirm","extendify-local")})]})]})}}}},3364(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(8969);const s=async({query:e})=>{const t={documentation:"No relevant documentation found"},n=new URLSearchParams({search:e}),s=await fetch(`${o.XQ}/api/posts?${n.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"}}).catch(()=>({ok:!1}));if(!s.ok)return t;const r=await s.json();if(!r?.[0]?.slug)return t;const i=await fetch(`${o.XQ}/api/posts/${r?.[0]?.slug}`,{method:"GET",headers:{"Content-Type":"application/json"}}).catch(()=>({ok:!1}));if(!i.ok)return t;const a=await i.json();return a?.content?{documentation:a.content}:t}},7806(e,t,n){"use strict";n.d(t,{L:()=>d,e:()=>c});var o=n(5295),s=n(9035),r=n(319),i=n(5506),a=n(790);const l=Object.values(s.A),c=({onConfirm:e})=>{if(0!==l.length)return(0,a.jsxs)("div",{className:"flex w-full items-start gap-2.5 p-2",children:[(0,a.jsx)("div",{className:"w-7 flex-shrink-0"}),(0,a.jsx)("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:l.map(t=>(0,a.jsx)(d,{tour:t,onClick:()=>{e?.()}},t.id))})]})},d=({tour:e,onClick:t})=>{const{startTour:n}=(0,o.n)();return(0,a.jsxs)("div",{className:"group relative flex items-center",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-sm opacity-10 transition-opacity duration-100 group-hover:bg-design-main"}),(0,a.jsxs)("button",{type:"button",className:"flex w-full items-center gap-2 rounded-sm border border-gray-300 bg-transparent p-3 text-left text-sm leading-none text-gray-900 focus:outline-hidden focus:ring-wp focus:ring-design-main group-hover:ring-wp group-hover:ring-design-main",onClick:()=>{n(e),t?.()},children:[(0,a.jsx)(r.A,{icon:i.A,className:"h-6 w-6 fill-gray-700 leading-none"}),e.message]})]})}},5749(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});const o={available:()=>!0,id:"list-tours",whenFinished:{component:n(7806).e}}},7275(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>f});var o=n(1380),s=n(9324),r=n(6087),i=n(7723),a=n(319),l=n(2344),c=n(790);const d=({onClick:e})=>(0,c.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:e,children:(0,i.__)("Cancel","extendify-local")}),u=({onClick:e,text:t})=>(0,c.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:e,children:t}),m=({children:e})=>(0,c.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),p=({children:e})=>(0,c.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,c.jsx)("div",{className:"p-3",children:e})}),{abilities:g}=window.extAgentData,f={available:()=>g.canInstallPlugins&&g.canActivatePlugins,id:"recommend-plugins",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const[g,f]=(0,r.useState)("idle"),h=()=>{f("installing")};return(0,r.useEffect)(()=>{if(!e.alreadyInstalled)return;const t=requestAnimationFrame(()=>{n?.()});return()=>cancelAnimationFrame(t)},[e,n]),(0,r.useEffect)(()=>{let n=!1;return(async()=>{if("installing"!==g){if("activating"===g){try{await(0,s.Bf)(e.pluginSlug)}catch{try{await new Promise(e=>setTimeout(e,500)),await(0,s.Bf)(e.pluginSlug)}catch{return void(n||f("error"))}}if(n)return;try{await(0,o.yB)({slug:e.pluginSlug,source:"ai-agent-recommendation"}),await new Promise(e=>{const{adminUrl:t}=window.extSharedData,n=Object.assign(document.createElement("iframe"),{title:"Admin Loader",src:t,style:"display: none;",sandbox:"allow-same-origin allow-scripts allow-forms",onload:()=>{document.body.removeChild(n),e()}});document.body.appendChild(n)}),n||t({shouldRefreshPage:!0})}catch{n||f("error")}}}else try{if(await(0,s.xZ)(e.pluginSlug),n)return;f("activating")}catch(e){if(n)return;if("folder_exists"===e?.code)return void f("activating");f("error")}})(),()=>{n=!0}},[g,t,e]),"error"===g?(0,c.jsxs)(m,{children:[(0,c.jsx)(p,{children:(0,c.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,i.__)("There was an error installing the plugin. You may try again","extendify-local")})}),(0,c.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,c.jsx)(d,{onClick:n}),(0,c.jsx)(u,{onClick:h,text:(0,i.__)("Try Again","extendify-local")})]})]}):["installing","activating"].includes(g)?(0,c.jsx)(m,{children:(0,c.jsx)(p,{children:(0,c.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:"installing"===g?(0,i.__)("Installing plugin...","extendify-local"):(0,i.__)("Activating plugin...","extendify-local")})})}):(0,c.jsxs)(m,{children:[(0,c.jsx)(p,{children:(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,i.__)("The agent is requesting to install and activate a plugin.","extendify-local")}),(0,c.jsxs)("div",{className:"flex justify-between gap-1",children:[e.pluginName&&(0,c.jsx)("div",{className:"text-base flex-1 font-bold",children:e.pluginName}),(0,c.jsxs)("a",{className:"flex flex-1 items-end text-gray-900 hover:text-gray-900 hover:decoration-solid",href:`https://wordpress.org/plugins/${e.pluginSlug}`,target:"_blank",rel:"noopener noreferrer",children:[(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,i.sprintf)(
// translators: %1$s and %2$s are HTML tags. %1$s opens a span with screen-reader-only text, and %2$s closes that span.
// translators: %1$s and %2$s are HTML tags. %1$s opens a span with screen-reader-only text, and %2$s closes that span.
(0,i.__)("Plugin Details %1$s(opens in a new tab)%2$s","extendify-local"),'<span class="sr-only">',"</span>")}}),(0,c.jsx)(a.A,{className:"ml-1 inline-block",icon:l.A,size:18})]})]})]})}),(0,c.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,c.jsx)(d,{onClick:n}),(0,c.jsx)(u,{onClick:h,text:(0,i.__)("Install Plugin","extendify-local")})]})]})}}}},4679(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});const o=()=>null},9586(e,t,n){"use strict";n.r(t),n.d(t,{allowedSettings:()=>a,default:()=>l});var o=n(6087),s=n(7723),r=n(790);const{abilities:i}=window.extAgentData,a=["posts_per_page","use_smilies","start_of_week","time_format","date_format","title","description"],l={available:()=>i?.canEditSettings,id:"edit-wp-setting",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const i=(0,o.useRef)(null),a=(0,o.useRef)("");return(0,o.useEffect)(()=>{const t=document.querySelector(".wp-block-site-title");if(!i.current&&t&&(i.current=t,a.current=t.textContent??""),!e)return;const{settingName:n,newSettingValue:o}=e;"title"===n&&i.current&&(i.current.textContent=o)},[e,i]),(0,r.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,r.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,s.__)("Apply this setting change?","extendify-local")})})}),(0,r.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,r.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:()=>{i.current&&(i.current.textContent=a.current),n()},children:(0,s.__)("Cancel","extendify-local")}),(0,r.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:()=>{t({data:e,shouldRefreshPage:!0})},children:(0,s.__)("Confirm","extendify-local")})]})]})}}}},3508(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>a});var o=n(9586),s=n(1455),r=n.n(s),i=n(7723);const a=async({settingName:e})=>{if(!o.allowedSettings.includes(e))throw new Error("Setting not allowed");return{oldSettingValue:(await r()({path:"/wp/v2/settings?context=edit"}))[e]||
// translators: No value found message for when a WP setting has no value.
// translators: No value found message for when a WP setting has no value.
(0,i.__)("No value found","extendify-local")}}},8795(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(9586),s=n(1455),r=n.n(s);const i=async({settingName:e,newSettingValue:t})=>{if(!o.allowedSettings.includes(e))throw new Error("Setting not allowed");return await r()({path:"/wp/v2/settings?context=edit",method:"POST",data:{[e]:t}})}},2130(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>d});var o=n(1455),s=n.n(o),r=n(6087),i=n(7723),a=n(790);const{abilities:l,context:c}=window.extAgentData,d={available:()=>l?.canEditPost&&c?.usingBlockEditor&&!c?.adminPage&&["post","page"].includes(c.postType)&&window.document.querySelectorAll("nav[data-extendify-menu-id]").length>0&&c?.postId,id:"add-post-to-menu",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n})=>{const[o,l]=(0,r.useState)(""),{replacements:c,id:d}=e??{},u=(0,r.useCallback)(()=>{n();const e=document.querySelector(`[data-extendify-menu-id="${d}"]`);e&&(e.innerHTML=o)},[n,d,o]);return(0,r.useEffect)(()=>{const e=document.querySelector(`[data-extendify-menu-id="${d}"]`);if(!e)return;l(e.innerHTML);const t=new AbortController;return(async()=>{try{const n=await s()({method:"POST",path:"/extendify/v1/agent/render-navigation",data:{content:c?.[0]?.updated},signal:t.signal});e&&n&&(e.innerHTML=n)}catch(e){if("AbortError"===e.name)throw e;console.error("Failed to render navigation:",e)}})(),()=>t.abort()},[c,d,l]),(0,a.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,a.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,a.jsx)("div",{className:"p-3",children:(0,a.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,i.__)("The agent has made the changes in the browser. Please review and confirm.","extendify-local")})})}),(0,a.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,a.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:u,children:(0,i.__)("Cancel","extendify-local")}),(0,a.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",onClick:()=>{t({data:e})},children:(0,i.__)("Save","extendify-local")})]})]})}}}},8757(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>w});var o=n(9395),s=n(6427),r=n(6087),i=n(7723),a=n(6101),l=n(6656),c=n(8972),d=n(6039),u=n(319),m=n(6942),p=n.n(m),g=n(790);const f=[{
// translators: Animation style where the element gradually appears by transitioning from transparent to visible. Translate as a simple, non-technical description of the visual effect (e.g., 'appear', 'show up') suitable for non-technical users.
name:(0,i._x)("Fade In","animation type","extendify-local"),slug:"fade",icon:a.A},{
// translators: Animation style where the element appears while moving upward. Translate as a simple, non-technical description of the motion (e.g., 'appear from below', 'rise into view') suitable for non-technical users.
name:(0,i._x)("Fade Up","animation type","extendify-local"),slug:"fade-up",icon:l.A},{
// translators: Animation style where the element appears by scaling from small to its full size. Translate as a simple, non-technical description of the effect (e.g., 'zoom in', 'get closer') suitable for non-technical users. If the target language commonly uses the English term 'zoom', it's acceptable to keep it.
name:(0,i._x)("Zoom In","animation type","extendify-local"),slug:"zoom-in",icon:c.A},{
// translators: None refers to 'no animation'. Apply the correct grammatical gender/form that agrees with the word for 'animation' in the target language.
name:(0,i._x)("None","animation type","extendify-local"),slug:"none",icon:d.A}],h=[{
// translators: "Slow" refers to a slower speed at which the animation effect occurs. This is an option in a list of animation speeds.
name:(0,i._x)("Slow","animation speed","extendify-local"),slug:"slow"},{
// translators: "Medium" refers to a moderate speed at which the animation effect occurs. This is an option in a list of animation speeds.
name:(0,i._x)("Medium","animation speed","extendify-local"),slug:"medium"},{
// translators: "Fast" refers to a quicker speed at which the animation effect occurs. This is an option in a list of animation speeds.
name:(0,i._x)("Fast","animation speed","extendify-local"),slug:"fast"}],x=({name:e,selected:t,icon:n,onClick:o})=>(0,g.jsxs)("button",{type:"button",className:p()("relative h-full w-full rounded-lg border p-2 text-sm text-left flex flex-col gap-4 font-medium hover:bg-gray-100",{"border-gray-900 bg-gray-100":t,"border-gray-300 bg-gray-50":!t}),onClick:o,children:[(0,g.jsx)(u.A,{icon:n,className:"h-6 w-6"}),e,t&&(0,g.jsx)("div",{className:"absolute top-1 right-1 h-3.5 w-3.5 flex items-center justify-center rounded-full bg-design-main text-center text-xss text-white leading-none",children:(0,g.jsx)("span",{children:"âœ“"})})]}),{abilities:y}=window.extAgentData,w={available:()=>y?.canEditSettings&&window.ExtendableAnimations,id:"change-animation",whenFinished:{component:({onConfirm:e,onCancel:t})=>{const n=(0,r.useRef)({}),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(0),[u,m]=(0,r.useState)(null),[p,y]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{c&&(window.ExtendableAnimations.setType(a),window.ExtendableAnimations.setSpeed(u))},[u,a,c]),(0,r.useEffect)(()=>{p&&(0,o.o)("extendify_animation_settings").then((e={})=>{n.current={type:"none",speed:"medium",...e||{}},l(n.current.type),m(n.current.speed),y(!1)})},[]),p?(0,g.jsx)("div",{className:"min-h-24 p-2 text-center text-sm",children:
// translators: This is a status message. 'Loading' is a verb â€” the app is currently loading the animation options. It is not referring to 'loading animation' as a compound noun.
// translators: This is a status message. 'Loading' is a verb â€” the app is currently loading the animation options. It is not referring to 'loading animation' as a compound noun.
(0,i.__)("Loading animation options...","extendify-local")}):(0,g.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,g.jsxs)("div",{className:"rounded-lg p-3 border-b border-gray-300 bg-white",children:[(0,g.jsx)("div",{className:"text-xs uppercase mb-3 text-gray-700 font-medium",children:(0,i._x)("Type","animation type","extendify-local")}),(0,g.jsx)("div",{className:"grid gap-2 mb-6",style:{gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gridAutoRows:"1fr"},children:f.map(({name:e,slug:t,icon:n})=>(0,g.jsx)(s.Tooltip,{text:e,placement:"top",children:(0,g.jsx)("div",{children:(0,g.jsx)(x,{name:e,icon:n,selected:a===t,onClick:()=>{d(e=>e+1),l(t)}})})},t))}),(0,g.jsx)("div",{className:"text-xs uppercase mb-1 text-gray-700 font-medium",children:(0,i._x)("Speed","animation speed","extendify-local")}),(0,g.jsx)(s.__experimentalToggleGroupControl,{className:"border-gray-300 rounded-sm m-0 before:rounded-sm focus-within:border-gray-900",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,isBlock:!0,value:u,onChange:e=>{d(e=>e+1),m(e)},children:h.map(({name:e,slug:t})=>(0,g.jsx)(s.__experimentalToggleGroupControlOption,{label:e,value:t},t))})]}),(0,g.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,g.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:()=>{if(!c)return t();window.ExtendableAnimations.setType(n.current.type),window.ExtendableAnimations.setSpeed(n.current.speed),t()},children:(0,i.__)("Cancel","extendify-local")}),(0,g.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",disabled:!a||!u||p,onClick:()=>{a&&u&&!p&&e({data:{type:a,speed:u}})},children:(0,i.__)("Save","extendify-local")})]})]})}}}},5339(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>k});var o=n(3372),s=n(6748),r=n(6087);const i="block-style-variation-styles-inline-css",a='iframe[name="editor-canvas"]',l=".editor-styles-wrapper",c=()=>{const e=document.querySelector(a);return e?.contentDocument||document};var d=n(6939),u=n(1455),m=n.n(u),p=n(4225);const g=async()=>{const e=await m()({path:"/wp/v2/global-styles/themes/extendable?context=edit"}),t=e?.styles;if(!t?.blocks)return null;const n=await m()({path:"/extendify/v1/launch/options?option=extendify_siteStyle"}),o=n?.data?.vibe;return{vibes:f(t),css:{...d},currentVibe:o||"natural-1"}},f=e=>{if(!e?.blocks)return[];const t=new Set,{blocks:n}=e;for(const e of Object.values(n))if(e?.variations)for(const n of Object.keys(e.variations)){if(!n.startsWith("ext-preset--"))continue;const e=n.split("--");if(e.length>=4){const n=e[2];n&&t.add(n)}}return Array.from(t).map(e=>({name:h(e),slug:e}))},h=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");var x=n(8459),y=n(6427),w=n(7723),b=n(790);const{context:v,abilities:j}=window.extAgentData,k={available:()=>j?.canEditThemes&&v?.hasThemeVariations&&v?.isUsingVibes,needsRedirect:()=>!Number(v?.postId||0),redirectComponent:()=>(0,o.r)(
// translators: "site style" refers to the structural aesthetic style for the site.
// translators: "site style" refers to the structural aesthetic style for the site.
(0,w.__)("Hey there! It looks like you are trying to change your site style, but you are not on a page where we can do that.","extendify-local")),id:"change-site-vibes",whenFinished:{component:({onConfirm:e,onCancel:t})=>{const{data:n,isLoading:o}=(()=>{const{data:e,error:t,isLoading:n}=(0,p.A)({key:"site-vibes-variations",themeSlug:window.extAgentData.context.themeSlug},g);return{data:e,error:t,isLoading:n}})(),{vibes:d,css:u}=n||{},[m,f]=(0,r.useState)(null),h=m?u[m]:"",{undoChange:v}=(({css:e,slug:t})=>{const n=(0,r.useRef)(null),[o,d]=(0,r.useState)(null),u=(0,s.rQ)();return(0,r.useEffect)(()=>{if(!e||u||!t)return;const o=document.getElementById(i);o&&(n.current||(n.current=o.innerHTML),o.innerHTML=((e,t)=>e.replaceAll(t,"natural-1"))(e,t))},[e,t,u]),(0,r.useEffect)(()=>{if(!e||!o||!u)return;const n=o.getElementById(i),s=document.querySelector(a);let r=e.replaceAll(":root",s?":root":l).replaceAll(t,"natural-1").replace(/:where\(([^)]+)\)/g,":where($1):not(.ext-vibe-container, .ext-vibe-container *)");s||(r=r.replace("body{",`${l}{`).replace(/(h[1-6](?:\s*,\s*h[1-6])*)\s*\{/g,`${l} $1{`)),n.innerHTML=r},[e,t,o,u]),(0,r.useEffect)(()=>{if(o)return;const e=setTimeout(()=>{if(o)return;const e=c();if(!e||!e.body)return;const t=e.createElement("style");t.id=i,e.body.appendChild(t),d(e)},300);return()=>clearTimeout(e)},[o]),{undoChange:()=>{const e=document.getElementById(i);if(e&&n.current&&(e.innerHTML=n.current),!u)return;const t=c();t?.getElementById(i)?.remove()}}})({css:h,slug:m}),j=!d||0===d.length,k=(0,r.useMemo)(()=>d?[...d].sort(()=>Math.random()-.5):[],[d]),{addMessage:_,messages:S}=(0,x.L)();return(0,r.useEffect)(()=>{if(o||!j)return;const e=setTimeout(()=>t(),100),n=(0,w.__)("We were unable to find any site style for your theme.","extendify-local"),s=S.at(-1)?.details?.content;
// translators: "site style" refers to the structural aesthetic style for the site.
return n===s||_("message",{role:"assistant",content:n,error:!0}),()=>clearTimeout(e)},[_,t,j,S,o]),o?(0,b.jsx)("div",{className:"min-h-24 p-2 text-center text-sm",children:
// translators: "site style" refers to the structural aesthetic style for the site.
// translators: "site style" refers to the structural aesthetic style for the site.
(0,w.__)("Loading site style options...","extendify-local")}):j?null:(0,b.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,b.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,b.jsx)("div",{className:"grid gap-2 p-3",style:{gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gridAutoRows:"1fr"},children:k?.slice(0,10).map(({name:e,slug:t})=>(0,b.jsxs)(y.Tooltip,{text:e,placement:"top",children:[(0,b.jsx)("style",{children:u[t]?.replaceAll(":root",".ext-vibe-container")?.replaceAll("is-style-ext-preset--","preview-is-style-ext-preset--")}),(0,b.jsx)("button",{"aria-label":e,type:"button",className:"ext-vibe-container relative z-10 flex h-full w-full appearance-none items-stretch justify-center overflow-hidden rounded-lg border border-gray-300 bg-none p-0 text-sm text-inherit shadow-vibe drop-shadow-md "+(m===t?"z-0 ring-wp ring-design-main":""),onClick:()=>f(t),children:(0,b.jsx)("div",{className:`wp-block-group w-full preview-is-style-ext-preset--group--${t}--section has-background-background-color has-background h-full p-3`,children:(0,b.jsxs)("div",{style:{color:"var(--wp--preset--color--foreground, inherit)"},className:`wp-block-group has-tertiary-background-color has-background h-full w-full content-stretch items-center justify-center bg-design-tertiary py-7 px-0 text-2xl rtl:space-x-reverse preview-is-style-ext-preset--group--${t}--item-card-1--align-center`,children:[(0,b.jsx)("h1",{className:"mb-1 text-sm font-semibold",children:
// translators: This is a placeholder title used in a visual preview of a site structural aesthetic styles. It demonstrates how the typography looks.
// translators: This is a placeholder title used in a visual preview of a site structural aesthetic styles. It demonstrates how the typography looks.
(0,w.__)("Title","extendify-local")}),(0,b.jsx)("p",{className:"mt-1 text-xs font-light",children:
// translators: This is a placeholder description used in a visual preview of a site structural aesthetic styles. It demonstrates how the typography looks.
// translators: This is a placeholder description used in a visual preview of a site structural aesthetic styles. It demonstrates how the typography looks.
(0,w.__)("Description","extendify-local")})]})})})]},t))})}),(0,b.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,b.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:()=>{v(),t()},children:(0,w.__)("Cancel","extendify-local")}),(0,b.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",disabled:!m,onClick:()=>{m&&e({data:{selectedVibe:m},shouldRefreshPage:!0})},children:(0,w.__)("Save","extendify-local")})]})]})}}}},1916(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>S});var o=n(3372),s=n(1548),r=n(7584),i=n(1455),a=n.n(i),l=n(4997),c=n(7143),d=n(6087);const u="global-styles-inline-css",m=window.location.pathname,p=new URLSearchParams(window.location.search),g=m.includes("/wp-admin/post.php")&&"edit"===p.get("action"),{globalStylesPostID:f}=window.extSharedData;var h=n(7723),x=n(4225);const y=async()=>{const e=window.location.pathname,t=new URLSearchParams(window.location.search),n=e.includes("/wp-admin/post.php")&&"edit"===t.get("action"),o=await a()({method:"GET",path:"/extendify/v1/agent/theme-fonts-variations"+(n?"":"?includeLayoutStyles")});if(!o||!Array.isArray(o))throw new Error((0,h.__)("Failed to fetch theme font variations.","extendify-local"));return{variations:o.reduce((e,t)=>(e.some(e=>e.title===t.title)||e.push(t),e),[])}};var w=n(8459),b=n(6427),v=n(790);const j=e=>e?.typography?.fontFamily&&e?.elements?.heading?.typography?.fontFamily?{normal:e.typography.fontFamily,heading:e.elements.heading.typography.fontFamily||e.typography.fontFamily}:e?.typography?.fontFamily?{normal:e.typography.fontFamily,heading:e.typography.fontFamily}:void 0,{context:k,abilities:_}=window.extAgentData,S={available:()=>_?.canEditThemes&&k?.hasThemeVariations,needsRedirect:()=>!Number(k?.postId||0),redirectComponent:()=>(0,o.r)((0,h.__)("Hey there! It looks like you are trying to change your theme fonts, but you are not on a page where we can do that.","extendify-local")),id:"change-theme-fonts-variation",whenFinished:{component:({onConfirm:e,onCancel:t})=>{const[n,o]=(0,d.useState)(""),[i,m]=(0,d.useState)(null),{undoChange:p}=(({css:e})=>{const t=(0,d.useRef)(null),n=(0,d.useRef)(null),[o,i]=(0,d.useState)(null),[m,p]=(0,d.useState)(null);(0,d.useEffect)(()=>{a()({path:`/wp/v2/global-styles/${f}?context=edit`}).then(e=>{const t=e?.settings?.color?.duotone?.theme;p(t)})},[e]),(0,d.useEffect)(()=>{if(!e||g)return;const n=document.getElementById(u);n&&(t.current||(t.current=n.innerHTML),n.innerHTML=e)},[e]),(0,d.useEffect)(()=>{if(!e||!o||!g)return;const t=o.getElementById(u),n=document.querySelector('iframe[name="editor-canvas"]');t.innerHTML=e.replaceAll(":root",n?":root":".editor-styles-wrapper"),n||(t.innerHTML=t.innerHTML.replace("body{",".editor-styles-wrapper{").replace(/(h[1-6](?:\s*,\s*h[1-6])*)\s*\{/g,".editor-styles-wrapper $1{"))},[e,o]),(0,d.useEffect)(()=>{if(o)return;const e=setTimeout(()=>{if(o)return;const e=document.querySelector('iframe[name="editor-canvas"]'),t=e?.contentDocument||document;if(!t||!t.body)return;const n=t.createElement("style");n.id=u,t.body.appendChild(n),i(t)},300);return()=>clearTimeout(e)},[o]);const h=(0,c.useSelect)(e=>{let t=e("core/block-editor")?.getBlocks?.()??[];if(t.find(e=>"core/template-part"===e.name)){const{getEditedPostContent:n}=e("core/editor");t=(0,l.parse)(n(),{})}return(0,s.w)(t)},[]);return(0,d.useEffect)(()=>{m&&(n.current&&(n.current(),n.current=null),n.current=(0,r.T)({duotoneTheme:m,dynamicDuotone:h}))},[e,m,h]),{undoChange:()=>{n.current&&(n.current(),n.current=null);const e=document.getElementById(u);if(e&&t.current&&(e.innerHTML=t.current),!g)return;const o=document.querySelector('iframe[name="editor-canvas"]'),s=o?.contentDocument||document;s?.getElementById(u)?.remove()}}})({css:n}),{variations:k,isLoading:_}=(()=>{const{data:e,error:t,isLoading:n}=(0,x.A)({key:"theme-fonts-variations",themeSlug:window.extAgentData.context.themeSlug},y);return{variations:e?.variations,error:t,isLoading:n}})(),S=!k||0===k.length,T=(0,d.useMemo)(()=>k?k.sort(()=>Math.random()-.5):[],[k]),{addMessage:L,messages:C}=(0,w.L)();return(0,d.useEffect)(()=>{if(_||!S)return;const e=setTimeout(()=>t(),100),n=(0,h.__)("We were unable to find any variations for your theme","extendify-local"),o=C.at(-1)?.details?.content;
// translators: A chat message shown to the user
return n===o||L("message",{role:"assistant",content:n,error:!0}),()=>clearTimeout(e)},[L,t,S,C,_]),_?(0,v.jsx)("div",{className:"min-h-24 p-2 text-center text-sm",children:(0,h.__)("Loading font variations...","extendify-local")}):S?null:(0,v.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,v.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,v.jsx)("div",{className:"grid grid-cols-2 gap-2 p-3",children:T?.slice(0,10)?.map(({title:e,css:t,styles:n})=>(0,v.jsx)(b.Tooltip,{text:e,placement:"top",children:(0,v.jsx)("button",{"aria-label":e,type:"button",style:{fontFamily:j(n)?.normal},className:"relative flex w-full items-center justify-center overflow-hidden rounded-lg border border-gray-300 bg-none p-2 text-center text-sm "+(i===e?"ring-wp ring-design-main":""),onClick:()=>{m(e),o(t)},children:(0,v.jsxs)("div",{className:"max-w-fit content-stretch items-center justify-center rounded-lg text-2xl rtl:space-x-reverse",children:[(0,v.jsx)("span",{style:{fontFamily:j(n)?.heading},children:"A"}),(0,v.jsx)("span",{style:{fontFamily:j(n)?.normal},children:"a"})]})})},e))})}),(0,v.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,v.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:()=>{p(),t()},children:(0,h.__)("Cancel","extendify-local")}),(0,v.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",disabled:!i,onClick:()=>{i&&e({data:{variation:k.find(e=>e.title===i)},shouldRefreshPage:!0})},children:(0,h.__)("Save","extendify-local")})]})]})}}}},284(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>x});var o=n(7723),s=n(790),r=n(1455),i=n.n(r),a=n(4225);const l=async()=>{const e=window.location.pathname,t=new URLSearchParams(window.location.search),n=e.includes("/wp-admin/post.php")&&"edit"===t.get("action"),s=await i()({method:"GET",path:"/extendify/v1/agent/theme-variations"+(n?"":"?includeLayoutStyles")});if(!s||!Array.isArray(s))throw new Error((0,o.__)("Failed to fetch theme variations.","extendify-local"));return{variations:s.reduce((e,t)=>(e.some(e=>e.title===t.title)||e.push(t),e),[])}};var c=n(2441),d=n(8459),u=n(6427),m=n(6087);const p=(e,t)=>e?.color?.palette?.theme.find(e=>e.slug===t)?.color,g=e=>e?.color?.palette?.theme?.filter(e=>"background"!==e.slug)?.reduce((e,t)=>(e.push(t.color),e),[]),{context:f,abilities:h}=window.extAgentData,x={available:()=>h?.canEditThemes&&f?.hasThemeVariations,needsRedirect:()=>!Number(f?.postId||0),redirectComponent:()=>(0,s.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,s.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white p-3",children:(0,s.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:(0,o.__)("Hey there! It looks like you are trying to change your theme colors, but you are not on a page where we can do that.","extendify-local")})}),(0,s.jsxs)("div",{className:"m-0 p-3 text-sm text-gray-900",children:[(0,o.__)("Suggestion:","extendify-local")," ",(0,s.jsx)("a",{href:`${window.extSharedData.homeUrl}`,children:(0,o.__)("Home page","extendify-local")})]})]}),id:"change-theme-variation",whenFinished:{component:({onConfirm:e,onCancel:t})=>{const[n,r]=(0,m.useState)(""),[i,f]=(0,m.useState)(null),[h,x]=(0,m.useState)(null),{undoChange:y}=(0,c.b)({css:n,duotoneTheme:h}),{variations:w,isLoading:b}=(()=>{const{data:e,error:t,isLoading:n}=(0,a.A)({key:"theme-variations",themeSlug:window.extAgentData.context.themeSlug},l);return{variations:e?.variations,error:t,isLoading:n}})(),v=!w||0===w.length,{addMessage:j,messages:k}=(0,d.L)(),_=(0,m.useMemo)(()=>w?w.sort(()=>Math.random()-.5):[],[w]);return(0,m.useEffect)(()=>{if(b||!v)return;const e=setTimeout(()=>t(),100),n=(0,o.__)("We were unable to find any colors for your theme","extendify-local"),s=k.at(-1)?.details?.content;
// translators: A chat message shown to the user
return n===s||j("message",{role:"assistant",content:n,error:!0}),()=>clearTimeout(e)},[j,t,v,k,b]),b?(0,s.jsx)("div",{className:"min-h-24 p-2 text-center text-sm",children:(0,o.__)("Loading available colors...","extendify-local")}):v?null:(0,s.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,s.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 p-3",children:_?.slice(0,10)?.map(({title:e,css:t,settings:n})=>(0,s.jsx)(u.Tooltip,{text:e,placement:"top",children:(0,s.jsx)("button",{style:{backgroundColor:p(n,"background")},type:"button",className:"relative flex w-full items-center justify-center overflow-hidden rounded-lg border border-gray-300 bg-none p-2 text-center text-sm "+(i===e?"ring-wp ring-design-main":""),onClick:()=>{f(e),r(t),x(n?.color?.duotone?.theme)},children:(0,s.jsx)("div",{className:"flex max-w-fit items-center justify-center -space-x-4 rounded-lg rtl:space-x-reverse",children:g(n)?.map((t,n)=>(0,s.jsx)("div",{style:{backgroundColor:t},className:"size-6 shrink-0 overflow-visible rounded-full border border-white md:size-7"},e+t+n))})})},e))})}),(0,s.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,s.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:()=>{y(),t()},children:(0,o.__)("Cancel","extendify-local")}),(0,s.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",disabled:!i,onClick:()=>{i&&e({data:{variation:w.find(e=>e.title===i)},shouldRefreshPage:!0})},children:(0,o.__)("Save","extendify-local")})]})]})}}}},3372(e,t,n){"use strict";n.d(t,{r:()=>r});var o=n(7723),s=n(790);const r=e=>(0,s.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,s.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white p-3",children:(0,s.jsx)("p",{className:"m-0 p-0 text-sm text-gray-900",children:e})}),(0,s.jsxs)("div",{className:"m-0 p-3 text-sm text-gray-900",children:[(0,o.__)("Suggestion:","extendify-local")," ",(0,s.jsx)("a",{href:`${window.extSharedData.homeUrl}`,children:(0,o.__)("Home page","extendify-local")})]})]})},3944(e,t,n){"use strict";n.d(t,{N:()=>c});var o=n(4972),s=n(3410),r=n(6087),i=n(7723),a=n(790);const l=(e,t)=>{document.querySelectorAll(".wp-block-site-logo img")?.forEach(n=>{n.srcset="",n.src=e,n.style.filter=t??""})},c=({onConfirm:e,onCancel:t})=>{const{block:n}=(0,s.Y)(),[c,u]=(0,r.useState)();return(0,r.useEffect)(()=>{u(document.querySelector(".wp-block-site-logo img")?.src??null)},[n]),(0,r.useEffect)(()=>{const e=document.createElement("style");return e.textContent=".media-modal {\n\t\t\tz-index: 999999 !important;\n\t\t}",document.head.appendChild(e),()=>e.remove()},[]),(0,a.jsx)(d,{children:(0,a.jsx)("div",{className:"relative p-3",children:(0,a.jsx)(o.G,{type:"site_logo",title:(0,i.__)("Site logo","extendify-local"),actionLabel:(0,i.__)("Set site logo","extendify-local"),onSave:async({imageId:t})=>{await e({data:{imageId:t},shouldRefreshPage:!window.extAgentData?.context?.adminPage})},onCancel:()=>{l(c),t()},onSelect:e=>{l(e.url,"none")}})})})},d=({children:e})=>(0,a.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e})},770(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>g});var o=n(2441),s=n(8459),r=n(6427),i=n(6087),a=n(7723),l=n(790);const c=e=>{const t={};return e.forEach(({slug:e,color:n})=>{t[e]=n}),t},d=e=>{const t=["base","background","bg"];for(const n of t)if(e[n])return e[n];return"#ffffff"},u=window.extAgentData?.context?.themePresets?.duotone||[],m=window.extAgentData?.context?.themePresets?.colors||{};window.extAgentData;const{abilities:p}=window.extAgentData,g={available:()=>p?.canEditThemes,id:"generate-color-palette",whenFinished:{component:({inputs:e,onConfirm:t,onCancel:n,onRetry:p})=>{const[g,f]=(0,i.useState)(null),[h,x]=(0,i.useState)(""),[y,w]=(0,i.useState)(null),{addMessage:b,messages:v}=(0,s.L)(),j=e?.palettes,k=(0,i.useMemo)(()=>j?.map(({name:e,colors:t})=>({name:e,colors:c(t),colorsArray:t}))||[],[j]),_=!j?.length||0===k.length,{undoChange:S}=(0,o.b)({css:h,duotoneTheme:y});return(0,i.useEffect)(()=>{if(!_)return;const e=setTimeout(()=>n(),100),t=(0,a.__)("We were unable to generate color palettes. Please try again.","extendify-local"),o=v.at(-1)?.details?.content;return t===o||b("message",{role:"assistant",content:t,error:!0}),()=>clearTimeout(e)},[b,n,_,v]),_?null:(0,l.jsxs)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:[(0,l.jsx)("div",{className:"rounded-lg border-b border-gray-300 bg-white",children:(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2 p-3",children:k.map(({name:e,colors:t,colorsArray:n})=>(0,l.jsx)(r.Tooltip,{text:e,placement:"top",children:(0,l.jsx)("button",{type:"button",style:{backgroundColor:d(t)},className:"relative flex w-full items-center justify-center overflow-hidden rounded-lg border border-gray-300 p-2 text-center text-sm "+(g===e?"ring-wp ring-design-main":""),onClick:()=>{f(e),x((e=>{const t=document.getElementById("global-styles-inline-css");if(!t)return"";let n=t.innerHTML;return Object.entries(e).forEach(([e,t])=>{const o=new RegExp(`(--wp--preset--color--${e}\\s*:\\s*)([^;]+)(;)`,"g");n=n.replace(o,`$1${t}$3`)}),n})(t)),w((e=>{if(!u.length)return null;const t=[];for(const n of u){const{slug:o,colors:s}=n;if(!s||2!==s.length)continue;const r=s.map(t=>{const n=Object.entries(m).find(([,e])=>e.toLowerCase()===t.toLowerCase())?.[0];return n&&e[n]?e[n]:t});t.push({slug:o,colors:r})}return t.length>0?t:null})(t))},children:(0,l.jsx)("div",{className:"flex max-w-fit items-center justify-center -space-x-4 rounded-lg rtl:space-x-reverse",children:n.filter(({slug:e})=>"background"!==e).map(({slug:e,color:t})=>(0,l.jsx)("div",{style:{backgroundColor:t},className:"size-6 shrink-0 overflow-visible rounded-full border border-white md:size-7"},e))})})},e))})}),(0,l.jsxs)("div",{className:"flex justify-start gap-2 p-3",children:[(0,l.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:()=>{S(),n()},children:(0,a.__)("Cancel","extendify-local")}),(0,l.jsx)("button",{type:"button",className:"w-full rounded-sm border border-gray-500 bg-white p-2 text-sm text-gray-900",onClick:()=>{S(),p()},children:(0,a.__)("Try Again","extendify-local")}),(0,l.jsx)("button",{type:"button",className:"w-full rounded-sm border border-design-main bg-design-main p-2 text-sm text-white",disabled:!g,onClick:()=>{if(!g)return;const e=k.find(e=>e.name===g);t({data:{palette:{name:e.name,colors:e.colorsArray.map(({slug:e,color:t})=>({slug:e,color:t,name:e}))},duotone:y},shouldRefreshPage:!0})},children:(0,a.__)("Save","extendify-local")})]})]})}}}},3712(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),s=n.n(o);const r={page:"pages",post:"posts"},i=async({postId:e,postType:t})=>{const n=Array.from(window.document?.querySelectorAll("nav[data-extendify-menu-id]")??[]).map(e=>e.dataset.extendifyMenuId).filter(Boolean),o=n.length>0?await s()({method:"POST",path:"/extendify/v1/agent/site-navigation",data:{only:n.join(",")}}).catch(()=>[]):[];if(window.extAgentData?.context&&"draft"!==window.extAgentData?.context?.postStatus){let n=window.wp?.data?.select("core")?.getEntityRecord("postType",t,e)?.link;if(!n&&r[t]){const o=await s()({path:`/wp/v2/${r[t]}/${e}`}).catch(console.error);n=o?.link}n&&window.extAgentData?.context&&(window.extAgentData.context.postUrl=n)}return{navigations:o}}},6783(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(1455),s=n.n(o);const r=window.extSharedData.globalStylesPostID,i=async({palette:e,duotone:t})=>{const n=await s()({path:`/wp/v2/global-styles/${r}`}),o=await s()({path:"/extendify/v1/agent/block-style-variations"}),i=Object.keys(o).reduce((e,t)=>(e[t]={...n.styles?.blocks?.[t],variations:o[t]},e),{}),a=e.colors.map(({slug:e,color:t,name:n})=>({slug:e,color:t,name:n})),l={...n.settings?.color,palette:{...n.settings?.color?.palette,theme:a}};return t&&(l.duotone={...n.settings?.color?.duotone,theme:t}),s()({method:"POST",path:`/wp/v2/global-styles/${r}`,data:{id:r,settings:{...n.settings,color:l},styles:{...n.styles,blocks:{...n.styles?.blocks,...i}}}})}},7303(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(9395);const s=({type:e,speed:t})=>(0,o.D)("extendify_animation_settings",{type:e,speed:t})},3230(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(1455),s=n.n(o);const r=async({imageId:e})=>{await s()({path:"/wp/v2/settings",method:"POST",data:{site_logo:e}})}},443(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(1455),s=n.n(o);const r=async({id:e,replacements:t})=>await s()({path:`/wp/v2/navigation/${e}`,method:"POST",data:{content:t?.[0]?.updated}})},8350(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(1455),s=n.n(o);const r=async({imageId:e})=>{await s()({path:"/wp/v2/settings",method:"POST",data:{site_icon:e}})}},8922(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>a});var o=n(1455),s=n.n(o);const r=window.extSharedData?.globalStylesPostID,i=window.extAgentData?.context?.themeSlug,a=async({selectedVibe:e})=>{if(e&&"string"==typeof e&&""!==e.trim())try{const{styles:t}=await s()({path:`/wp/v2/global-styles/${r}?context=edit`}),{styles:n}=await s()({path:`/wp/v2/global-styles/themes/${i}?context=edit`}),o={};for(const[t,s]of Object.entries(n.blocks)){if(!s?.variations){o[t]=s;continue}const{variations:n,...r}=s;o[t]={...r,variations:c(n,e)}}await Promise.all([s()({path:`wp/v2/global-styles/${r}`,method:"POST",data:{styles:{...t,blocks:o}}}),l(e)])}catch(e){throw new Error(`Vibe update failed: ${e?.response?.data?.message||e?.message||"Unknown error"}`)}},l=async e=>{const{data:t}=await s()({path:"/extendify/v1/launch/options?option=extendify_siteStyle"}),n={...t&&"object"==typeof t&&!Array.isArray(t)?t:{},vibe:e};return await s()({path:"/extendify/v1/launch/options",method:"POST",data:{option:"extendify_siteStyle",value:n}})},c=(e,t)=>{const n={};for(const[o,s]of Object.entries(e)){if(!o.includes("--natural-1--")){n[o]=s;continue}const r=e[o.replace("--natural-1--",`--${t}--`)];n[o]=r||s}return n}},1299(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o.default});var o=n(6590)},4664(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o.default});var o=n(6590)},6590(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>a});var o=n(365),s=n(1455),r=n.n(s);const{globalStylesPostID:i}=window.extSharedData,a=async({variation:e})=>{const t=await r()({path:`/wp/v2/global-styles/${i}?context=edit`}),n=await r()({path:"/extendify/v1/agent/block-style-variations"}),s=Object.keys(n).reduce((e,t)=>(e[t]={variations:n[t]},e),{}),a=(0,o.$N)(t,e,{styles:{blocks:s}});return r()({method:"POST",path:`/wp/v2/global-styles/${i}`,data:{id:i,...a}})}},18(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(3944);const{abilities:s}=window.extAgentData,r={available:()=>s?.canEditSettings&&s?.canUploadMedia,id:"update-logo",whenFinished:{component:o.N}}},8147(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>d});var o=n(4972),s=n(6087),r=n(7723),i=n(790);const a=e=>{document.querySelectorAll('link[rel*="icon"]')?.forEach(t=>{t.href=e})},l=({children:e})=>(0,i.jsx)("div",{className:"mb-4 ml-10 mr-2 flex flex-col rounded-lg border border-gray-300 bg-gray-50 rtl:ml-2 rtl:mr-10",children:e}),{abilities:c}=window.extAgentData,d={available:()=>c?.canEditSettings&&c?.canUploadMedia,id:"update-site-icon",whenFinished:{component:({onConfirm:e,onCancel:t})=>{const[n,c]=(0,s.useState)();return(0,s.useEffect)(()=>{c(document.querySelector('link[rel="icon"]')?.href??null)},[]),(0,s.useEffect)(()=>{const e=document.createElement("style");return e.textContent=".media-modal {\n\t\t\tz-index: 999999 !important;\n\t\t}",document.head.appendChild(e),()=>e.remove()},[]),(0,i.jsx)(l,{children:(0,i.jsx)("div",{className:"relative p-3",children:(0,i.jsx)(o.G,{type:"site_icon",title:(0,r.__)("Site icon","extendify-local"),actionLabel:(0,r.__)("Set site icon","extendify-local"),onSave:async({imageId:t})=>{await e({data:{imageId:t},shouldRefreshPage:!0})},onCancel:()=>{a(n),t()},onSelect:e=>{a(e.url)}})})})}}}},9333(e,t,n){"use strict";n.d(t,{L:()=>s,Y:()=>i});const o=n(1528),s=o.keys().filter(e=>"./workflows.js"!==e).map(e=>o(e).default||o(e)),r=n(205),i=r.keys().reduce((e,t)=>(e[t.split("/").pop().replace(".js","")]=r(t).default||r(t),e),{})},1528(e,t,n){var o={"./block-selector/block-general.js":6097,"./block-selector/generate-image.js":8446,"./block-selector/update-block-logo.js":7882,"./block-selector/upload-image.js":1804,"./content/create-page.js":439,"./content/edit-post-strings-editor.js":1352,"./content/edit-post-strings.js":1429,"./content/update-post-status.js":1755,"./misc/get-list-of-tours.js":5749,"./plugins/recommend-plugin.js":7275,"./settings/edit-wp-setting.js":9586,"./theme/add-post-to-menu.js":2130,"./theme/change-animation.js":8757,"./theme/change-site-vibes.js":5339,"./theme/change-theme-fonts-variation.js":1916,"./theme/change-theme-variation.js":284,"./theme/generate-color-palette.js":770,"./theme/update-logo.js":18,"./theme/update-site-icon.js":8147};function s(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=r,e.exports=s,s.id=1528},205(e,t,n){var o={"./block-selector/tools/generate-block-image.js":1598,"./block-selector/tools/get-block-content.js":2853,"./block-selector/tools/update-block-content.js":1256,"./block-selector/tools/update-block-image.js":2628,"./block-selector/tools/update-block-logo.js":8998,"./content/tools/generate-page.js":8942,"./content/tools/get-post-status.js":3571,"./content/tools/get-post-strings-editor.js":5261,"./content/tools/get-post-strings.js":1557,"./content/tools/update-post-status.js":9982,"./content/tools/update-post-strings-editor.js":5092,"./content/tools/update-post-strings.js":6636,"./content/tools/view-created-page.js":9133,"./extermal/tools/search-wp-docs.js":3364,"./plugins/tools/install-plugin.js":4679,"./settings/tools/get-wp-setting.js":3508,"./settings/tools/update-wp-setting.js":8795,"./theme/tools/get-menu-items.js":3712,"./theme/tools/select-generated-palette.js":6783,"./theme/tools/update-animation.js":7303,"./theme/tools/update-logo.js":3230,"./theme/tools/update-menu-items.js":443,"./theme/tools/update-site-icon.js":8350,"./theme/tools/update-site-vibes.js":8922,"./theme/tools/update-theme-fonts-variation.js":1299,"./theme/tools/update-theme-variation.js":4664,"./theme/tools/update-variation.js":6590};function s(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=r,e.exports=s,s.id=205},1609(e){"use strict";e.exports=window.React},5795(e){"use strict";e.exports=window.ReactDOM},790(e){"use strict";e.exports=window.ReactJSXRuntime},1455(e){"use strict";e.exports=window.wp.apiFetch},3162(e){"use strict";e.exports=window.wp.blob},5259(e){"use strict";e.exports=window.wp.blockDirectory},9363(e){"use strict";e.exports=window.wp.blockLibrary},4997(e){"use strict";e.exports=window.wp.blocks},6427(e){"use strict";e.exports=window.wp.components},3582(e){"use strict";e.exports=window.wp.coreData},7143(e){"use strict";e.exports=window.wp.data},8443(e){"use strict";e.exports=window.wp.date},8490(e){"use strict";e.exports=window.wp.domReady},3656(e){"use strict";e.exports=window.wp.editor},6087(e){"use strict";e.exports=window.wp.element},2619(e){"use strict";e.exports=window.wp.hooks},8537(e){"use strict";e.exports=window.wp.htmlEntities},7723(e){"use strict";e.exports=window.wp.i18n},6480(e){"use strict";e.exports=window.wp.mediaUtils},2279(e){"use strict";e.exports=window.wp.plugins},5573(e){"use strict";e.exports=window.wp.primitives},3832(e){"use strict";e.exports=window.wp.url}},e=>{e.O(0,[65,223],()=>e(e.s=7610)),e.O()}]);